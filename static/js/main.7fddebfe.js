/*! For license information please see main.7fddebfe.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.jsx=c,t.jsxs=c},173:(e,t,n)=>{e.exports=n(497)()},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,C=Object.prototype.hasOwnProperty,_={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)C.call(t,i)&&!A.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:_.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+k(l,0):s,x(o)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),P(o,t,i,"",function(e){return e})):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+k(a=e[c],c);l+=P(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=P(a=a.value,t,i,u=s+k(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,n){if(null==e)return e;var r=[],i=0;return P(e,r,"","",function(e){return t.call(n,e,i++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},N={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};function j(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.act=j,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=_.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)C.call(t,c)&&!A.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=j,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,f=null,d=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,R(C);else{var t=r(u);null!==t&&N(x,t.startTime-e)}}function C(e,n){g=!1,m&&(m=!1,y(T),T=-1),p=!0;var s=d;try{for(w(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!P());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var a=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?f.callback=a:f===r(c)&&i(c),w(n)}else i(c);f=r(c)}if(null!==f)var l=!0;else{var h=r(u);null!==h&&N(x,h.startTime-n),l=!1}return l}finally{f=null,d=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,A=!1,S=null,T=-1,E=5,k=-1;function P(){return!(t.unstable_now()-k<E)}function O(){if(null!==S){var e=t.unstable_now();k=e;var n=!0;try{n=S(!0,e)}finally{n?_():(A=!1,S=null)}}else A=!1}if("function"===typeof b)_=function(){b(O)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,D=I.port2;I.port1.onmessage=O,_=function(){D.postMessage(null)}}else _=function(){v(O,0)};function R(e){S=e,A||(A=!0,_())}function N(e,n){T=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,R(C))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(y(T),T=-1):m=!0,N(x,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,R(C))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},246:()=>{},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},574:()=>{},579:(e,t,n)=>{"use strict";e.exports=n(153)},661:(e,t,n)=>{var r,i=i||{version:"5.3.0"};if(t.fabric=i,"undefined"!==typeof document&&"undefined"!==typeof window)document instanceof("undefined"!==typeof HTMLDocument?HTMLDocument:Document)?i.document=document:i.document=document.implementation.createHTMLDocument(""),i.window=window;else{var s=new(n(574).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;i.document=s.document,i.jsdomImplForWrapper=n(748).implForWrapper,i.nodeCanvas=n(246).Canvas,i.window=s,DOMParser=i.window.DOMParser}function o(e,t){var n=e.canvas,r=t.targetCanvas,i=r.getContext("2d");i.translate(0,r.height),i.scale(1,-1);var s=n.height-r.height;i.drawImage(n,0,s,r.width,r.height,0,0,r.width,r.height)}function a(e,t){var n=t.targetCanvas.getContext("2d"),r=t.destinationWidth,i=t.destinationHeight,s=r*i*4,o=new Uint8Array(this.imageBuffer,0,s),a=new Uint8ClampedArray(this.imageBuffer,0,s);e.readPixels(0,0,r,i,e.RGBA,e.UNSIGNED_BYTE,o);var l=new ImageData(a,r,i);n.putImageData(l,0,0)}i.isTouchSupported="ontouchstart"in i.window||"ontouchstart"in i.document||i.window&&i.window.navigator&&i.window.navigator.maxTouchPoints>0,i.isLikelyNode="undefined"!==typeof Buffer&&"undefined"===typeof window,i.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],i.DPI=96,i.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",i.commaWsp="(?:\\s+,?\\s*|,\\s*)",i.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,i.reNonWord=/[ \n\.,;!\?\-]/,i.fontPaths={},i.iMatrix=[1,0,0,1,0,0],i.svgNS="http://www.w3.org/2000/svg",i.perfLimitSizeTotal=2097152,i.maxCacheSideLimit=4096,i.minCacheSideLimit=256,i.charWidthsCache={},i.textureSize=2048,i.disableStyleCopyPaste=!1,i.enableGLFiltering=!0,i.devicePixelRatio=i.window.devicePixelRatio||i.window.webkitDevicePixelRatio||i.window.mozDevicePixelRatio||1,i.browserShadowBlurConstant=1,i.arcToSegmentsCache={},i.boundsOfCurveCache={},i.cachesBoundsOfCurve=!0,i.forceGLPutImageData=!1,i.initFilterBackend=function(){return i.enableGLFiltering&&i.isWebglSupported&&i.isWebglSupported(i.textureSize)?(console.log("max texture size: "+i.maxTextureSize),new i.WebglFilterBackend({tileSize:i.textureSize})):i.Canvas2dFilterBackend?new i.Canvas2dFilterBackend:void 0},"undefined"!==typeof document&&"undefined"!==typeof window&&(window.fabric=i),function(){function e(e,t){if(this.__eventListeners[e]){var n=this.__eventListeners[e];t?n[n.indexOf(t)]=!1:i.util.array.fill(n,!1)}}function t(e,t){var n=function(){t.apply(this,arguments),this.off(e,n)}.bind(this);this.on(e,n)}i.Observable={fire:function(e,t){if(!this.__eventListeners)return this;var n=this.__eventListeners[e];if(!n)return this;for(var r=0,i=n.length;r<i;r++)n[r]&&n[r].call(this,t||{});return this.__eventListeners[e]=n.filter(function(e){return!1!==e}),this},on:function(e,t){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var n in e)this.on(n,e[n]);else this.__eventListeners[e]||(this.__eventListeners[e]=[]),this.__eventListeners[e].push(t);return this},once:function(e,n){if(1===arguments.length)for(var r in e)t.call(this,r,e[r]);else t.call(this,e,n);return this},off:function(t,n){if(!this.__eventListeners)return this;if(0===arguments.length)for(t in this.__eventListeners)e.call(this,t);else if(1===arguments.length&&"object"===typeof arguments[0])for(var r in t)e.call(this,r,t[r]);else e.call(this,t,n);return this}}}(),i.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var e=0,t=arguments.length;e<t;e++)this._onObjectAdded(arguments[e]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(e,t,n){var r=this._objects;return n?r[t]=e:r.splice(t,0,e),this._onObjectAdded&&this._onObjectAdded(e),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var e,t=this._objects,n=!1,r=0,i=arguments.length;r<i;r++)-1!==(e=t.indexOf(arguments[r]))&&(n=!0,t.splice(e,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[r]));return this.renderOnAddRemove&&n&&this.requestRenderAll(),this},forEachObject:function(e,t){for(var n=this.getObjects(),r=0,i=n.length;r<i;r++)e.call(t,n[r],r,n);return this},getObjects:function(e){return"undefined"===typeof e?this._objects.concat():this._objects.filter(function(t){return t.type===e})},item:function(e){return this._objects[e]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(e,t){return this._objects.indexOf(e)>-1||!!t&&this._objects.some(function(t){return"function"===typeof t.contains&&t.contains(e,!0)})},complexity:function(){return this._objects.reduce(function(e,t){return e+=t.complexity?t.complexity():0},0)}},i.CommonMethods={_setOptions:function(e){for(var t in e)this.set(t,e[t])},_initGradient:function(e,t){!e||!e.colorStops||e instanceof i.Gradient||this.set(t,new i.Gradient(e))},_initPattern:function(e,t,n){!e||!e.source||e instanceof i.Pattern?n&&n():this.set(t,new i.Pattern(e,n))},_setObject:function(e){for(var t in e)this._set(t,e[t])},set:function(e,t){return"object"===typeof e?this._setObject(e):this._set(e,t),this},_set:function(e,t){this[e]=t},toggle:function(e){var t=this.get(e);return"boolean"===typeof t&&this.set(e,!t),this},get:function(e){return this[e]}},function(e){var t=Math.sqrt,n=Math.atan2,r=Math.pow,s=Math.PI/180,o=Math.PI/2;i.util={cos:function(e){if(0===e)return 1;switch(e<0&&(e=-e),e/o){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},sin:function(e){if(0===e)return 0;var t=1;switch(e<0&&(t=-1),e/o){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(e)},removeFromArray:function(e,t){var n=e.indexOf(t);return-1!==n&&e.splice(n,1),e},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},degreesToRadians:function(e){return e*s},radiansToDegrees:function(e){return e/s},rotatePoint:function(e,t,n){var r=new i.Point(e.x-t.x,e.y-t.y),s=i.util.rotateVector(r,n);return new i.Point(s.x,s.y).addEquals(t)},rotateVector:function(e,t){var n=i.util.sin(t),r=i.util.cos(t);return{x:e.x*r-e.y*n,y:e.x*n+e.y*r}},createVector:function(e,t){return new i.Point(t.x-e.x,t.y-e.y)},calcAngleBetweenVectors:function(e,t){return Math.acos((e.x*t.x+e.y*t.y)/(Math.hypot(e.x,e.y)*Math.hypot(t.x,t.y)))},getHatVector:function(e){return new i.Point(e.x,e.y).multiply(1/Math.hypot(e.x,e.y))},getBisector:function(e,t,n){var r=i.util.createVector(e,t),s=i.util.createVector(e,n),o=i.util.calcAngleBetweenVectors(r,s),a=o*(0===i.util.calcAngleBetweenVectors(i.util.rotateVector(r,o),s)?1:-1)/2;return{vector:i.util.getHatVector(i.util.rotateVector(r,a)),angle:o}},projectStrokeOnPoints:function(e,t,n){var r=[],s=t.strokeWidth/2,o=t.strokeUniform?new i.Point(1/t.scaleX,1/t.scaleY):new i.Point(1,1),a=function(e){var t=s/Math.hypot(e.x,e.y);return new i.Point(e.x*t*o.x,e.y*t*o.y)};return e.length<=1||e.forEach(function(l,c){var u,h,f=new i.Point(l.x,l.y);0===c?(h=e[c+1],u=n?a(i.util.createVector(h,f)).addEquals(f):e[e.length-1]):c===e.length-1?(u=e[c-1],h=n?a(i.util.createVector(u,f)).addEquals(f):e[0]):(u=e[c-1],h=e[c+1]);var d,p,g=i.util.getBisector(f,u,h),m=g.vector,v=g.angle;if("miter"===t.strokeLineJoin&&(d=-s/Math.sin(v/2),p=new i.Point(m.x*d*o.x,m.y*d*o.y),Math.hypot(p.x,p.y)/s<=t.strokeMiterLimit))return r.push(f.add(p)),void r.push(f.subtract(p));d=-s*Math.SQRT2,p=new i.Point(m.x*d*o.x,m.y*d*o.y),r.push(f.add(p)),r.push(f.subtract(p))}),r},transformPoint:function(e,t,n){return n?new i.Point(t[0]*e.x+t[2]*e.y,t[1]*e.x+t[3]*e.y):new i.Point(t[0]*e.x+t[2]*e.y+t[4],t[1]*e.x+t[3]*e.y+t[5])},makeBoundingBoxFromPoints:function(e,t){if(t)for(var n=0;n<e.length;n++)e[n]=i.util.transformPoint(e[n],t);var r=[e[0].x,e[1].x,e[2].x,e[3].x],s=i.util.array.min(r),o=i.util.array.max(r)-s,a=[e[0].y,e[1].y,e[2].y,e[3].y],l=i.util.array.min(a);return{left:s,top:l,width:o,height:i.util.array.max(a)-l}},invertTransform:function(e){var t=1/(e[0]*e[3]-e[1]*e[2]),n=[t*e[3],-t*e[1],-t*e[2],t*e[0]],r=i.util.transformPoint({x:e[4],y:e[5]},n,!0);return n[4]=-r.x,n[5]=-r.y,n},toFixed:function(e,t){return parseFloat(Number(e).toFixed(t))},parseUnit:function(e,t){var n=/\D{0,2}$/.exec(e),r=parseFloat(e);switch(t||(t=i.Text.DEFAULT_SVG_FONT_SIZE),n[0]){case"mm":return r*i.DPI/25.4;case"cm":return r*i.DPI/2.54;case"in":return r*i.DPI;case"pt":return r*i.DPI/72;case"pc":return r*i.DPI/72*12;case"em":return r*t;default:return r}},falseFunction:function(){return!1},getKlass:function(e,t){return e=i.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1)),i.util.resolveNamespace(t)[e]},getSvgAttributes:function(e){var t=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":t=t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":t=t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":t=t.concat(["offset","stop-color","stop-opacity"])}return t},resolveNamespace:function(t){if(!t)return i;var n,r=t.split("."),s=r.length,o=e||i.window;for(n=0;n<s;++n)o=o[r[n]];return o},loadImage:function(e,t,n,r){if(e){var s=i.util.createImage(),o=function(){t&&t.call(n,s,!1),s=s.onload=s.onerror=null};s.onload=o,s.onerror=function(){i.log("Error loading "+s.src),t&&t.call(n,null,!0),s=s.onload=s.onerror=null},0!==e.indexOf("data")&&void 0!==r&&null!==r&&(s.crossOrigin=r),"data:image/svg"===e.substring(0,14)&&(s.onload=null,i.util.loadImageInDom(s,o)),s.src=e}else t&&t.call(n,e)},loadImageInDom:function(e,t){var n=i.document.createElement("div");n.style.width=n.style.height="1px",n.style.left=n.style.top="-100%",n.style.position="absolute",n.appendChild(e),i.document.querySelector("body").appendChild(n),e.onload=function(){t(),n.parentNode.removeChild(n),n=null}},enlivenObjects:function(e,t,n,r){var s=[],o=0,a=(e=e||[]).length;function l(){++o===a&&t&&t(s.filter(function(e){return e}))}a?e.forEach(function(e,t){e&&e.type?i.util.getKlass(e.type,n).fromObject(e,function(n,i){i||(s[t]=n),r&&r(e,n,i),l()}):l()}):t&&t(s)},enlivenObjectEnlivables:function(e,t,n){var r=i.Object.ENLIVEN_PROPS.filter(function(t){return!!e[t]});i.util.enlivenObjects(r.map(function(t){return e[t]}),function(e){var i={};r.forEach(function(n,r){i[n]=e[r],t&&(t[n]=e[r])}),n&&n(i)})},enlivenPatterns:function(e,t){function n(){++s===o&&t&&t(r)}var r=[],s=0,o=(e=e||[]).length;o?e.forEach(function(e,t){e&&e.source?new i.Pattern(e,function(e){r[t]=e,n()}):(r[t]=e,n())}):t&&t(r)},groupSVGElements:function(e,t,n){var r;return e&&1===e.length?("undefined"!==typeof n&&(e[0].sourcePath=n),e[0]):(t&&(t.width&&t.height?t.centerPoint={x:t.width/2,y:t.height/2}:(delete t.width,delete t.height)),r=new i.Group(e,t),"undefined"!==typeof n&&(r.sourcePath=n),r)},populateWithProperties:function(e,t,n){if(n&&Array.isArray(n))for(var r=0,i=n.length;r<i;r++)n[r]in e&&(t[n[r]]=e[n[r]])},createCanvasElement:function(){return i.document.createElement("canvas")},copyCanvasElement:function(e){var t=i.util.createCanvasElement();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t},toDataURL:function(e,t,n){return e.toDataURL("image/"+t,n)},createImage:function(){return i.document.createElement("img")},multiplyTransformMatrices:function(e,t,n){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],n?0:e[0]*t[4]+e[2]*t[5]+e[4],n?0:e[1]*t[4]+e[3]*t[5]+e[5]]},qrDecompose:function(e){var i=n(e[1],e[0]),o=r(e[0],2)+r(e[1],2),a=t(o),l=(e[0]*e[3]-e[2]*e[1])/a,c=n(e[0]*e[2]+e[1]*e[3],o);return{angle:i/s,scaleX:a,scaleY:l,skewX:c/s,skewY:0,translateX:e[4],translateY:e[5]}},calcRotateMatrix:function(e){if(!e.angle)return i.iMatrix.concat();var t=i.util.degreesToRadians(e.angle),n=i.util.cos(t),r=i.util.sin(t);return[n,r,-r,n,0,0]},calcDimensionsMatrix:function(e){var t="undefined"===typeof e.scaleX?1:e.scaleX,n="undefined"===typeof e.scaleY?1:e.scaleY,r=[e.flipX?-t:t,0,0,e.flipY?-n:n,0,0],s=i.util.multiplyTransformMatrices,o=i.util.degreesToRadians;return e.skewX&&(r=s(r,[1,0,Math.tan(o(e.skewX)),1],!0)),e.skewY&&(r=s(r,[1,Math.tan(o(e.skewY)),0,1],!0)),r},composeMatrix:function(e){var t=[1,0,0,1,e.translateX||0,e.translateY||0],n=i.util.multiplyTransformMatrices;return e.angle&&(t=n(t,i.util.calcRotateMatrix(e))),(1!==e.scaleX||1!==e.scaleY||e.skewX||e.skewY||e.flipX||e.flipY)&&(t=n(t,i.util.calcDimensionsMatrix(e))),t},resetObjectTransform:function(e){e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},saveObjectTransform:function(e){return{scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}},isTransparent:function(e,t,n,r){r>0&&(t>r?t-=r:t=0,n>r?n-=r:n=0);var i,s=!0,o=e.getImageData(t,n,2*r||1,2*r||1),a=o.data.length;for(i=3;i<a&&!1!==(s=o.data[i]<=0);i+=4);return o=null,s},parsePreserveAspectRatioAttribute:function(e){var t,n="meet",r=e.split(" ");return r&&r.length&&("meet"!==(n=r.pop())&&"slice"!==n?(t=n,n="meet"):r.length&&(t=r.pop())),{meetOrSlice:n,alignX:"none"!==t?t.slice(1,4):"none",alignY:"none"!==t?t.slice(5,8):"none"}},clearFabricFontCache:function(e){(e=(e||"").toLowerCase())?i.charWidthsCache[e]&&delete i.charWidthsCache[e]:i.charWidthsCache={}},limitDimsByArea:function(e,t){var n=Math.sqrt(t*e),r=Math.floor(t/n);return{x:Math.floor(n),y:r}},capValue:function(e,t,n){return Math.max(e,Math.min(t,n))},findScaleToFit:function(e,t){return Math.min(t.width/e.width,t.height/e.height)},findScaleToCover:function(e,t){return Math.max(t.width/e.width,t.height/e.height)},matrixToSVG:function(e){return"matrix("+e.map(function(e){return i.util.toFixed(e,i.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(e,t){var n=i.util.invertTransform(t),r=i.util.multiplyTransformMatrices(n,e.calcOwnMatrix());i.util.applyTransformToObject(e,r)},addTransformToObject:function(e,t){i.util.applyTransformToObject(e,i.util.multiplyTransformMatrices(t,e.calcOwnMatrix()))},applyTransformToObject:function(e,t){var n=i.util.qrDecompose(t),r=new i.Point(n.translateX,n.translateY);e.flipX=!1,e.flipY=!1,e.set("scaleX",n.scaleX),e.set("scaleY",n.scaleY),e.skewX=n.skewX,e.skewY=n.skewY,e.angle=n.angle,e.setPositionByOrigin(r,"center","center")},sizeAfterTransform:function(e,t,n){var r=e/2,s=t/2,o=[{x:-r,y:-s},{x:r,y:-s},{x:-r,y:s},{x:r,y:s}],a=i.util.calcDimensionsMatrix(n),l=i.util.makeBoundingBoxFromPoints(o,a);return{x:l.width,y:l.height}},mergeClipPaths:function(e,t){var n=e,r=t;n.inverted&&!r.inverted&&(n=t,r=e),i.util.applyTransformToObject(r,i.util.multiplyTransformMatrices(i.util.invertTransform(n.calcTransformMatrix()),r.calcTransformMatrix()));var s=n.inverted&&r.inverted;return s&&(n.inverted=r.inverted=!1),new i.Group([n],{clipPath:r,inverted:s})},hasStyleChanged:function(e,t,n){return n=n||!1,e.fill!==t.fill||e.stroke!==t.stroke||e.strokeWidth!==t.strokeWidth||e.fontSize!==t.fontSize||e.fontFamily!==t.fontFamily||e.fontWeight!==t.fontWeight||e.fontStyle!==t.fontStyle||e.textBackgroundColor!==t.textBackgroundColor||e.deltaY!==t.deltaY||n&&(e.overline!==t.overline||e.underline!==t.underline||e.linethrough!==t.linethrough)},stylesToArray:function(e,t){e=i.util.object.clone(e,!0);for(var n=t.split("\n"),r=-1,s={},o=[],a=0;a<n.length;a++)if(e[a])for(var l=0;l<n[a].length;l++){r++;var c=e[a][l];if(c&&Object.keys(c).length>0)i.util.hasStyleChanged(s,c,!0)?o.push({start:r,end:r+1,style:c}):o[o.length-1].end++;s=c||{}}else r+=n[a].length;return o},stylesFromArray:function(e,t){if(!Array.isArray(e))return e;for(var n=t.split("\n"),r=-1,i=0,s={},o=0;o<n.length;o++)for(var a=0;a<n[o].length;a++)r++,e[i]&&e[i].start<=r&&r<e[i].end&&(s[o]=s[o]||{},s[o][a]=Object.assign({},e[i].style),r===e[i].end-1&&i++);return s}}}(t),function(){var e=Array.prototype.join,t={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},n={m:"l",M:"L"};function r(e,t,n,r,s,o,a,l,c,u,h){var f=i.util.cos(e),d=i.util.sin(e),p=i.util.cos(t),g=i.util.sin(t),m=n*s*p-r*o*g+a,v=r*s*p+n*o*g+l;return["C",u+c*(-n*s*d-r*o*f),h+c*(-r*s*d+n*o*f),m+c*(n*s*g+r*o*p),v+c*(r*s*g-n*o*p),m,v]}function s(e,t,n,r){var i=Math.atan2(t,e),s=Math.atan2(r,n);return s>=i?s-i:2*Math.PI-(i-s)}function o(e,t,n){for(var o=n[1],a=n[2],l=n[3],c=n[4],u=n[5],h=function(e,t,n,o,a,l,c){var u=Math.PI,h=c*u/180,f=i.util.sin(h),d=i.util.cos(h),p=0,g=0,m=-d*e*.5-f*t*.5,v=-d*t*.5+f*e*.5,y=(n=Math.abs(n))*n,b=(o=Math.abs(o))*o,w=v*v,x=m*m,C=y*b-y*w-b*x,_=0;if(C<0){var A=Math.sqrt(1-C/(y*b));n*=A,o*=A}else _=(a===l?-1:1)*Math.sqrt(C/(y*w+b*x));var S=_*n*v/o,T=-_*o*m/n,E=d*S-f*T+.5*e,k=f*S+d*T+.5*t,P=s(1,0,(m-S)/n,(v-T)/o),O=s((m-S)/n,(v-T)/o,(-m-S)/n,(-v-T)/o);0===l&&O>0?O-=2*u:1===l&&O<0&&(O+=2*u);for(var I=Math.ceil(Math.abs(O/u*2)),D=[],R=O/I,N=8/3*Math.sin(R/4)*Math.sin(R/4)/Math.sin(R/2),j=P+R,L=0;L<I;L++)D[L]=r(P,j,d,f,n,o,E,k,N,p,g),p=D[L][5],g=D[L][6],P=j,j+=R;return D}(n[6]-e,n[7]-t,o,a,c,u,l),f=0,d=h.length;f<d;f++)h[f][1]+=e,h[f][2]+=t,h[f][3]+=e,h[f][4]+=t,h[f][5]+=e,h[f][6]+=t;return h}function a(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}function l(e,t,n,r,i,s,o,a){return function(l){var c,u=(c=l)*c*c,h=function(e){return 3*e*e*(1-e)}(l),f=function(e){return 3*e*(1-e)*(1-e)}(l),d=function(e){return(1-e)*(1-e)*(1-e)}(l);return{x:o*u+i*h+n*f+e*d,y:a*u+s*h+r*f+t*d}}}function c(e,t,n,r,i,s,o,a){return function(l){var c=1-l,u=3*c*c*(n-e)+6*c*l*(i-n)+3*l*l*(o-i),h=3*c*c*(r-t)+6*c*l*(s-r)+3*l*l*(a-s);return Math.atan2(h,u)}}function u(e,t,n,r,i,s){return function(o){var a,l=(a=o)*a,c=function(e){return 2*e*(1-e)}(o),u=function(e){return(1-e)*(1-e)}(o);return{x:i*l+n*c+e*u,y:s*l+r*c+t*u}}}function h(e,t,n,r,i,s){return function(o){var a=1-o,l=2*a*(n-e)+2*o*(i-n),c=2*a*(r-t)+2*o*(s-r);return Math.atan2(c,l)}}function f(e,t,n){var r,i,s={x:t,y:n},o=0;for(i=1;i<=100;i+=1)r=e(i/100),o+=a(s.x,s.y,r.x,r.y),s=r;return o}function d(e,t){for(var n,r,i,s=0,o=0,l=e.iterator,c={x:e.x,y:e.y},u=.01,h=e.angleFinder;o<t&&u>1e-4;)n=l(s),i=s,(r=a(c.x,c.y,n.x,n.y))+o>t?(s-=u,u/=2):(c=n,s+=u,o+=r);return n.angle=h(i),n}function p(e){for(var t,n,r,i,s=0,o=e.length,d=0,p=0,g=0,m=0,v=[],y=0;y<o;y++){switch(r={x:d,y:p,command:(t=e[y])[0]},t[0]){case"M":r.length=0,g=d=t[1],m=p=t[2];break;case"L":r.length=a(d,p,t[1],t[2]),d=t[1],p=t[2];break;case"C":n=l(d,p,t[1],t[2],t[3],t[4],t[5],t[6]),i=c(d,p,t[1],t[2],t[3],t[4],t[5],t[6]),r.iterator=n,r.angleFinder=i,r.length=f(n,d,p),d=t[5],p=t[6];break;case"Q":n=u(d,p,t[1],t[2],t[3],t[4]),i=h(d,p,t[1],t[2],t[3],t[4]),r.iterator=n,r.angleFinder=i,r.length=f(n,d,p),d=t[3],p=t[4];break;case"Z":case"z":r.destX=g,r.destY=m,r.length=a(d,p,g,m),d=g,p=m}s+=r.length,v.push(r)}return v.push({length:s,x:d,y:p}),v}i.util.joinPath=function(e){return e.map(function(e){return e.join(" ")}).join(" ")},i.util.parsePath=function(e){var r,s,o,a,l,c=[],u=[],h=i.rePathCommand,f="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",d="("+f+")"+i.commaWsp,p="([01])"+i.commaWsp+"?",g=new RegExp(d+"?"+d+"?"+d+p+p+d+"?("+f+")","g");if(!e||!e.match)return c;for(var m,v=0,y=(l=e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;v<y;v++){a=(r=l[v]).slice(1).trim(),u.length=0;var b=r.charAt(0);if(m=[b],"a"===b.toLowerCase())for(var w;w=g.exec(a);)for(var x=1;x<w.length;x++)u.push(w[x]);else for(;o=h.exec(a);)u.push(o[0]);x=0;for(var C=u.length;x<C;x++)s=parseFloat(u[x]),isNaN(s)||m.push(s);var _=t[b.toLowerCase()],A=n[b]||b;if(m.length-1>_)for(var S=1,T=m.length;S<T;S+=_)c.push([b].concat(m.slice(S,S+_))),b=A;else c.push(m)}return c},i.util.makePathSimpler=function(e){var t,n,r,i,s,a,l=0,c=0,u=e.length,h=0,f=0,d=[];for(n=0;n<u;++n){switch(r=!1,(t=e[n].slice(0))[0]){case"l":t[0]="L",t[1]+=l,t[2]+=c;case"L":l=t[1],c=t[2];break;case"h":t[1]+=l;case"H":t[0]="L",t[2]=c,l=t[1];break;case"v":t[1]+=c;case"V":t[0]="L",c=t[1],t[1]=l,t[2]=c;break;case"m":t[0]="M",t[1]+=l,t[2]+=c;case"M":l=t[1],c=t[2],h=t[1],f=t[2];break;case"c":t[0]="C",t[1]+=l,t[2]+=c,t[3]+=l,t[4]+=c,t[5]+=l,t[6]+=c;case"C":s=t[3],a=t[4],l=t[5],c=t[6];break;case"s":t[0]="S",t[1]+=l,t[2]+=c,t[3]+=l,t[4]+=c;case"S":"C"===i?(s=2*l-s,a=2*c-a):(s=l,a=c),l=t[3],c=t[4],t[0]="C",t[5]=t[3],t[6]=t[4],t[3]=t[1],t[4]=t[2],t[1]=s,t[2]=a,s=t[3],a=t[4];break;case"q":t[0]="Q",t[1]+=l,t[2]+=c,t[3]+=l,t[4]+=c;case"Q":s=t[1],a=t[2],l=t[3],c=t[4];break;case"t":t[0]="T",t[1]+=l,t[2]+=c;case"T":"Q"===i?(s=2*l-s,a=2*c-a):(s=l,a=c),t[0]="Q",l=t[1],c=t[2],t[1]=s,t[2]=a,t[3]=l,t[4]=c;break;case"a":t[0]="A",t[6]+=l,t[7]+=c;case"A":r=!0,d=d.concat(o(l,c,t)),l=t[6],c=t[7];break;case"z":case"Z":l=h,c=f}r||d.push(t),i=t[0]}return d},i.util.getSmoothPathFromPoints=function(e,t){var n,r=[],s=new i.Point(e[0].x,e[0].y),o=new i.Point(e[1].x,e[1].y),a=e.length,l=1,c=0,u=a>2;for(t=t||0,u&&(l=e[2].x<o.x?-1:e[2].x===o.x?0:1,c=e[2].y<o.y?-1:e[2].y===o.y?0:1),r.push(["M",s.x-l*t,s.y-c*t]),n=1;n<a;n++){if(!s.eq(o)){var h=s.midPointFrom(o);r.push(["Q",s.x,s.y,h.x,h.y])}s=e[n],n+1<e.length&&(o=e[n+1])}return u&&(l=s.x>e[n-2].x?1:s.x===e[n-2].x?0:-1,c=s.y>e[n-2].y?1:s.y===e[n-2].y?0:-1),r.push(["L",s.x+l*t,s.y+c*t]),r},i.util.getPathSegmentsInfo=p,i.util.getBoundsOfCurve=function(t,n,r,s,o,a,l,c){var u;if(i.cachesBoundsOfCurve&&(u=e.call(arguments),i.boundsOfCurveCache[u]))return i.boundsOfCurveCache[u];var h,f,d,p,g,m,v,y,b=Math.sqrt,w=Math.min,x=Math.max,C=Math.abs,_=[],A=[[],[]];f=6*t-12*r+6*o,h=-3*t+9*r-9*o+3*l,d=3*r-3*t;for(var S=0;S<2;++S)if(S>0&&(f=6*n-12*s+6*a,h=-3*n+9*s-9*a+3*c,d=3*s-3*n),C(h)<1e-12){if(C(f)<1e-12)continue;0<(p=-d/f)&&p<1&&_.push(p)}else(v=f*f-4*d*h)<0||(0<(g=(-f+(y=b(v)))/(2*h))&&g<1&&_.push(g),0<(m=(-f-y)/(2*h))&&m<1&&_.push(m));for(var T,E,k,P=_.length,O=P;P--;)T=(k=1-(p=_[P]))*k*k*t+3*k*k*p*r+3*k*p*p*o+p*p*p*l,A[0][P]=T,E=k*k*k*n+3*k*k*p*s+3*k*p*p*a+p*p*p*c,A[1][P]=E;A[0][O]=t,A[1][O]=n,A[0][O+1]=l,A[1][O+1]=c;var I=[{x:w.apply(null,A[0]),y:w.apply(null,A[1])},{x:x.apply(null,A[0]),y:x.apply(null,A[1])}];return i.cachesBoundsOfCurve&&(i.boundsOfCurveCache[u]=I),I},i.util.getPointOnPath=function(e,t,n){n||(n=p(e));for(var r=0;t-n[r].length>0&&r<n.length-2;)t-=n[r].length,r++;var s,o=n[r],a=t/o.length,l=o.command,c=e[r];switch(l){case"M":return{x:o.x,y:o.y,angle:0};case"Z":case"z":return(s=new i.Point(o.x,o.y).lerp(new i.Point(o.destX,o.destY),a)).angle=Math.atan2(o.destY-o.y,o.destX-o.x),s;case"L":return(s=new i.Point(o.x,o.y).lerp(new i.Point(c[1],c[2]),a)).angle=Math.atan2(c[2]-o.y,c[1]-o.x),s;case"C":case"Q":return d(o,t)}},i.util.transformPath=function(e,t,n){return n&&(t=i.util.multiplyTransformMatrices(t,[1,0,0,1,-n.x,-n.y])),e.map(function(e){for(var n=e.slice(0),r={},s=1;s<e.length-1;s+=2)r.x=e[s],r.y=e[s+1],r=i.util.transformPoint(r,t),n[s]=r.x,n[s+1]=r.y;return n})}}(),function(){var e=Array.prototype.slice;function t(e,t,n){if(e&&0!==e.length){var r=e.length-1,i=t?e[r][t]:e[r];if(t)for(;r--;)n(e[r][t],i)&&(i=e[r][t]);else for(;r--;)n(e[r],i)&&(i=e[r]);return i}}i.util.array={fill:function(e,t){for(var n=e.length;n--;)e[n]=t;return e},invoke:function(t,n){for(var r=e.call(arguments,2),i=[],s=0,o=t.length;s<o;s++)i[s]=r.length?t[s][n].apply(t[s],r):t[s][n].call(t[s]);return i},min:function(e,n){return t(e,n,function(e,t){return e<t})},max:function(e,n){return t(e,n,function(e,t){return e>=t})}}}(),function(){function e(t,n,r){if(r)if(!i.isLikelyNode&&n instanceof Element)t=n;else if(n instanceof Array){t=[];for(var s=0,o=n.length;s<o;s++)t[s]=e({},n[s],r)}else if(n&&"object"===typeof n)for(var a in n)"canvas"===a||"group"===a?t[a]=null:n.hasOwnProperty(a)&&(t[a]=e({},n[a],r));else t=n;else for(var a in n)t[a]=n[a];return t}i.util.object={extend:e,clone:function(t,n){return e({},t,n)}},i.util.object.extend(i.util,i.Observable)}(),function(){function e(e,t){var n=e.charCodeAt(t);if(isNaN(n))return"";if(n<55296||n>57343)return e.charAt(t);if(55296<=n&&n<=56319){if(e.length<=t+1)throw"High surrogate without following low surrogate";var r=e.charCodeAt(t+1);if(56320>r||r>57343)throw"High surrogate without following low surrogate";return e.charAt(t)+e.charAt(t+1)}if(0===t)throw"Low surrogate without preceding high surrogate";var i=e.charCodeAt(t-1);if(55296>i||i>56319)throw"Low surrogate without preceding high surrogate";return!1}i.util.string={camelize:function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},escapeXml:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(t){var n,r=0,i=[];for(r=0;r<t.length;r++)!1!==(n=e(t,r))&&i.push(n);return i}}}(),function(){var e=Array.prototype.slice,t=function(){},n=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}(),r=function(e,t,r){for(var i in t)i in e.prototype&&"function"===typeof e.prototype[i]&&(t[i]+"").indexOf("callSuper")>-1?e.prototype[i]=function(e){return function(){var n=this.constructor.superclass;this.constructor.superclass=r;var i=t[e].apply(this,arguments);if(this.constructor.superclass=n,"initialize"!==e)return i}}(i):e.prototype[i]=t[i],n&&(t.toString!==Object.prototype.toString&&(e.prototype.toString=t.toString),t.valueOf!==Object.prototype.valueOf&&(e.prototype.valueOf=t.valueOf))};function s(){}function o(t){for(var n=null,r=this;r.constructor.superclass;){var i=r.constructor.superclass.prototype[t];if(r[t]!==i){n=i;break}r=r.constructor.superclass.prototype}return n?arguments.length>1?n.apply(this,e.call(arguments,1)):n.call(this):console.log("tried to callSuper "+t+", method not found in prototype chain",this)}i.util.createClass=function(){var n=null,i=e.call(arguments,0);function a(){this.initialize.apply(this,arguments)}"function"===typeof i[0]&&(n=i.shift()),a.superclass=n,a.subclasses=[],n&&(s.prototype=n.prototype,a.prototype=new s,n.subclasses.push(a));for(var l=0,c=i.length;l<c;l++)r(a,i[l],n);return a.prototype.initialize||(a.prototype.initialize=t),a.prototype.constructor=a,a.prototype.callSuper=o,a}}(),function(){var e=!!i.document.createElement("div").attachEvent,t=["touchstart","touchmove","touchend"];i.util.addListener=function(t,n,r,i){t&&t.addEventListener(n,r,!e&&i)},i.util.removeListener=function(t,n,r,i){t&&t.removeEventListener(n,r,!e&&i)},i.util.getPointer=function(e){var t=e.target,n=i.util.getScrollLeftTop(t),r=function(e){var t=e.changedTouches;return t&&t[0]?t[0]:e}(e);return{x:r.clientX+n.left,y:r.clientY+n.top}},i.util.isTouchEvent=function(e){return t.indexOf(e.type)>-1||"touch"===e.pointerType}}(),function(){var e=i.document.createElement("div"),t="string"===typeof e.style.opacity,n="string"===typeof e.style.filter,r=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,s=function(e){return e};t?s=function(e,t){return e.style.opacity=t,e}:n&&(s=function(e,t){var n=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(n.zoom=1),r.test(n.filter)?(t=t>=.9999?"":"alpha(opacity="+100*t+")",n.filter=n.filter.replace(r,t)):n.filter+=" alpha(opacity="+100*t+")",e}),i.util.setStyle=function(e,t){var n=e.style;if(!n)return e;if("string"===typeof t)return e.style.cssText+=";"+t,t.indexOf("opacity")>-1?s(e,t.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var r in t)if("opacity"===r)s(e,t[r]);else{var i="float"===r||"cssFloat"===r?"undefined"===typeof n.styleFloat?"cssFloat":"styleFloat":r;n.setProperty(i,t[r])}return e}}(),function(){var e=Array.prototype.slice;var t,n,r=function(t){return e.call(t,0)};try{t=r(i.document.childNodes)instanceof Array}catch(a){}function s(e,t){var n=i.document.createElement(e);for(var r in t)"class"===r?n.className=t[r]:"for"===r?n.htmlFor=t[r]:n.setAttribute(r,t[r]);return n}function o(e){for(var t=0,n=0,r=i.document.documentElement,s=i.document.body||{scrollLeft:0,scrollTop:0};e&&(e.parentNode||e.host)&&((e=e.parentNode||e.host)===i.document?(t=s.scrollLeft||r.scrollLeft||0,n=s.scrollTop||r.scrollTop||0):(t+=e.scrollLeft||0,n+=e.scrollTop||0),1!==e.nodeType||"fixed"!==e.style.position););return{left:t,top:n}}t||(r=function(e){for(var t=new Array(e.length),n=e.length;n--;)t[n]=e[n];return t}),n=i.document.defaultView&&i.document.defaultView.getComputedStyle?function(e,t){var n=i.document.defaultView.getComputedStyle(e,null);return n?n[t]:void 0}:function(e,t){var n=e.style[t];return!n&&e.currentStyle&&(n=e.currentStyle[t]),n},function(){var e=i.document.documentElement.style,t="userSelect"in e?"userSelect":"MozUserSelect"in e?"MozUserSelect":"WebkitUserSelect"in e?"WebkitUserSelect":"KhtmlUserSelect"in e?"KhtmlUserSelect":"";i.util.makeElementUnselectable=function(e){return"undefined"!==typeof e.onselectstart&&(e.onselectstart=i.util.falseFunction),t?e.style[t]="none":"string"===typeof e.unselectable&&(e.unselectable="on"),e},i.util.makeElementSelectable=function(e){return"undefined"!==typeof e.onselectstart&&(e.onselectstart=null),t?e.style[t]="":"string"===typeof e.unselectable&&(e.unselectable=""),e}}(),i.util.setImageSmoothing=function(e,t){e.imageSmoothingEnabled=e.imageSmoothingEnabled||e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled||e.oImageSmoothingEnabled,e.imageSmoothingEnabled=t},i.util.getById=function(e){return"string"===typeof e?i.document.getElementById(e):e},i.util.toArray=r,i.util.addClass=function(e,t){e&&-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=(e.className?" ":"")+t)},i.util.makeElement=s,i.util.wrapElement=function(e,t,n){return"string"===typeof t&&(t=s(t,n)),e.parentNode&&e.parentNode.replaceChild(t,e),t.appendChild(e),t},i.util.getScrollLeftTop=o,i.util.getElementOffset=function(e){var t,r,i=e&&e.ownerDocument,s={left:0,top:0},a={left:0,top:0},l={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!i)return a;for(var c in l)a[l[c]]+=parseInt(n(e,c),10)||0;return t=i.documentElement,"undefined"!==typeof e.getBoundingClientRect&&(s=e.getBoundingClientRect()),r=o(e),{left:s.left+r.left-(t.clientLeft||0)+a.left,top:s.top+r.top-(t.clientTop||0)+a.top}},i.util.getNodeCanvas=function(e){var t=i.jsdomImplForWrapper(e);return t._canvas||t._image},i.util.cleanUpJsdomNode=function(e){if(i.isLikelyNode){var t=i.jsdomImplForWrapper(e);t&&(t._image=null,t._canvas=null,t._currentSrc=null,t._attributes=null,t._classList=null)}}}(),function(){function e(){}i.util.request=function(t,n){n||(n={});var r=n.method?n.method.toUpperCase():"GET",s=n.onComplete||function(){},o=new i.window.XMLHttpRequest,a=n.body||n.parameters;return o.onreadystatechange=function(){4===o.readyState&&(s(o),o.onreadystatechange=e)},"GET"===r&&(a=null,"string"===typeof n.parameters&&(t=function(e,t){return e+(/\?/.test(e)?"&":"?")+t}(t,n.parameters))),o.open(r,t,!0),"POST"!==r&&"PUT"!==r||o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(a),o}}(),i.log=console.log,i.warn=console.warn,function(){var e=i.util.object.extend,t=i.util.object.clone,n=[];function r(){return!1}function s(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t}i.util.object.extend(n,{cancelAll:function(){var e=this.splice(0);return e.forEach(function(e){e.cancel()}),e},cancelByCanvas:function(e){if(!e)return[];var t=this.filter(function(t){return"object"===typeof t.target&&t.target.canvas===e});return t.forEach(function(e){e.cancel()}),t},cancelByTarget:function(e){var t=this.findAnimationsByTarget(e);return t.forEach(function(e){e.cancel()}),t},findAnimationIndex:function(e){return this.indexOf(this.findAnimation(e))},findAnimation:function(e){return this.find(function(t){return t.cancel===e})},findAnimationsByTarget:function(e){return e?this.filter(function(t){return t.target===e}):[]}});var o=i.window.requestAnimationFrame||i.window.webkitRequestAnimationFrame||i.window.mozRequestAnimationFrame||i.window.oRequestAnimationFrame||i.window.msRequestAnimationFrame||function(e){return i.window.setTimeout(e,1e3/60)},a=i.window.cancelAnimationFrame||i.window.clearTimeout;function l(){return o.apply(i.window,arguments)}i.util.animate=function(n){n||(n={});var o,a=!1,c=function(){var e=i.runningAnimations.indexOf(o);return e>-1&&i.runningAnimations.splice(e,1)[0]};return o=e(t(n),{cancel:function(){return a=!0,c()},currentValue:"startValue"in n?n.startValue:0,completionRate:0,durationRate:0}),i.runningAnimations.push(o),l(function(e){var t,i=e||+new Date,u=n.duration||500,h=i+u,f=n.onChange||r,d=n.abort||r,p=n.onComplete||r,g=n.easing||s,m="startValue"in n&&n.startValue.length>0,v="startValue"in n?n.startValue:0,y="endValue"in n?n.endValue:100,b=n.byValue||(m?v.map(function(e,t){return y[t]-v[t]}):y-v);n.onStart&&n.onStart(),function e(n){var r=(t=n||+new Date)>h?u:t-i,s=r/u,w=m?v.map(function(e,t){return g(r,v[t],b[t],u)}):g(r,v,b,u),x=m?Math.abs((w[0]-v[0])/b[0]):Math.abs((w-v)/b);if(o.currentValue=m?w.slice():w,o.completionRate=x,o.durationRate=s,!a){if(!d(w,x,s))return t>h?(o.currentValue=m?y.slice():y,o.completionRate=1,o.durationRate=1,f(m?y.slice():y,1,1),p(y,1,1),void c()):(f(w,x,s),void l(e));c()}}(i)}),o.cancel},i.util.requestAnimFrame=l,i.util.cancelAnimFrame=function(){return a.apply(i.window,arguments)},i.runningAnimations=n}(),function(){function e(e,t,n){var r="rgba("+parseInt(e[0]+n*(t[0]-e[0]),10)+","+parseInt(e[1]+n*(t[1]-e[1]),10)+","+parseInt(e[2]+n*(t[2]-e[2]),10);return r+=","+(e&&t?parseFloat(e[3]+n*(t[3]-e[3])):1),r+=")"}i.util.animateColor=function(t,n,r,s){var o=new i.Color(t).getSource(),a=new i.Color(n).getSource(),l=s.onComplete,c=s.onChange;return s=s||{},i.util.animate(i.util.object.extend(s,{duration:r||500,startValue:o,endValue:a,byValue:a,easing:function(t,n,r,i){return e(n,r,s.colorEasing?s.colorEasing(t,i):1-Math.cos(t/i*(Math.PI/2)))},onComplete:function(t,n,r){if(l)return l(e(a,a,0),n,r)},onChange:function(t,n,r){if(c){if(Array.isArray(t))return c(e(t,t,0),n,r);c(t,n,r)}}}))}}(),function(){function e(e,t,n,r){return e<Math.abs(t)?(e=t,r=n/4):r=0===t&&0===e?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(t/e),{a:e,c:t,p:n,s:r}}function t(e,t,n){return e.a*Math.pow(2,10*(t-=1))*Math.sin((t*n-e.s)*(2*Math.PI)/e.p)}function n(e,t,n,i){return n-r(i-e,0,n,i)+t}function r(e,t,n,r){return(e/=r)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t}i.util.ease={easeInQuad:function(e,t,n,r){return n*(e/=r)*e+t},easeOutQuad:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},easeInOutQuad:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,r){return n*(e/=r)*e*e+t},easeOutCubic:function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,r){return n*(e/=r)*e*e*e+t},easeOutQuart:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},easeOutQuint:function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t},easeOutSine:function(e,t,n,r){return n*Math.sin(e/r*(Math.PI/2))+t},easeInOutSine:function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t},easeInExpo:function(e,t,n,r){return 0===e?t:n*Math.pow(2,10*(e/r-1))+t},easeOutExpo:function(e,t,n,r){return e===r?t+n:n*(1-Math.pow(2,-10*e/r))+t},easeInOutExpo:function(e,t,n,r){return 0===e?t:e===r?t+n:(e/=r/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,n,r){return-n*(Math.sqrt(1-(e/=r)*e)-1)+t},easeOutCirc:function(e,t,n,r){return n*Math.sqrt(1-(e=e/r-1)*e)+t},easeInOutCirc:function(e,t,n,r){return(e/=r/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(n,r,i,s){var o=0;return 0===n?r:1===(n/=s)?r+i:(o||(o=.3*s),-t(e(i,i,o,1.70158),n,s)+r)},easeOutElastic:function(t,n,r,i){var s=0;if(0===t)return n;if(1===(t/=i))return n+r;s||(s=.3*i);var o=e(r,r,s,1.70158);return o.a*Math.pow(2,-10*t)*Math.sin((t*i-o.s)*(2*Math.PI)/o.p)+o.c+n},easeInOutElastic:function(n,r,i,s){var o=0;if(0===n)return r;if(2===(n/=s/2))return r+i;o||(o=s*(.3*1.5));var a=e(i,i,o,1.70158);return n<1?-.5*t(a,n,s)+r:a.a*Math.pow(2,-10*(n-=1))*Math.sin((n*s-a.s)*(2*Math.PI)/a.p)*.5+a.c+r},easeInBack:function(e,t,n,r,i){return void 0===i&&(i=1.70158),n*(e/=r)*e*((i+1)*e-i)+t},easeOutBack:function(e,t,n,r,i){return void 0===i&&(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},easeInOutBack:function(e,t,n,r,i){return void 0===i&&(i=1.70158),(e/=r/2)<1?n/2*(e*e*((1+(i*=1.525))*e-i))+t:n/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},easeInBounce:n,easeOutBounce:r,easeInOutBounce:function(e,t,i,s){return e<s/2?.5*n(2*e,0,i,s)+t:.5*r(2*e-s,0,i,s)+.5*i+t}}}(),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.object.clone,i=t.util.toFixed,s=t.util.parseUnit,o=t.util.multiplyTransformMatrices,a={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},l={stroke:"strokeOpacity",fill:"fillOpacity"},c="font-size",u="clip-path";function h(e){return e in a?a[e]:e}function f(e,n,r,i){var a,l=Array.isArray(n);if("fill"!==e&&"stroke"!==e||"none"!==n){if("strokeUniform"===e)return"non-scaling-stroke"===n;if("strokeDashArray"===e)n="none"===n?null:n.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===e)n=r&&r.transformMatrix?o(r.transformMatrix,t.parseTransformAttribute(n)):t.parseTransformAttribute(n);else if("visible"===e)n="none"!==n&&"hidden"!==n,r&&!1===r.visible&&(n=!1);else if("opacity"===e)n=parseFloat(n),r&&"undefined"!==typeof r.opacity&&(n*=r.opacity);else if("textAnchor"===e)n="start"===n?"left":"end"===n?"right":"center";else if("charSpacing"===e)a=s(n,i)/i*1e3;else if("paintFirst"===e){var c=n.indexOf("fill"),u=n.indexOf("stroke");n="fill";(c>-1&&u>-1&&u<c||-1===c&&u>-1)&&(n="stroke")}else{if("href"===e||"xlink:href"===e||"font"===e)return n;if("imageSmoothing"===e)return"optimizeQuality"===n;a=l?n.map(s):s(n,i)}}else n="";return!l&&isNaN(a)?n:a}function d(e){return new RegExp("^("+e.join("|")+")\\b","i")}function p(e,t){var n,r,i,s,o=[];for(i=0,s=t.length;i<s;i++)n=t[i],r=e.getElementsByTagName(n),o=o.concat(Array.prototype.slice.call(r));return o}function g(e,t){var n,r=!0;return(n=m(e,t.pop()))&&t.length&&(r=function(e,t){var n,r=!0;for(;e.parentNode&&1===e.parentNode.nodeType&&t.length;)r&&(n=t.pop()),r=m(e=e.parentNode,n);return 0===t.length}(e,t)),n&&r&&0===t.length}function m(e,t){var n,r,i=e.nodeName,s=e.getAttribute("class"),o=e.getAttribute("id");if(n=new RegExp("^"+i,"i"),t=t.replace(n,""),o&&t.length&&(n=new RegExp("#"+o+"(?![a-zA-Z\\-]+)","i"),t=t.replace(n,"")),s&&t.length)for(r=(s=s.split(" ")).length;r--;)n=new RegExp("\\."+s[r]+"(?![a-zA-Z\\-]+)","i"),t=t.replace(n,"");return 0===t.length}function v(e,t){var n;if(e.getElementById&&(n=e.getElementById(t)),n)return n;var r,i,s,o=e.getElementsByTagName("*");for(i=0,s=o.length;i<s;i++)if(t===(r=o[i]).getAttribute("id"))return r}t.svgValidTagNamesRegEx=d(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),t.svgViewBoxElementsRegEx=d(["symbol","image","marker","pattern","view","svg"]),t.svgInvalidAncestorsRegEx=d(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),t.svgValidParentsRegEx=d(["symbol","g","a","svg","clipPath","defs"]),t.cssRules={},t.gradientDefs={},t.clipPaths={},t.parseTransformAttribute=function(){function e(e,n,r){e[r]=Math.tan(t.util.degreesToRadians(n[0]))}var n=t.iMatrix,r=t.reNum,i=t.commaWsp,s="(?:"+("(?:(matrix)\\s*\\(\\s*("+r+")"+i+"("+r+")"+i+"("+r+")"+i+"("+r+")"+i+"("+r+")"+i+"("+r+")\\s*\\))")+"|"+("(?:(translate)\\s*\\(\\s*("+r+")(?:"+i+"("+r+"))?\\s*\\))")+"|"+("(?:(scale)\\s*\\(\\s*("+r+")(?:"+i+"("+r+"))?\\s*\\))")+"|"+("(?:(rotate)\\s*\\(\\s*("+r+")(?:"+i+"("+r+")"+i+"("+r+"))?\\s*\\))")+"|"+("(?:(skewX)\\s*\\(\\s*("+r+")\\s*\\))")+"|"+("(?:(skewY)\\s*\\(\\s*("+r+")\\s*\\))")+")",o=new RegExp("^\\s*(?:"+("(?:"+s+"(?:"+i+"*"+s+")*)")+"?)\\s*$"),a=new RegExp(s,"g");return function(r){var i=n.concat(),l=[];if(!r||r&&!o.test(r))return i;r.replace(a,function(r){var o=new RegExp(s).exec(r).filter(function(e){return!!e}),a=o[1],c=o.slice(2).map(parseFloat);switch(a){case"translate":!function(e,t){e[4]=t[0],2===t.length&&(e[5]=t[1])}(i,c);break;case"rotate":c[0]=t.util.degreesToRadians(c[0]),function(e,n){var r=t.util.cos(n[0]),i=t.util.sin(n[0]),s=0,o=0;3===n.length&&(s=n[1],o=n[2]),e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=s-(r*s-i*o),e[5]=o-(i*s+r*o)}(i,c);break;case"scale":!function(e,t){var n=t[0],r=2===t.length?t[1]:t[0];e[0]=n,e[3]=r}(i,c);break;case"skewX":e(i,c,2);break;case"skewY":e(i,c,1);break;case"matrix":i=c}l.push(i.concat()),i=n.concat()});for(var c=l[0];l.length>1;)l.shift(),c=t.util.multiplyTransformMatrices(c,l[0]);return c}}();var y=new RegExp("^\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*$");function b(e){if(!t.svgViewBoxElementsRegEx.test(e.nodeName))return{};var n,r,i,o,a,l,c=e.getAttribute("viewBox"),u=1,h=1,f=e.getAttribute("width"),d=e.getAttribute("height"),p=e.getAttribute("x")||0,g=e.getAttribute("y")||0,m=e.getAttribute("preserveAspectRatio")||"",v=!c||!(c=c.match(y)),b=!f||!d||"100%"===f||"100%"===d,w=v&&b,x={},C="",_=0,A=0;if(x.width=0,x.height=0,x.toBeParsed=w,v&&(p||g)&&e.parentNode&&"#document"!==e.parentNode.nodeName&&(C=" translate("+s(p)+" "+s(g)+") ",a=(e.getAttribute("transform")||"")+C,e.setAttribute("transform",a),e.removeAttribute("x"),e.removeAttribute("y")),w)return x;if(v)return x.width=s(f),x.height=s(d),x;if(n=-parseFloat(c[1]),r=-parseFloat(c[2]),i=parseFloat(c[3]),o=parseFloat(c[4]),x.minX=n,x.minY=r,x.viewBoxWidth=i,x.viewBoxHeight=o,b?(x.width=i,x.height=o):(x.width=s(f),x.height=s(d),u=x.width/i,h=x.height/o),"none"!==(m=t.util.parsePreserveAspectRatioAttribute(m)).alignX&&("meet"===m.meetOrSlice&&(h=u=u>h?h:u),"slice"===m.meetOrSlice&&(h=u=u>h?u:h),_=x.width-i*u,A=x.height-o*u,"Mid"===m.alignX&&(_/=2),"Mid"===m.alignY&&(A/=2),"Min"===m.alignX&&(_=0),"Min"===m.alignY&&(A=0)),1===u&&1===h&&0===n&&0===r&&0===p&&0===g)return x;if((p||g)&&"#document"!==e.parentNode.nodeName&&(C=" translate("+s(p)+" "+s(g)+") "),a=C+" matrix("+u+" 0 0 "+h+" "+(n*u+_)+" "+(r*h+A)+") ","svg"===e.nodeName){for(l=e.ownerDocument.createElementNS(t.svgNS,"g");e.firstChild;)l.appendChild(e.firstChild);e.appendChild(l)}else(l=e).removeAttribute("x"),l.removeAttribute("y"),a=l.getAttribute("transform")+a;return l.setAttribute("transform",a),x}function w(e,t){var n="xlink:href",r=v(e,t.getAttribute(n).slice(1));if(r&&r.getAttribute(n)&&w(e,r),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(e){r&&!t.hasAttribute(e)&&r.hasAttribute(e)&&t.setAttribute(e,r.getAttribute(e))}),!t.children.length)for(var i=r.cloneNode(!0);i.firstChild;)t.appendChild(i.firstChild);t.removeAttribute(n)}t.parseSVGDocument=function(e,n,i,s){if(e){!function(e){for(var n=p(e,["use","svg:use"]),r=0;n.length&&r<n.length;){var i=n[r],s=i.getAttribute("xlink:href")||i.getAttribute("href");if(null===s)return;var o,a,l,c,u=s.slice(1),h=i.getAttribute("x")||0,f=i.getAttribute("y")||0,d=v(e,u).cloneNode(!0),g=(d.getAttribute("transform")||"")+" translate("+h+", "+f+")",m=n.length,y=t.svgNS;if(b(d),/^svg$/i.test(d.nodeName)){var w=d.ownerDocument.createElementNS(y,"g");for(a=0,c=(l=d.attributes).length;a<c;a++)o=l.item(a),w.setAttributeNS(y,o.nodeName,o.nodeValue);for(;d.firstChild;)w.appendChild(d.firstChild);d=w}for(a=0,c=(l=i.attributes).length;a<c;a++)"x"!==(o=l.item(a)).nodeName&&"y"!==o.nodeName&&"xlink:href"!==o.nodeName&&"href"!==o.nodeName&&("transform"===o.nodeName?g=o.nodeValue+" "+g:d.setAttribute(o.nodeName,o.nodeValue));d.setAttribute("transform",g),d.setAttribute("instantiated_by_use","1"),d.removeAttribute("id"),i.parentNode.replaceChild(d,i),n.length===m&&r++}}(e);var o,a,l=t.Object.__uid++,c=b(e),u=t.util.toArray(e.getElementsByTagName("*"));if(c.crossOrigin=s&&s.crossOrigin,c.svgUid=l,0===u.length&&t.isLikelyNode){var h=[];for(o=0,a=(u=e.selectNodes('//*[name(.)!="svg"]')).length;o<a;o++)h[o]=u[o];u=h}var f=u.filter(function(e){return b(e),t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))&&!function(e,t){for(;e&&(e=e.parentNode);)if(e.nodeName&&t.test(e.nodeName.replace("svg:",""))&&!e.getAttribute("instantiated_by_use"))return!0;return!1}(e,t.svgInvalidAncestorsRegEx)});if(!f||f&&!f.length)n&&n([],{});else{var d={};u.filter(function(e){return"clipPath"===e.nodeName.replace("svg:","")}).forEach(function(e){var n=e.getAttribute("id");d[n]=t.util.toArray(e.getElementsByTagName("*")).filter(function(e){return t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))})}),t.gradientDefs[l]=t.getGradientDefs(e),t.cssRules[l]=t.getCSSRules(e),t.clipPaths[l]=d,t.parseElements(f,function(e,r){n&&(n(e,c,r,u),delete t.gradientDefs[l],delete t.cssRules[l],delete t.clipPaths[l])},r(c),i,s)}}};var x=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+t.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+t.reNum+"))?\\s+(.*)");n(t,{parseFontDeclaration:function(e,t){var n=e.match(x);if(n){var r=n[1],i=n[3],o=n[4],a=n[5],l=n[6];r&&(t.fontStyle=r),i&&(t.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),o&&(t.fontSize=s(o)),l&&(t.fontFamily=l),a&&(t.lineHeight="normal"===a?1:a)}},getGradientDefs:function(e){var t,n=p(e,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),r=0,i={};for(r=n.length;r--;)(t=n[r]).getAttribute("xlink:href")&&w(e,t),i[t.getAttribute("id")]=t;return i},parseAttributes:function(e,r,o){if(e){var a,d,p,m={};"undefined"===typeof o&&(o=e.getAttribute("svgUid")),e.parentNode&&t.svgValidParentsRegEx.test(e.parentNode.nodeName)&&(m=t.parseAttributes(e.parentNode,r,o));var v=r.reduce(function(t,n){return(a=e.getAttribute(n))&&(t[n]=a),t},{}),y=n(function(e,n){var r={};for(var i in t.cssRules[n])if(g(e,i.split(" ")))for(var s in t.cssRules[n][i])r[s]=t.cssRules[n][i][s];return r}(e,o),t.parseStyleAttribute(e));v=n(v,y),y[u]&&e.setAttribute(u,y[u]),d=p=m.fontSize||t.Text.DEFAULT_SVG_FONT_SIZE,v[c]&&(v[c]=d=s(v[c],p));var b,w,x={};for(var C in v)w=f(b=h(C),v[C],m,d),x[b]=w;x&&x.font&&t.parseFontDeclaration(x.font,x);var _=n(m,x);return t.svgValidParentsRegEx.test(e.nodeName)?_:function(e){for(var n in l)if("undefined"!==typeof e[l[n]]&&""!==e[n]){if("undefined"===typeof e[n]){if(!t.Object.prototype[n])continue;e[n]=t.Object.prototype[n]}if(0!==e[n].indexOf("url(")){var r=new t.Color(e[n]);e[n]=r.setAlpha(i(r.getAlpha()*e[l[n]],2)).toRgba()}}return e}(_)}},parseElements:function(e,n,r,i,s){new t.ElementsParser(e,n,r,i,s).parse()},parseStyleAttribute:function(e){var t={},n=e.getAttribute("style");return n?("string"===typeof n?function(e,t){var n,r;e.replace(/;\s*$/,"").split(";").forEach(function(e){var i=e.split(":");n=i[0].trim().toLowerCase(),r=i[1].trim(),t[n]=r})}(n,t):function(e,t){var n,r;for(var i in e)"undefined"!==typeof e[i]&&(n=i.toLowerCase(),r=e[i],t[n]=r)}(n,t),t):t},parsePointsAttribute:function(e){if(!e)return null;var t,n,r=[];for(t=0,n=(e=(e=e.replace(/,/g," ").trim()).split(/\s+/)).length;t<n;t+=2)r.push({x:parseFloat(e[t]),y:parseFloat(e[t+1])});return r},getCSSRules:function(e){var n,r,i=e.getElementsByTagName("style"),s={};for(n=0,r=i.length;n<r;n++){var o=i[n].textContent;""!==(o=o.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&o.split("}").filter(function(e){return e.trim()}).forEach(function(e){var i=e.split("{"),o={},a=i[1].trim().split(";").filter(function(e){return e.trim()});for(n=0,r=a.length;n<r;n++){var l=a[n].split(":"),c=l[0].trim(),u=l[1].trim();o[c]=u}(e=i[0].trim()).split(",").forEach(function(e){""!==(e=e.replace(/^svg/i,"").trim())&&(s[e]?t.util.object.extend(s[e],o):s[e]=t.util.object.clone(o))})})}return s},loadSVGFromURL:function(e,n,r,i){e=e.replace(/^\n\s*/,"").trim(),new t.util.request(e,{method:"get",onComplete:function(e){var s=e.responseXML;if(!s||!s.documentElement)return n&&n(null),!1;t.parseSVGDocument(s.documentElement,function(e,t,r,i){n&&n(e,t,r,i)},r,i)}})},loadSVGFromString:function(e,n,r,i){var s=(new t.window.DOMParser).parseFromString(e.trim(),"text/xml");t.parseSVGDocument(s.documentElement,function(e,t,r,i){n(e,t,r,i)},r,i)}})}(t),i.ElementsParser=function(e,t,n,r,i,s){this.elements=e,this.callback=t,this.options=n,this.reviver=r,this.svgUid=n&&n.svgUid||0,this.parsingOptions=i,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=s},(r=i.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},r.createObjects=function(){var e=this;this.elements.forEach(function(t,n){t.setAttribute("svgUid",e.svgUid),e.createObject(t,n)})},r.findTag=function(e){return i[i.util.string.capitalize(e.tagName.replace("svg:",""))]},r.createObject=function(e,t){var n=this.findTag(e);if(n&&n.fromElement)try{n.fromElement(e,this.createCallback(t,e),this.options)}catch(r){i.log(r)}else this.checkIfDone()},r.createCallback=function(e,t){var n=this;return function(r){var s;n.resolveGradient(r,t,"fill"),n.resolveGradient(r,t,"stroke"),r instanceof i.Image&&r._originalElement&&(s=r.parsePreserveAspectRatioAttribute(t)),r._removeTransformMatrix(s),n.resolveClipPath(r,t),n.reviver&&n.reviver(t,r),n.instances[e]=r,n.checkIfDone()}},r.extractPropertyDefinition=function(e,t,n){var r=e[t],s=this.regexUrl;if(s.test(r)){s.lastIndex=0;var o=s.exec(r)[1];return s.lastIndex=0,i[n][this.svgUid][o]}},r.resolveGradient=function(e,t,n){var r=this.extractPropertyDefinition(e,n,"gradientDefs");if(r){var s=t.getAttribute(n+"-opacity"),o=i.Gradient.fromElement(r,e,s,this.options);e.set(n,o)}},r.createClipPathCallback=function(e,t){return function(e){e._removeTransformMatrix(),e.fillRule=e.clipRule,t.push(e)}},r.resolveClipPath=function(e,t){var n,r,s,o,a=this.extractPropertyDefinition(e,"clipPath","clipPaths");if(a){s=[],r=i.util.invertTransform(e.calcTransformMatrix());for(var l=a[0].parentNode,c=t;c.parentNode&&c.getAttribute("clip-path")!==e.clipPath;)c=c.parentNode;c.parentNode.appendChild(l);for(var u=0;u<a.length;u++)n=a[u],this.findTag(n).fromElement(n,this.createClipPathCallback(e,s),this.options);a=1===s.length?s[0]:new i.Group(s),o=i.util.multiplyTransformMatrices(r,a.calcTransformMatrix()),a.clipPath&&this.resolveClipPath(a,c);var h=i.util.qrDecompose(o);a.flipX=!1,a.flipY=!1,a.set("scaleX",h.scaleX),a.set("scaleY",h.scaleY),a.angle=h.angle,a.skewX=h.skewX,a.skewY=0,a.setPositionByOrigin({x:h.translateX,y:h.translateY},"center","center"),e.clipPath=a}else delete e.clipPath},r.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter(function(e){return null!=e}),this.callback(this.instances,this.elements))},function(e){"use strict";var t=e.fabric||(e.fabric={});function n(e,t){this.x=e,this.y=t}t.Point?t.warn("fabric.Point is already defined"):(t.Point=n,n.prototype={type:"point",constructor:n,add:function(e){return new n(this.x+e.x,this.y+e.y)},addEquals:function(e){return this.x+=e.x,this.y+=e.y,this},scalarAdd:function(e){return new n(this.x+e,this.y+e)},scalarAddEquals:function(e){return this.x+=e,this.y+=e,this},subtract:function(e){return new n(this.x-e.x,this.y-e.y)},subtractEquals:function(e){return this.x-=e.x,this.y-=e.y,this},scalarSubtract:function(e){return new n(this.x-e,this.y-e)},scalarSubtractEquals:function(e){return this.x-=e,this.y-=e,this},multiply:function(e){return new n(this.x*e,this.y*e)},multiplyEquals:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return new n(this.x/e,this.y/e)},divideEquals:function(e){return this.x/=e,this.y/=e,this},eq:function(e){return this.x===e.x&&this.y===e.y},lt:function(e){return this.x<e.x&&this.y<e.y},lte:function(e){return this.x<=e.x&&this.y<=e.y},gt:function(e){return this.x>e.x&&this.y>e.y},gte:function(e){return this.x>=e.x&&this.y>=e.y},lerp:function(e,t){return"undefined"===typeof t&&(t=.5),t=Math.max(Math.min(1,t),0),new n(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)},distanceFrom:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},midPointFrom:function(e){return this.lerp(e)},min:function(e){return new n(Math.min(this.x,e.x),Math.min(this.y,e.y))},max:function(e){return new n(Math.max(this.x,e.x),Math.max(this.y,e.y))},toString:function(){return this.x+","+this.y},setXY:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setFromPoint:function(e){return this.x=e.x,this.y=e.y,this},swap:function(e){var t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n},clone:function(){return new n(this.x,this.y)}})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});function n(e){this.status=e,this.points=[]}t.Intersection?t.warn("fabric.Intersection is already defined"):(t.Intersection=n,t.Intersection.prototype={constructor:n,appendPoint:function(e){return this.points.push(e),this},appendPoints:function(e){return this.points=this.points.concat(e),this}},t.Intersection.intersectLineLine=function(e,r,i,s){var o,a=(s.x-i.x)*(e.y-i.y)-(s.y-i.y)*(e.x-i.x),l=(r.x-e.x)*(e.y-i.y)-(r.y-e.y)*(e.x-i.x),c=(s.y-i.y)*(r.x-e.x)-(s.x-i.x)*(r.y-e.y);if(0!==c){var u=a/c,h=l/c;0<=u&&u<=1&&0<=h&&h<=1?(o=new n("Intersection")).appendPoint(new t.Point(e.x+u*(r.x-e.x),e.y+u*(r.y-e.y))):o=new n}else o=new n(0===a||0===l?"Coincident":"Parallel");return o},t.Intersection.intersectLinePolygon=function(e,t,r){var i,s,o,a,l=new n,c=r.length;for(a=0;a<c;a++)i=r[a],s=r[(a+1)%c],o=n.intersectLineLine(e,t,i,s),l.appendPoints(o.points);return l.points.length>0&&(l.status="Intersection"),l},t.Intersection.intersectPolygonPolygon=function(e,t){var r,i=new n,s=e.length;for(r=0;r<s;r++){var o=e[r],a=e[(r+1)%s],l=n.intersectLinePolygon(o,a,t);i.appendPoints(l.points)}return i.points.length>0&&(i.status="Intersection"),i},t.Intersection.intersectPolygonRectangle=function(e,r,i){var s=r.min(i),o=r.max(i),a=new t.Point(o.x,s.y),l=new t.Point(s.x,o.y),c=n.intersectLinePolygon(s,a,e),u=n.intersectLinePolygon(a,o,e),h=n.intersectLinePolygon(o,l,e),f=n.intersectLinePolygon(l,s,e),d=new n;return d.appendPoints(c.points),d.appendPoints(u.points),d.appendPoints(h.points),d.appendPoints(f.points),d.points.length>0&&(d.status="Intersection"),d})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});function n(e){e?this._tryParsingColor(e):this.setSource([0,0,0,1])}function r(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}t.Color?t.warn("fabric.Color is already defined."):(t.Color=n,t.Color.prototype={_tryParsingColor:function(e){var t;e in n.colorNameMap&&(e=n.colorNameMap[e]),"transparent"===e&&(t=[255,255,255,0]),t||(t=n.sourceFromHex(e)),t||(t=n.sourceFromRgb(e)),t||(t=n.sourceFromHsl(e)),t||(t=[0,0,0,1]),t&&this.setSource(t)},_rgbToHsl:function(e,n,r){e/=255,n/=255,r/=255;var i,s,o,a=t.util.array.max([e,n,r]),l=t.util.array.min([e,n,r]);if(o=(a+l)/2,a===l)i=s=0;else{var c=a-l;switch(s=o>.5?c/(2-a-l):c/(a+l),a){case e:i=(n-r)/c+(n<r?6:0);break;case n:i=(r-e)/c+2;break;case r:i=(e-n)/c+4}i/=6}return[Math.round(360*i),Math.round(100*s),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(e){this._source=e},toRgb:function(){var e=this.getSource();return"rgb("+e[0]+","+e[1]+","+e[2]+")"},toRgba:function(){var e=this.getSource();return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"},toHsl:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsl("+t[0]+","+t[1]+"%,"+t[2]+"%)"},toHsla:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsla("+t[0]+","+t[1]+"%,"+t[2]+"%,"+e[3]+")"},toHex:function(){var e,t,n,r=this.getSource();return e=1===(e=r[0].toString(16)).length?"0"+e:e,t=1===(t=r[1].toString(16)).length?"0"+t:t,n=1===(n=r[2].toString(16)).length?"0"+n:n,e.toUpperCase()+t.toUpperCase()+n.toUpperCase()},toHexa:function(){var e,t=this.getSource();return e=1===(e=(e=Math.round(255*t[3])).toString(16)).length?"0"+e:e,this.toHex()+e.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var t=this.getSource();return t[3]=e,this.setSource(t),this},toGrayscale:function(){var e=this.getSource(),t=parseInt((.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),10),n=e[3];return this.setSource([t,t,t,n]),this},toBlackWhite:function(e){var t=this.getSource(),n=(.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),r=t[3];return e=e||127,n=Number(n)<Number(e)?0:255,this.setSource([n,n,n,r]),this},overlayWith:function(e){e instanceof n||(e=new n(e));var t,r=[],i=this.getAlpha(),s=this.getSource(),o=e.getSource();for(t=0;t<3;t++)r.push(Math.round(.5*s[t]+.5*o[t]));return r[3]=i,this.setSource(r),this}},t.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,t.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,t.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,t.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},t.Color.fromRgb=function(e){return n.fromSource(n.sourceFromRgb(e))},t.Color.sourceFromRgb=function(e){var t=e.match(n.reRGBa);if(t){var r=parseInt(t[1],10)/(/%$/.test(t[1])?100:1)*(/%$/.test(t[1])?255:1),i=parseInt(t[2],10)/(/%$/.test(t[2])?100:1)*(/%$/.test(t[2])?255:1),s=parseInt(t[3],10)/(/%$/.test(t[3])?100:1)*(/%$/.test(t[3])?255:1);return[parseInt(r,10),parseInt(i,10),parseInt(s,10),t[4]?parseFloat(t[4]):1]}},t.Color.fromRgba=n.fromRgb,t.Color.fromHsl=function(e){return n.fromSource(n.sourceFromHsl(e))},t.Color.sourceFromHsl=function(e){var t=e.match(n.reHSLa);if(t){var i,s,o,a=(parseFloat(t[1])%360+360)%360/360,l=parseFloat(t[2])/(/%$/.test(t[2])?100:1),c=parseFloat(t[3])/(/%$/.test(t[3])?100:1);if(0===l)i=s=o=c;else{var u=c<=.5?c*(l+1):c+l-c*l,h=2*c-u;i=r(h,u,a+1/3),s=r(h,u,a),o=r(h,u,a-1/3)}return[Math.round(255*i),Math.round(255*s),Math.round(255*o),t[4]?parseFloat(t[4]):1]}},t.Color.fromHsla=n.fromHsl,t.Color.fromHex=function(e){return n.fromSource(n.sourceFromHex(e))},t.Color.sourceFromHex=function(e){if(e.match(n.reHex)){var t=e.slice(e.indexOf("#")+1),r=3===t.length||4===t.length,i=8===t.length||4===t.length,s=r?t.charAt(0)+t.charAt(0):t.substring(0,2),o=r?t.charAt(1)+t.charAt(1):t.substring(2,4),a=r?t.charAt(2)+t.charAt(2):t.substring(4,6),l=i?r?t.charAt(3)+t.charAt(3):t.substring(6,8):"FF";return[parseInt(s,16),parseInt(o,16),parseInt(a,16),parseFloat((parseInt(l,16)/255).toFixed(2))]}},t.Color.fromSource=function(e){var t=new n;return t.setSource(e),t})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=["e","se","s","sw","w","nw","n","ne","e"],r=["ns","nesw","ew","nwse"],i={},s="left",o="top",a="right",l="bottom",c="center",u={top:l,bottom:o,left:a,right:s,center:c},h=t.util.radiansToDegrees,f=Math.sign||function(e){return(e>0)-(e<0)||+e};function d(e,t){var n=e.angle+h(Math.atan2(t.y,t.x))+360;return Math.round(n%360/45)}function p(e,n){var r=n.transform.target,i=r.canvas,s=t.util.object.clone(n);s.target=r,i&&i.fire("object:"+e,s),r.fire(e,n)}function g(e,t){var n=t.canvas,r=e[n.uniScaleKey];return n.uniformScaling&&!r||!n.uniformScaling&&r}function m(e){return e.originX===c&&e.originY===c}function v(e,t,n){var r=e.lockScalingX,i=e.lockScalingY;return!(!r||!i)||(!(t||!r&&!i||!n)||(!(!r||"x"!==t)||!(!i||"y"!==t)))}function y(e,t,n,r){return{e:e,transform:t,pointer:{x:n,y:r}}}function b(e){return function(t,n,r,i){var s=n.target,o=s.getCenterPoint(),a=s.translateToOriginPoint(o,n.originX,n.originY),l=e(t,n,r,i);return s.setPositionByOrigin(a,n.originX,n.originY),l}}function w(e,t){return function(n,r,i,s){var o=t(n,r,i,s);return o&&p(e,y(n,r,i,s)),o}}function x(e,n,r,i,s){var o=e.target,a=o.controls[e.corner],l=o.canvas.getZoom(),c=o.padding/l,u=o.toLocalPoint(new t.Point(i,s),n,r);return u.x>=c&&(u.x-=c),u.x<=-c&&(u.x+=c),u.y>=c&&(u.y-=c),u.y<=c&&(u.y+=c),u.x-=a.offsetX,u.y-=a.offsetY,u}function C(e){return e.flipX!==e.flipY}function _(e,t,n,r,i){if(0!==e[t]){var s=i/e._getTransformedDimensions()[r]*e[n];e.set(n,s)}}function A(e,t,n,r){var i,c=t.target,u=c._getTransformedDimensions(0,c.skewY),f=x(t,t.originX,t.originY,n,r),d=Math.abs(2*f.x)-u.x,p=c.skewX;d<2?i=0:(i=h(Math.atan2(d/c.scaleX,u.y/c.scaleY)),t.originX===s&&t.originY===l&&(i=-i),t.originX===a&&t.originY===o&&(i=-i),C(c)&&(i=-i));var g=p!==i;if(g){var m=c._getTransformedDimensions().y;c.set("skewX",i),_(c,"skewY","scaleY","y",m)}return g}function S(e,t,n,r){var i,c=t.target,u=c._getTransformedDimensions(c.skewX,0),f=x(t,t.originX,t.originY,n,r),d=Math.abs(2*f.y)-u.y,p=c.skewY;d<2?i=0:(i=h(Math.atan2(d/c.scaleY,u.x/c.scaleX)),t.originX===s&&t.originY===l&&(i=-i),t.originX===a&&t.originY===o&&(i=-i),C(c)&&(i=-i));var g=p!==i;if(g){var m=c._getTransformedDimensions().x;c.set("skewY",i),_(c,"skewX","scaleX","x",m)}return g}function T(e,t,n,r,i){i=i||{};var s,o,a,l,c,h,d=t.target,p=d.lockScalingX,y=d.lockScalingY,b=i.by,w=g(e,d),C=v(d,b,w),_=t.gestureScale;if(C)return!1;if(_)o=t.scaleX*_,a=t.scaleY*_;else{if(s=x(t,t.originX,t.originY,n,r),c="y"!==b?f(s.x):1,h="x"!==b?f(s.y):1,t.signX||(t.signX=c),t.signY||(t.signY=h),d.lockScalingFlip&&(t.signX!==c||t.signY!==h))return!1;if(l=d._getTransformedDimensions(),w&&!b){var A=Math.abs(s.x)+Math.abs(s.y),S=t.original,T=A/(Math.abs(l.x*S.scaleX/d.scaleX)+Math.abs(l.y*S.scaleY/d.scaleY));o=S.scaleX*T,a=S.scaleY*T}else o=Math.abs(s.x*d.scaleX/l.x),a=Math.abs(s.y*d.scaleY/l.y);m(t)&&(o*=2,a*=2),t.signX!==c&&"y"!==b&&(t.originX=u[t.originX],o*=-1,t.signX=c),t.signY!==h&&"x"!==b&&(t.originY=u[t.originY],a*=-1,t.signY=h)}var E=d.scaleX,k=d.scaleY;return b?("x"===b&&d.set("scaleX",o),"y"===b&&d.set("scaleY",a)):(!p&&d.set("scaleX",o),!y&&d.set("scaleY",a)),E!==d.scaleX||k!==d.scaleY}i.scaleCursorStyleHandler=function(e,t,r){var i=g(e,r),s="";if(0!==t.x&&0===t.y?s="x":0===t.x&&0!==t.y&&(s="y"),v(r,s,i))return"not-allowed";var o=d(r,t);return n[o]+"-resize"},i.skewCursorStyleHandler=function(e,t,n){var i="not-allowed";if(0!==t.x&&n.lockSkewingY)return i;if(0!==t.y&&n.lockSkewingX)return i;var s=d(n,t)%4;return r[s]+"-resize"},i.scaleSkewCursorStyleHandler=function(e,t,n){return e[n.canvas.altActionKey]?i.skewCursorStyleHandler(e,t,n):i.scaleCursorStyleHandler(e,t,n)},i.rotationWithSnapping=w("rotating",b(function(e,t,n,r){var i=t,s=i.target,o=s.translateToOriginPoint(s.getCenterPoint(),i.originX,i.originY);if(s.lockRotation)return!1;var a,l=Math.atan2(i.ey-o.y,i.ex-o.x),c=Math.atan2(r-o.y,n-o.x),u=h(c-l+i.theta);if(s.snapAngle>0){var f=s.snapAngle,d=s.snapThreshold||f,p=Math.ceil(u/f)*f,g=Math.floor(u/f)*f;Math.abs(u-g)<d?u=g:Math.abs(u-p)<d&&(u=p)}return u<0&&(u=360+u),u%=360,a=s.angle!==u,s.angle=u,a})),i.scalingEqually=w("scaling",b(function(e,t,n,r){return T(e,t,n,r)})),i.scalingX=w("scaling",b(function(e,t,n,r){return T(e,t,n,r,{by:"x"})})),i.scalingY=w("scaling",b(function(e,t,n,r){return T(e,t,n,r,{by:"y"})})),i.scalingYOrSkewingX=function(e,t,n,r){return e[t.target.canvas.altActionKey]?i.skewHandlerX(e,t,n,r):i.scalingY(e,t,n,r)},i.scalingXOrSkewingY=function(e,t,n,r){return e[t.target.canvas.altActionKey]?i.skewHandlerY(e,t,n,r):i.scalingX(e,t,n,r)},i.changeWidth=w("resizing",b(function(e,t,n,r){var i=t.target,s=x(t,t.originX,t.originY,n,r),o=i.strokeWidth/(i.strokeUniform?i.scaleX:1),a=m(t)?2:1,l=i.width,c=Math.abs(s.x*a/i.scaleX)-o;return i.set("width",Math.max(c,0)),l!==c})),i.skewHandlerX=function(e,t,n,r){var i,l=t.target,u=l.skewX,h=t.originY;return!l.lockSkewingX&&(0===u?i=x(t,c,c,n,r).x>0?s:a:(u>0&&(i=h===o?s:a),u<0&&(i=h===o?a:s),C(l)&&(i=i===s?a:s)),t.originX=i,w("skewing",b(A))(e,t,n,r))},i.skewHandlerY=function(e,t,n,r){var i,a=t.target,u=a.skewY,h=t.originX;return!a.lockSkewingY&&(0===u?i=x(t,c,c,n,r).y>0?o:l:(u>0&&(i=h===s?o:l),u<0&&(i=h===s?l:o),C(a)&&(i=i===o?l:o)),t.originY=i,w("skewing",b(S))(e,t,n,r))},i.dragHandler=function(e,t,n,r){var i=t.target,s=n-t.offsetX,o=r-t.offsetY,a=!i.get("lockMovementX")&&i.left!==s,l=!i.get("lockMovementY")&&i.top!==o;return a&&i.set("left",s),l&&i.set("top",o),(a||l)&&p("moving",y(e,t,n,r)),a||l},i.scaleOrSkewActionName=function(e,t,n){var r=e[n.canvas.altActionKey];return 0===t.x?r?"skewX":"scaleY":0===t.y?r?"skewY":"scaleX":void 0},i.rotationStyleHandler=function(e,t,n){return n.lockRotation?"not-allowed":t.cursorStyle},i.fireEvent=p,i.wrapWithFixedAnchor=b,i.wrapWithFireEvent=w,i.getLocalPoint=x,t.controlsUtils=i}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.degreesToRadians,r=t.controlsUtils;r.renderCircleControl=function(e,t,n,r,i){r=r||{};var s,o=this.sizeX||r.cornerSize||i.cornerSize,a=this.sizeY||r.cornerSize||i.cornerSize,l="undefined"!==typeof r.transparentCorners?r.transparentCorners:i.transparentCorners,c=l?"stroke":"fill",u=!l&&(r.cornerStrokeColor||i.cornerStrokeColor),h=t,f=n;e.save(),e.fillStyle=r.cornerColor||i.cornerColor,e.strokeStyle=r.cornerStrokeColor||i.cornerStrokeColor,o>a?(s=o,e.scale(1,a/o),f=n*o/a):a>o?(s=a,e.scale(o/a,1),h=t*a/o):s=o,e.lineWidth=1,e.beginPath(),e.arc(h,f,s/2,0,2*Math.PI,!1),e[c](),u&&e.stroke(),e.restore()},r.renderSquareControl=function(e,t,r,i,s){i=i||{};var o=this.sizeX||i.cornerSize||s.cornerSize,a=this.sizeY||i.cornerSize||s.cornerSize,l="undefined"!==typeof i.transparentCorners?i.transparentCorners:s.transparentCorners,c=l?"stroke":"fill",u=!l&&(i.cornerStrokeColor||s.cornerStrokeColor),h=o/2,f=a/2;e.save(),e.fillStyle=i.cornerColor||s.cornerColor,e.strokeStyle=i.cornerStrokeColor||s.cornerStrokeColor,e.lineWidth=1,e.translate(t,r),e.rotate(n(s.angle)),e[c+"Rect"](-h,-f,o,a),u&&e.strokeRect(-h,-f,o,a),e.restore()}}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Control=function(e){for(var t in e)this[t]=e[t]},t.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(e,t){return t.cursorStyle},getActionName:function(e,t){return t.actionName},getVisibility:function(e,t){var n=e._controlsVisibility;return n&&"undefined"!==typeof n[t]?n[t]:this.visible},setVisibility:function(e){this.visible=e},positionHandler:function(e,n){return t.util.transformPoint({x:this.x*e.x+this.offsetX,y:this.y*e.y+this.offsetY},n)},calcCornerCoords:function(e,n,r,i,s){var o,a,l,c,u=s?this.touchSizeX:this.sizeX,h=s?this.touchSizeY:this.sizeY;if(u&&h&&u!==h){var f=Math.atan2(h,u),d=Math.sqrt(u*u+h*h)/2,p=f-t.util.degreesToRadians(e),g=Math.PI/2-f-t.util.degreesToRadians(e);o=d*t.util.cos(p),a=d*t.util.sin(p),l=d*t.util.cos(g),c=d*t.util.sin(g)}else{d=.7071067812*(u&&h?u:n);p=t.util.degreesToRadians(45-e);o=l=d*t.util.cos(p),a=c=d*t.util.sin(p)}return{tl:{x:r-c,y:i-l},tr:{x:r+o,y:i-a},bl:{x:r-o,y:i+a},br:{x:r+c,y:i+l}}},render:function(e,n,r,i,s){if("circle"===((i=i||{}).cornerStyle||s.cornerStyle))t.controlsUtils.renderCircleControl.call(this,e,n,r,i,s);else t.controlsUtils.renderSquareControl.call(this,e,n,r,i,s)}}}(t),function(){function e(e,t){var n,r,s,o,a=e.getAttribute("style"),l=e.getAttribute("offset")||0;if(l=(l=parseFloat(l)/(/%$/.test(l)?100:1))<0?0:l>1?1:l,a){var c=a.split(/\s*;\s*/);for(""===c[c.length-1]&&c.pop(),o=c.length;o--;){var u=c[o].split(/\s*:\s*/),h=u[0].trim(),f=u[1].trim();"stop-color"===h?n=f:"stop-opacity"===h&&(s=f)}}return n||(n=e.getAttribute("stop-color")||"rgb(0,0,0)"),s||(s=e.getAttribute("stop-opacity")),r=(n=new i.Color(n)).getAlpha(),s=isNaN(parseFloat(s))?1:parseFloat(s),s*=r*t,{offset:l,color:n.toRgb(),opacity:s}}var t=i.util.object.clone;i.Gradient=i.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(e){e||(e={}),e.coords||(e.coords={});var t,n=this;Object.keys(e).forEach(function(t){n[t]=e[t]}),this.id?this.id+="_"+i.Object.__uid++:this.id=i.Object.__uid++,t={x1:e.coords.x1||0,y1:e.coords.y1||0,x2:e.coords.x2||0,y2:e.coords.y2||0},"radial"===this.type&&(t.r1=e.coords.r1||0,t.r2=e.coords.r2||0),this.coords=t,this.colorStops=e.colorStops.slice()},addColorStop:function(e){for(var t in e){var n=new i.Color(e[t]);this.colorStops.push({offset:parseFloat(t),color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(e){var t={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return i.util.populateWithProperties(this,t,e),t},toSVG:function(e,n){var r,s,o,a,l=t(this.coords,!0),c=(n=n||{},t(this.colorStops,!0)),u=l.r1>l.r2,h=this.gradientTransform?this.gradientTransform.concat():i.iMatrix.concat(),f=-this.offsetX,d=-this.offsetY,p=!!n.additionalTransform,g="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(c.sort(function(e,t){return e.offset-t.offset}),"objectBoundingBox"===g?(f/=e.width,d/=e.height):(f+=e.width/2,d+=e.height/2),"path"===e.type&&"percentage"!==this.gradientUnits&&(f-=e.pathOffset.x,d-=e.pathOffset.y),h[4]-=f,h[5]-=d,a='id="SVGID_'+this.id+'" gradientUnits="'+g+'"',a+=' gradientTransform="'+(p?n.additionalTransform+" ":"")+i.util.matrixToSVG(h)+'" ',"linear"===this.type?o=["<linearGradient ",a,' x1="',l.x1,'" y1="',l.y1,'" x2="',l.x2,'" y2="',l.y2,'">\n']:"radial"===this.type&&(o=["<radialGradient ",a,' cx="',u?l.x1:l.x2,'" cy="',u?l.y1:l.y2,'" r="',u?l.r1:l.r2,'" fx="',u?l.x2:l.x1,'" fy="',u?l.y2:l.y1,'">\n']),"radial"===this.type){if(u)for((c=c.concat()).reverse(),r=0,s=c.length;r<s;r++)c[r].offset=1-c[r].offset;var m=Math.min(l.r1,l.r2);if(m>0){var v=m/Math.max(l.r1,l.r2);for(r=0,s=c.length;r<s;r++)c[r].offset+=v*(1-c[r].offset)}}for(r=0,s=c.length;r<s;r++){var y=c[r];o.push("<stop ",'offset="',100*y.offset+"%",'" style="stop-color:',y.color,"undefined"!==typeof y.opacity?";stop-opacity: "+y.opacity:";",'"/>\n')}return o.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),o.join("")},toLive:function(e){var t,n,r,s=i.util.object.clone(this.coords);if(this.type){for("linear"===this.type?t=e.createLinearGradient(s.x1,s.y1,s.x2,s.y2):"radial"===this.type&&(t=e.createRadialGradient(s.x1,s.y1,s.r1,s.x2,s.y2,s.r2)),n=0,r=this.colorStops.length;n<r;n++){var o=this.colorStops[n].color,a=this.colorStops[n].opacity,l=this.colorStops[n].offset;"undefined"!==typeof a&&(o=new i.Color(o).setAlpha(a).toRgba()),t.addColorStop(l,o)}return t}}}),i.util.object.extend(i.Gradient,{fromElement:function(t,n,r,s){var o=parseFloat(r)/(/%$/.test(r)?100:1);o=o<0?0:o>1?1:o,isNaN(o)&&(o=1);var a,l,c,u,h=t.getElementsByTagName("stop"),f="userSpaceOnUse"===t.getAttribute("gradientUnits")?"pixels":"percentage",d=t.getAttribute("gradientTransform")||"",p=[],g=0,m=0;for("linearGradient"===t.nodeName||"LINEARGRADIENT"===t.nodeName?(a="linear",l=function(e){return{x1:e.getAttribute("x1")||0,y1:e.getAttribute("y1")||0,x2:e.getAttribute("x2")||"100%",y2:e.getAttribute("y2")||0}}(t)):(a="radial",l=function(e){return{x1:e.getAttribute("fx")||e.getAttribute("cx")||"50%",y1:e.getAttribute("fy")||e.getAttribute("cy")||"50%",r1:0,x2:e.getAttribute("cx")||"50%",y2:e.getAttribute("cy")||"50%",r2:e.getAttribute("r")||"50%"}}(t)),c=h.length;c--;)p.push(e(h[c],o));return u=i.parseTransformAttribute(d),function(e,t,n,r){var i,s;Object.keys(t).forEach(function(e){"Infinity"===(i=t[e])?s=1:"-Infinity"===i?s=0:(s=parseFloat(t[e],10),"string"===typeof i&&/^(\d+\.\d+)%|(\d+)%$/.test(i)&&(s*=.01,"pixels"===r&&("x1"!==e&&"x2"!==e&&"r2"!==e||(s*=n.viewBoxWidth||n.width),"y1"!==e&&"y2"!==e||(s*=n.viewBoxHeight||n.height)))),t[e]=s})}(0,l,s,f),"pixels"===f&&(g=-n.left,m=-n.top),new i.Gradient({id:t.getAttribute("id"),type:a,coords:l,colorStops:p,gradientUnits:f,gradientTransform:u,offsetX:g,offsetY:m})}})}(),function(){"use strict";var e=i.util.toFixed;i.Pattern=i.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(e,t){if(e||(e={}),this.id=i.Object.__uid++,this.setOptions(e),!e.source||e.source&&"string"!==typeof e.source)t&&t(this);else{var n=this;this.source=i.util.createImage(),i.util.loadImage(e.source,function(e,r){n.source=e,t&&t(n,r)},null,this.crossOrigin)}},toObject:function(t){var n,r,s=i.Object.NUM_FRACTION_DIGITS;return"string"===typeof this.source.src?n=this.source.src:"object"===typeof this.source&&this.source.toDataURL&&(n=this.source.toDataURL()),r={type:"pattern",source:n,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:e(this.offsetX,s),offsetY:e(this.offsetY,s),patternTransform:this.patternTransform?this.patternTransform.concat():null},i.util.populateWithProperties(this,r,t),r},toSVG:function(e){var t="function"===typeof this.source?this.source():this.source,n=t.width/e.width,r=t.height/e.height,i=this.offsetX/e.width,s=this.offsetY/e.height,o="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(r=1,s&&(r+=Math.abs(s))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(n=1,i&&(n+=Math.abs(i))),t.src?o=t.src:t.toDataURL&&(o=t.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+i+'" y="'+s+'" width="'+n+'" height="'+r+'">\n<image x="0" y="0" width="'+t.width+'" height="'+t.height+'" xlink:href="'+o+'"></image>\n</pattern>\n'},setOptions:function(e){for(var t in e)this[t]=e[t]},toLive:function(e){var t=this.source;if(!t)return"";if("undefined"!==typeof t.src){if(!t.complete)return"";if(0===t.naturalWidth||0===t.naturalHeight)return""}return e.createPattern(t,this.repeat)}})}(),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.toFixed;t.Shadow?t.warn("fabric.Shadow is already defined."):(t.Shadow=t.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(e){for(var n in"string"===typeof e&&(e=this._parseShadow(e)),e)this[n]=e[n];this.id=t.Object.__uid++},_parseShadow:function(e){var n=e.trim(),r=t.Shadow.reOffsetsAndBlur.exec(n)||[];return{color:(n.replace(t.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(r[1],10)||0,offsetY:parseFloat(r[2],10)||0,blur:parseFloat(r[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(e){var r=40,i=40,s=t.Object.NUM_FRACTION_DIGITS,o=t.util.rotateVector({x:this.offsetX,y:this.offsetY},t.util.degreesToRadians(-e.angle)),a=new t.Color(this.color);return e.width&&e.height&&(r=100*n((Math.abs(o.x)+this.blur)/e.width,s)+20,i=100*n((Math.abs(o.y)+this.blur)/e.height,s)+20),e.flipX&&(o.x*=-1),e.flipY&&(o.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+i+'%" height="'+(100+2*i)+'%" x="-'+r+'%" width="'+(100+2*r)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+n(this.blur?this.blur/2:0,s)+'"></feGaussianBlur>\n\t<feOffset dx="'+n(o.x,s)+'" dy="'+n(o.y,s)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+a.toRgb()+'" flood-opacity="'+a.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var e={},n=t.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(t){this[t]!==n[t]&&(e[t]=this[t])},this),e}}),t.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(t),function(){"use strict";if(i.StaticCanvas)i.warn("fabric.StaticCanvas is already defined.");else{var e=i.util.object.extend,t=i.util.getElementOffset,n=i.util.removeFromArray,r=i.util.toFixed,s=i.util.transformPoint,o=i.util.invertTransform,a=i.util.getNodeCanvas,l=i.util.createCanvasElement,c=new Error("Could not initialize `canvas` element");i.StaticCanvas=i.util.createClass(i.CommonMethods,{initialize:function(e,t){t||(t={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:i.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(e,t){var n=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(e),this._initOptions(t),this.interactive||this._initRetinaScaling(),t.overlayImage&&this.setOverlayImage(t.overlayImage,n),t.backgroundImage&&this.setBackgroundImage(t.backgroundImage,n),t.backgroundColor&&this.setBackgroundColor(t.backgroundColor,n),t.overlayColor&&this.setOverlayColor(t.overlayColor,n),this.calcOffset()},_isRetinaScaling:function(){return i.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,i.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var e=i.devicePixelRatio;this.__initRetinaScaling(e,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(e,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(e,t,n){t.setAttribute("width",this.width*e),t.setAttribute("height",this.height*e),n.scale(e,e)},calcOffset:function(){return this._offset=t(this.lowerCanvasEl),this},setOverlayImage:function(e,t,n){return this.__setBgOverlayImage("overlayImage",e,t,n)},setBackgroundImage:function(e,t,n){return this.__setBgOverlayImage("backgroundImage",e,t,n)},setOverlayColor:function(e,t){return this.__setBgOverlayColor("overlayColor",e,t)},setBackgroundColor:function(e,t){return this.__setBgOverlayColor("backgroundColor",e,t)},__setBgOverlayImage:function(e,t,n,r){return"string"===typeof t?i.util.loadImage(t,function(t,s){if(t){var o=new i.Image(t,r);this[e]=o,o.canvas=this}n&&n(t,s)},this,r&&r.crossOrigin):(r&&t.setOptions(r),this[e]=t,t&&(t.canvas=this),n&&n(t,!1)),this},__setBgOverlayColor:function(e,t,n){return this[e]=t,this._initGradient(t,e),this._initPattern(t,e,n),this},_createCanvasElement:function(){var e=l();if(!e)throw c;if(e.style||(e.style={}),"undefined"===typeof e.getContext)throw c;return e},_initOptions:function(e){var t=this.lowerCanvasEl;this._setOptions(e),this.width=this.width||parseInt(t.width,10)||0,this.height=this.height||parseInt(t.height,10)||0,this.lowerCanvasEl.style&&(t.width=this.width,t.height=this.height,t.style.width=this.width+"px",t.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(e){e&&e.getContext?this.lowerCanvasEl=e:this.lowerCanvasEl=i.util.getById(e)||this._createCanvasElement(),i.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(e,t){return this.setDimensions({width:e},t)},setHeight:function(e,t){return this.setDimensions({height:e},t)},setDimensions:function(e,t){var n;for(var r in t=t||{},e)n=e[r],t.cssOnly||(this._setBackstoreDimension(r,e[r]),n+="px",this.hasLostContext=!0),t.backstoreOnly||this._setCssDimension(r,n);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),t.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(e,t){return this.lowerCanvasEl[e]=t,this.upperCanvasEl&&(this.upperCanvasEl[e]=t),this.cacheCanvasEl&&(this.cacheCanvasEl[e]=t),this[e]=t,this},_setCssDimension:function(e,t){return this.lowerCanvasEl.style[e]=t,this.upperCanvasEl&&(this.upperCanvasEl.style[e]=t),this.wrapperEl&&(this.wrapperEl.style[e]=t),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(e){var t,n,r,i=this._activeObject,s=this.backgroundImage,o=this.overlayImage;for(this.viewportTransform=e,n=0,r=this._objects.length;n<r;n++)(t=this._objects[n]).group||t.setCoords(!0);return i&&i.setCoords(),s&&s.setCoords(!0),o&&o.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(e,t){var n=e,r=this.viewportTransform.slice(0);e=s(e,o(this.viewportTransform)),r[0]=t,r[3]=t;var i=s(e,r);return r[4]+=n.x-i.x,r[5]+=n.y-i.y,this.setViewportTransform(r)},setZoom:function(e){return this.zoomToPoint(new i.Point(0,0),e),this},absolutePan:function(e){var t=this.viewportTransform.slice(0);return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)},relativePan:function(e){return this.absolutePan(new i.Point(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(e){this.stateful&&e.setupState(),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added")},_onObjectRemoved:function(e){this.fire("object:removed",{target:e}),e.fire("removed"),delete e.canvas},clearContext:function(e){return e.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var e=this.contextContainer;return this.renderCanvas(e,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=i.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var e={},t=this.width,n=this.height,r=o(this.viewportTransform);return e.tl=s({x:0,y:0},r),e.br=s({x:t,y:n},r),e.tr=new i.Point(e.br.x,e.tl.y),e.bl=new i.Point(e.tl.x,e.br.y),this.vptCoords=e,e},cancelRequestedRender:function(){this.isRendering&&(i.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(e,t){var n=this.viewportTransform,r=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(e),i.util.setImageSmoothing(e,this.imageSmoothingEnabled),this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),r&&(r.canvas=this,r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e)),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render",{ctx:e})},drawClipPathOnCanvas:function(e){var t=this.viewportTransform,n=this.clipPath;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e.globalCompositeOperation="destination-in",n.transform(e),e.scale(1/n.zoomX,1/n.zoomY),e.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),e.restore()},_renderObjects:function(e,t){var n,r;for(n=0,r=t.length;n<r;++n)t[n]&&t[n].render(e)},_renderBackgroundOrOverlay:function(e,t){var n=this[t+"Color"],r=this[t+"Image"],i=this.viewportTransform,s=this[t+"Vpt"];if(n||r){if(n){e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=n.toLive?n.toLive(e,this):n,s&&e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);var o=n.gradientTransform||n.patternTransform;o&&e.transform(o[0],o[1],o[2],o[3],o[4],o[5]),e.fill(),e.restore()}r&&(e.save(),s&&e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),r.render(e),e.restore())}},_renderBackground:function(e){this._renderBackgroundOrOverlay(e,"background")},_renderOverlay:function(e){this._renderBackgroundOrOverlay(e,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new i.Point(this.width/2,this.height/2)},centerObjectH:function(e){return this._centerObject(e,new i.Point(this.getCenterPoint().x,e.getCenterPoint().y))},centerObjectV:function(e){return this._centerObject(e,new i.Point(e.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(e){var t=this.getCenterPoint();return this._centerObject(e,t)},viewportCenterObject:function(e){var t=this.getVpCenter();return this._centerObject(e,t)},viewportCenterObjectH:function(e){var t=this.getVpCenter();return this._centerObject(e,new i.Point(t.x,e.getCenterPoint().y)),this},viewportCenterObjectV:function(e){var t=this.getVpCenter();return this._centerObject(e,new i.Point(e.getCenterPoint().x,t.y))},getVpCenter:function(){var e=this.getCenterPoint(),t=o(this.viewportTransform);return s(e,t)},_centerObject:function(e,t){return e.setPositionByOrigin(t,"center","center"),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(e){return this.toDatalessObject(e)},toObject:function(e){return this._toObjectMethod("toObject",e)},toDatalessObject:function(e){return this._toObjectMethod("toDatalessObject",e)},_toObjectMethod:function(t,n){var r=this.clipPath,s={version:i.version,objects:this._toObjects(t,n)};return r&&!r.excludeFromExport&&(s.clipPath=this._toObject(this.clipPath,t,n)),e(s,this.__serializeBgOverlay(t,n)),i.util.populateWithProperties(this,s,n),s},_toObjects:function(e,t){return this._objects.filter(function(e){return!e.excludeFromExport}).map(function(n){return this._toObject(n,e,t)},this)},_toObject:function(e,t,n){var r;this.includeDefaultValues||(r=e.includeDefaultValues,e.includeDefaultValues=!1);var i=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=r),i},__serializeBgOverlay:function(e,t){var n={},r=this.backgroundImage,i=this.overlayImage,s=this.backgroundColor,o=this.overlayColor;return s&&s.toObject?s.excludeFromExport||(n.background=s.toObject(t)):s&&(n.background=s),o&&o.toObject?o.excludeFromExport||(n.overlay=o.toObject(t)):o&&(n.overlay=o),r&&!r.excludeFromExport&&(n.backgroundImage=this._toObject(r,e,t)),i&&!i.excludeFromExport&&(n.overlayImage=this._toObject(i,e,t)),n},svgViewportTransformation:!0,toSVG:function(e,t){e||(e={}),e.reviver=t;var n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",t),this._setSVGObjects(n,t),this.clipPath&&n.push("</g>\n"),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",t),n.push("</svg>"),n.join("")},_setSVGPreamble:function(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(e,t){var n,s=t.width||this.width,o=t.height||this.height,a='viewBox="0 0 '+this.width+" "+this.height+'" ',l=i.Object.NUM_FRACTION_DIGITS;t.viewBox?a='viewBox="'+t.viewBox.x+" "+t.viewBox.y+" "+t.viewBox.width+" "+t.viewBox.height+'" ':this.svgViewportTransformation&&(n=this.viewportTransform,a='viewBox="'+r(-n[4]/n[0],l)+" "+r(-n[5]/n[3],l)+" "+r(this.width/n[0],l)+" "+r(this.height/n[3],l)+'" '),e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',s,'" ','height="',o,'" ',a,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",i.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),"</defs>\n")},createSVGClipPathMarkup:function(e){var t=this.clipPath;return t?(t.clipPathId="CLIPPATH_"+i.Object.__uid++,'<clipPath id="'+t.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(e.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var e=this;return["background","overlay"].map(function(t){var n=e[t+"Color"];if(n&&n.toLive){var r=e[t+"Vpt"],s=e.viewportTransform,o={width:e.width/(r?s[0]:1),height:e.height/(r?s[3]:1)};return n.toSVG(o,{additionalTransform:r?i.util.matrixToSVG(s):""})}}).join("")},createSVGFontFacesMarkup:function(){var e,t,n,r,s,o,a,l,c="",u={},h=i.fontPaths,f=[];for(this._objects.forEach(function e(t){f.push(t),t._objects&&t._objects.forEach(e)}),a=0,l=f.length;a<l;a++)if(t=(e=f[a]).fontFamily,-1!==e.type.indexOf("text")&&!u[t]&&h[t]&&(u[t]=!0,e.styles))for(s in n=e.styles)for(o in r=n[s])!u[t=r[o].fontFamily]&&h[t]&&(u[t]=!0);for(var d in u)c+=["\t\t@font-face {\n","\t\t\tfont-family: '",d,"';\n","\t\t\tsrc: url('",h[d],"');\n","\t\t}\n"].join("");return c&&(c=['\t<style type="text/css">',"<![CDATA[\n",c,"]]>","</style>\n"].join("")),c},_setSVGObjects:function(e,t){var n,r,i,s=this._objects;for(r=0,i=s.length;r<i;r++)(n=s[r]).excludeFromExport||this._setSVGObject(e,n,t)},_setSVGObject:function(e,t,n){e.push(t.toSVG(n))},_setSVGBgOverlayImage:function(e,t,n){this[t]&&!this[t].excludeFromExport&&this[t].toSVG&&e.push(this[t].toSVG(n))},_setSVGBgOverlayColor:function(e,t){var n=this[t+"Color"],r=this.viewportTransform,s=this.width,o=this.height;if(n)if(n.toLive){var a=n.repeat,l=i.util.invertTransform(r),c=this[t+"Vpt"]?i.util.matrixToSVG(l):"";e.push('<rect transform="'+c+" translate(",s/2,",",o/2,')"',' x="',n.offsetX-s/2,'" y="',n.offsetY-o/2,'" ','width="',"repeat-y"===a||"no-repeat"===a?n.source.width:s,'" height="',"repeat-x"===a||"no-repeat"===a?n.source.height:o,'" fill="url(#SVGID_'+n.id+')"',"></rect>\n")}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',"></rect>\n")},sendToBack:function(e){if(!e)return this;var t,r,i,s=this._activeObject;if(e===s&&"activeSelection"===e.type)for(t=(i=s._objects).length;t--;)r=i[t],n(this._objects,r),this._objects.unshift(r);else n(this._objects,e),this._objects.unshift(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(e){if(!e)return this;var t,r,i,s=this._activeObject;if(e===s&&"activeSelection"===e.type)for(i=s._objects,t=0;t<i.length;t++)r=i[t],n(this._objects,r),this._objects.push(r);else n(this._objects,e),this._objects.push(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(e,t){if(!e)return this;var r,i,s,o,a,l=this._activeObject,c=0;if(e===l&&"activeSelection"===e.type)for(a=l._objects,r=0;r<a.length;r++)i=a[r],(s=this._objects.indexOf(i))>0+c&&(o=s-1,n(this._objects,i),this._objects.splice(o,0,i)),c++;else 0!==(s=this._objects.indexOf(e))&&(o=this._findNewLowerIndex(e,s,t),n(this._objects,e),this._objects.splice(o,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(e,t,n){var r,i;if(n)for(r=t,i=t-1;i>=0;--i){if(e.intersectsWithObject(this._objects[i])||e.isContainedWithinObject(this._objects[i])||this._objects[i].isContainedWithinObject(e)){r=i;break}}else r=t-1;return r},bringForward:function(e,t){if(!e)return this;var r,i,s,o,a,l=this._activeObject,c=0;if(e===l&&"activeSelection"===e.type)for(r=(a=l._objects).length;r--;)i=a[r],(s=this._objects.indexOf(i))<this._objects.length-1-c&&(o=s+1,n(this._objects,i),this._objects.splice(o,0,i)),c++;else(s=this._objects.indexOf(e))!==this._objects.length-1&&(o=this._findNewUpperIndex(e,s,t),n(this._objects,e),this._objects.splice(o,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(e,t,n){var r,i,s;if(n)for(r=t,i=t+1,s=this._objects.length;i<s;++i){if(e.intersectsWithObject(this._objects[i])||e.isContainedWithinObject(this._objects[i])||this._objects[i].isContainedWithinObject(e)){r=i;break}}else r=t+1;return r},moveTo:function(e,t){return n(this._objects,e),this._objects.splice(t,0,e),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(i.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(e){e.dispose&&e.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),i.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),i.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),e(i.StaticCanvas.prototype,i.Observable),e(i.StaticCanvas.prototype,i.Collection),e(i.StaticCanvas.prototype,i.DataURLExporter),e(i.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(e){var t=l();if(!t||!t.getContext)return null;var n=t.getContext("2d");return n&&"setLineDash"===e?"undefined"!==typeof n.setLineDash:null}}),i.StaticCanvas.prototype.toJSON=i.StaticCanvas.prototype.toObject,i.isLikelyNode&&(i.StaticCanvas.prototype.createPNGStream=function(){var e=a(this.lowerCanvasEl);return e&&e.createPNGStream()},i.StaticCanvas.prototype.createJPEGStream=function(e){var t=a(this.lowerCanvasEl);return t&&t.createJPEGStream(e)})}}(),i.BaseBrush=i.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(e){var t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])},_setShadow:function(){if(this.shadow){var e=this.canvas,t=this.shadow,n=e.contextTop,r=e.getZoom();e&&e._isRetinaScaling()&&(r*=i.devicePixelRatio),n.shadowColor=t.color,n.shadowBlur=t.blur*r,n.shadowOffsetX=t.offsetX*r,n.shadowOffsetY=t.offsetY*r}},needsFullRender:function(){return new i.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0},_isOutSideCanvas:function(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}),i.PencilBrush=i.util.createClass(i.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(e){this.canvas=e,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(e,t,n){var r=t.midPointFrom(n);return e.quadraticCurveTo(t.x,t.y,r.x,r.y),r},onMouseDown:function(e,t){this.canvas._isMainEvent(t.e)&&(this.drawStraightLine=t.e[this.straightLineKey],this._prepareForDrawing(e),this._captureDrawingPath(e),this._render())},onMouseMove:function(e,t){if(this.canvas._isMainEvent(t.e)&&(this.drawStraightLine=t.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(e))&&this._captureDrawingPath(e)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var n=this._points,r=n.length,i=this.canvas.contextTop;this._saveAndTransform(i),this.oldEnd&&(i.beginPath(),i.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(i,n[r-2],n[r-1],!0),i.stroke(),i.restore()}},onMouseUp:function(e){return!this.canvas._isMainEvent(e.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(e){var t=new i.Point(e.x,e.y);this._reset(),this._addPoint(t),this.canvas.contextTop.moveTo(t.x,t.y)},_addPoint:function(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(e){var t=new i.Point(e.x,e.y);return this._addPoint(t)},_render:function(e){var t,n,r=this._points[0],s=this._points[1];if(e=e||this.canvas.contextTop,this._saveAndTransform(e),e.beginPath(),2===this._points.length&&r.x===s.x&&r.y===s.y){var o=this.width/1e3;r=new i.Point(r.x,r.y),s=new i.Point(s.x,s.y),r.x-=o,s.x+=o}for(e.moveTo(r.x,r.y),t=1,n=this._points.length;t<n;t++)this._drawSegment(e,r,s),r=this._points[t],s=this._points[t+1];e.lineTo(r.x,r.y),e.stroke(),e.restore()},convertPointsToSVGPath:function(e){var t=this.width/1e3;return i.util.getSmoothPathFromPoints(e,t)},_isEmptySVGPath:function(e){return"M 0 0 Q 0 0 0 0 L 0 0"===i.util.joinPath(e)},createPath:function(e){var t=new i.Path(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new i.Shadow(this.shadow)),t},decimatePoints:function(e,t){if(e.length<=2)return e;var n,r=this.canvas.getZoom(),i=Math.pow(t/r,2),s=e.length-1,o=e[0],a=[o];for(n=1;n<s-1;n++)Math.pow(o.x-e[n].x,2)+Math.pow(o.y-e[n].y,2)>=i&&(o=e[n],a.push(o));return a.push(e[s]),a},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var e=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(e))this.canvas.requestRenderAll();else{var t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}}}),i.CircleBrush=i.util.createClass(i.BaseBrush,{width:10,initialize:function(e){this.canvas=e,this.points=[]},drawDot:function(e){var t=this.addPoint(e),n=this.canvas.contextTop;this._saveAndTransform(n),this.dot(n,t),n.restore()},dot:function(e,t){e.fillStyle=t.fill,e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),e.closePath(),e.fill()},onMouseDown:function(e){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(e)},_render:function(){var e,t,n=this.canvas.contextTop,r=this.points;for(this._saveAndTransform(n),e=0,t=r.length;e<t;e++)this.dot(n,r[e]);n.restore()},onMouseMove:function(e){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(e),this._render()):this.drawDot(e))},onMouseUp:function(){var e,t,n=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var r=[];for(e=0,t=this.points.length;e<t;e++){var s=this.points[e],o=new i.Circle({radius:s.radius,left:s.x,top:s.y,originX:"center",originY:"center",fill:s.fill});this.shadow&&(o.shadow=new i.Shadow(this.shadow)),r.push(o)}var a=new i.Group(r);a.canvas=this.canvas,this.canvas.fire("before:path:created",{path:a}),this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=n,this.canvas.requestRenderAll()},addPoint:function(e){var t=new i.Point(e.x,e.y),n=i.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,r=new i.Color(this.color).setAlpha(i.util.getRandomInt(0,100)/100).toRgba();return t.radius=n,t.fill=r,this.points.push(t),t}}),i.SprayBrush=i.util.createClass(i.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(e){this.canvas=e,this.sprayChunks=[]},onMouseDown:function(e){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(e),this.render(this.sprayChunkPoints)},onMouseMove:function(e){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||(this.addSprayChunk(e),this.render(this.sprayChunkPoints))},onMouseUp:function(){var e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var t=[],n=0,r=this.sprayChunks.length;n<r;n++)for(var s=this.sprayChunks[n],o=0,a=s.length;o<a;o++){var l=new i.Rect({width:s[o].width,height:s[o].width,left:s[o].x+1,top:s[o].y+1,originX:"center",originY:"center",fill:this.color});t.push(l)}this.optimizeOverlapping&&(t=this._getOptimizedRects(t));var c=new i.Group(t);this.shadow&&c.set("shadow",new i.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.requestRenderAll()},_getOptimizedRects:function(e){var t,n,r,i={};for(n=0,r=e.length;n<r;n++)i[t=e[n].left+""+e[n].top]||(i[t]=e[n]);var s=[];for(t in i)s.push(i[t]);return s},render:function(e){var t,n,r=this.canvas.contextTop;for(r.fillStyle=this.color,this._saveAndTransform(r),t=0,n=e.length;t<n;t++){var i=e[t];"undefined"!==typeof i.opacity&&(r.globalAlpha=i.opacity),r.fillRect(i.x,i.y,i.width,i.width)}r.restore()},_render:function(){var e,t,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),e=0,t=this.sprayChunks.length;e<t;e++)this.render(this.sprayChunks[e]);n.restore()},addSprayChunk:function(e){this.sprayChunkPoints=[];var t,n,r,s,o=this.width/2;for(s=0;s<this.density;s++){t=i.util.getRandomInt(e.x-o,e.x+o),n=i.util.getRandomInt(e.y-o,e.y+o),r=this.dotWidthVariance?i.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var a=new i.Point(t,n);a.width=r,this.randomOpacity&&(a.opacity=i.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),i.PatternBrush=i.util.createClass(i.PencilBrush,{getPatternSrc:function(){var e=i.util.createCanvasElement(),t=e.getContext("2d");return e.width=e.height=25,t.fillStyle=this.color,t.beginPath(),t.arc(10,10,10,0,2*Math.PI,!1),t.closePath(),t.fill(),e},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(e){return e.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(e){this.callSuper("_setBrushStyles",e),e.strokeStyle=this.getPattern(e)},createPath:function(e){var t=this.callSuper("createPath",e),n=t._getLeftTopCoords().scalarAdd(t.strokeWidth/2);return t.stroke=new i.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-n.x,offsetY:-n.y}),t}}),function(){var e=i.util.getPointer,t=i.util.degreesToRadians,n=i.util.isTouchEvent;for(var r in i.Canvas=i.util.createClass(i.StaticCanvas,{initialize:function(e,t){t||(t={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=i.PencilBrush&&new i.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var e,t,n,r=this.getActiveObjects();if(r.length>0&&!this.preserveObjectStacking){t=[],n=[];for(var i=0,s=this._objects.length;i<s;i++)e=this._objects[i],-1===r.indexOf(e)?t.push(e):n.push(e);r.length>1&&(this._activeObject._objects=n),t.push.apply(t,n)}else t=this._objects;return t},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var e=this.contextContainer;return this.renderCanvas(e,this._chooseObjectsToRender()),this},renderTopLayer:function(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()},renderTop:function(){var e=this.contextTop;return this.clearContext(e),this.renderTopLayer(e),this.fire("after:render"),this},_normalizePointer:function(e,t){var n=e.calcTransformMatrix(),r=i.util.invertTransform(n),s=this.restorePointerVpt(t);return i.util.transformPoint(s,r)},isTargetTransparent:function(e,t,n){if(e.shouldCache()&&e._cacheCanvas&&e!==this._activeObject){var r=this._normalizePointer(e,{x:t,y:n}),s=Math.max(e.cacheTranslationX+r.x*e.zoomX,0),o=Math.max(e.cacheTranslationY+r.y*e.zoomY,0);return i.util.isTransparent(e._cacheContext,Math.round(s),Math.round(o),this.targetFindTolerance)}var a=this.contextCache,l=e.selectionBackgroundColor,c=this.viewportTransform;return e.selectionBackgroundColor="",this.clearContext(a),a.save(),a.transform(c[0],c[1],c[2],c[3],c[4],c[5]),e.render(a),a.restore(),e.selectionBackgroundColor=l,i.util.isTransparent(a,t,n,this.targetFindTolerance)},_isSelectionKeyPressed:function(e){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(t){return!0===e[t]}):e[this.selectionKey]},_shouldClearSelection:function(e,t){var n=this.getActiveObjects(),r=this._activeObject;return!t||t&&r&&n.length>1&&-1===n.indexOf(t)&&r!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&r&&r!==t},_shouldCenterTransform:function(e,t,n){var r;if(e)return"scale"===t||"scaleX"===t||"scaleY"===t||"resizing"===t?r=this.centeredScaling||e.centeredScaling:"rotate"===t&&(r=this.centeredRotation||e.centeredRotation),r?!n:n},_getOriginFromCorner:function(e,t){var n={x:e.originX,y:e.originY};return"ml"===t||"tl"===t||"bl"===t?n.x="right":"mr"!==t&&"tr"!==t&&"br"!==t||(n.x="left"),"tl"===t||"mt"===t||"tr"===t?n.y="bottom":"bl"!==t&&"mb"!==t&&"br"!==t||(n.y="top"),n},_getActionFromCorner:function(e,t,n,r){if(!t||!e)return"drag";var i=r.controls[t];return i.getActionName(n,i,r)},_setupCurrentTransform:function(e,n,r){if(n){var s=this.getPointer(e),o=n.__corner,a=n.controls[o],l=r&&o?a.getActionHandler(e,n,a):i.controlsUtils.dragHandler,c=this._getActionFromCorner(r,o,e,n),u=this._getOriginFromCorner(n,o),h=e[this.centeredKey],f={target:n,action:c,actionHandler:l,corner:o,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:s.x-n.left,offsetY:s.y-n.top,originX:u.x,originY:u.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:t(n.angle),width:n.width*n.scaleX,shiftKey:e.shiftKey,altKey:h,original:i.util.saveObjectTransform(n)};this._shouldCenterTransform(n,c,h)&&(f.originX="center",f.originY="center"),f.original.originX=u.x,f.original.originY=u.y,this._currentTransform=f,this._beforeTransform(e)}},setCursor:function(e){this.upperCanvasEl.style.cursor=e},_drawSelection:function(e){var t=this._groupSelector,n=new i.Point(t.ex,t.ey),r=i.util.transformPoint(n,this.viewportTransform),s=new i.Point(t.ex+t.left,t.ey+t.top),o=i.util.transformPoint(s,this.viewportTransform),a=Math.min(r.x,o.x),l=Math.min(r.y,o.y),c=Math.max(r.x,o.x),u=Math.max(r.y,o.y),h=this.selectionLineWidth/2;this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(a,l,c-a,u-l)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,a+=h,l+=h,c-=h,u-=h,i.Object.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(a,l,c-a,u-l))},findTarget:function(e,t){if(!this.skipTargetFind){var r,i,s=this.getPointer(e,!0),o=this._activeObject,a=this.getActiveObjects(),l=n(e),c=a.length>1&&!t||1===a.length;if(this.targets=[],c&&o._findTargetCorner(s,l))return o;if(a.length>1&&!t&&o===this._searchPossibleTargets([o],s))return o;if(1===a.length&&o===this._searchPossibleTargets([o],s)){if(!this.preserveObjectStacking)return o;r=o,i=this.targets,this.targets=[]}var u=this._searchPossibleTargets(this._objects,s);return e[this.altSelectionKey]&&u&&r&&u!==r&&(u=r,this.targets=i),u}},_checkTarget:function(e,t,n){if(t&&t.visible&&t.evented&&t.containsPoint(e)){if(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing)return!0;if(!this.isTargetTransparent(t,n.x,n.y))return!0}},_searchPossibleTargets:function(e,t){for(var n,r,s=e.length;s--;){var o=e[s],a=o.group?this._normalizePointer(o.group,t):t;if(this._checkTarget(a,o,t)){(n=e[s]).subTargetCheck&&n instanceof i.Group&&(r=this._searchPossibleTargets(n._objects,t))&&this.targets.push(r);break}}return n},restorePointerVpt:function(e){return i.util.transformPoint(e,i.util.invertTransform(this.viewportTransform))},getPointer:function(t,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var r,i=e(t),s=this.upperCanvasEl,o=s.getBoundingClientRect(),a=o.width||0,l=o.height||0;a&&l||("top"in o&&"bottom"in o&&(l=Math.abs(o.top-o.bottom)),"right"in o&&"left"in o&&(a=Math.abs(o.right-o.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,n||(i=this.restorePointerVpt(i));var c=this.getRetinaScaling();return 1!==c&&(i.x/=c,i.y/=c),r=0===a||0===l?{width:1,height:1}:{width:s.width/a,height:s.height/l},{x:i.x*r.width,y:i.y*r.height}},_createUpperCanvas:function(){var e=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),t=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),i.util.addClass(n,"upper-canvas "+e),this.wrapperEl.appendChild(n),this._copyCanvasStyle(t,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=i.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),i.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),i.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(e){var t=this.width||e.width,n=this.height||e.height;i.util.setStyle(e,{position:"absolute",width:t+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),e.width=t,e.height=n,i.util.makeElementUnselectable(e)},_copyCanvasStyle:function(e,t){t.style.cssText=e.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var e=this._activeObject;return e?"activeSelection"===e.type&&e._objects?e._objects.slice(0):[e]:[]},_onObjectRemoved:function(e){e===this._activeObject&&(this.fire("before:selection:cleared",{target:e}),this._discardActiveObject(),this.fire("selection:cleared",{target:e}),e.fire("deselected")),e===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",e)},_fireSelectionEvents:function(e,t){var n=!1,r=this.getActiveObjects(),i=[],s=[];e.forEach(function(e){-1===r.indexOf(e)&&(n=!0,e.fire("deselected",{e:t,target:e}),s.push(e))}),r.forEach(function(r){-1===e.indexOf(r)&&(n=!0,r.fire("selected",{e:t,target:r}),i.push(r))}),e.length>0&&r.length>0?n&&this.fire("selection:updated",{e:t,selected:i,deselected:s}):r.length>0?this.fire("selection:created",{e:t,selected:i}):e.length>0&&this.fire("selection:cleared",{e:t,deselected:s})},setActiveObject:function(e,t){var n=this.getActiveObjects();return this._setActiveObject(e,t),this._fireSelectionEvents(n,t),this},_setActiveObject:function(e,t){return this._activeObject!==e&&(!!this._discardActiveObject(t,e)&&(!e.onSelect({e:t})&&(this._activeObject=e,!0)))},_discardActiveObject:function(e,t){var n=this._activeObject;if(n){if(n.onDeselect({e:e,object:t}))return!1;this._activeObject=null}return!0},discardActiveObject:function(e){var t=this.getActiveObjects(),n=this.getActiveObject();return t.length&&this.fire("before:selection:cleared",{target:n,e:e}),this._discardActiveObject(e),this._fireSelectionEvents(t,e),this},dispose:function(){var e=this.wrapperEl;return this.removeListeners(),e.removeChild(this.upperCanvasEl),e.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(e){i.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this)),e.parentNode&&e.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,i.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(e){var t=this._activeObject;t&&t._renderControls(e)},_toObject:function(e,t,n){var r=this._realizeGroupTransformOnObject(e),i=this.callSuper("_toObject",e,t,n);return this._unwindGroupTransformOnObject(e,r),i},_realizeGroupTransformOnObject:function(e){if(e.group&&"activeSelection"===e.group.type&&this._activeObject===e.group){var t={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(n){t[n]=e[n]}),i.util.addTransformToObject(e,this._activeObject.calcOwnMatrix()),t}return null},_unwindGroupTransformOnObject:function(e,t){t&&e.set(t)},_setSVGObject:function(e,t,n){var r=this._realizeGroupTransformOnObject(t);this.callSuper("_setSVGObject",e,t,n),this._unwindGroupTransformOnObject(t,r)},setViewportTransform:function(e){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),i.StaticCanvas.prototype.setViewportTransform.call(this,e)}}),i.StaticCanvas)"prototype"!==r&&(i.Canvas[r]=i.StaticCanvas[r])}(),function(){var e=i.util.addListener,t=i.util.removeListener,n={passive:!1};function r(e,t){return e.button&&e.button===t-1}i.util.object.extend(i.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(e,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(e,t){var r=this.upperCanvasEl,s=this._getEventPrefix();e(i.window,"resize",this._onResize),e(r,s+"down",this._onMouseDown),e(r,s+"move",this._onMouseMove,n),e(r,s+"out",this._onMouseOut),e(r,s+"enter",this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"dblclick",this._onDoubleClick),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,n),"undefined"!==typeof eventjs&&t in eventjs&&(eventjs[t](r,"gesture",this._onGesture),eventjs[t](r,"drag",this._onDrag),eventjs[t](r,"orientation",this._onOrientationChange),eventjs[t](r,"shake",this._onShake),eventjs[t](r,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(t,"remove");var e=this._getEventPrefix();t(i.document,e+"up",this._onMouseUp),t(i.document,"touchend",this._onTouchEnd,n),t(i.document,e+"move",this._onMouseMove,n),t(i.document,"touchmove",this._onMouseMove,n)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(e,t){this.__onTransformGesture&&this.__onTransformGesture(e,t)},_onDrag:function(e,t){this.__onDrag&&this.__onDrag(e,t)},_onMouseWheel:function(e){this.__onMouseWheel(e)},_onMouseOut:function(e){var t=this._hoveredTarget;this.fire("mouse:out",{target:t,e:e}),this._hoveredTarget=null,t&&t.fire("mouseout",{e:e});var n=this;this._hoveredTargets.forEach(function(r){n.fire("mouse:out",{target:t,e:e}),r&&t.fire("mouseout",{e:e})}),this._hoveredTargets=[]},_onMouseEnter:function(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",{target:null,e:e}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(e,t){this.__onOrientationChange&&this.__onOrientationChange(e,t)},_onShake:function(e,t){this.__onShake&&this.__onShake(e,t)},_onLongPress:function(e,t){this.__onLongPress&&this.__onLongPress(e,t)},_onDragOver:function(e){e.preventDefault();var t=this._simpleEventHandler("dragover",e);this._fireEnterLeaveEvents(t,e)},_onDrop:function(e){return this._simpleEventHandler("drop:before",e),this._simpleEventHandler("drop",e)},_onContextMenu:function(e){return this.stopContextMenu&&(e.stopPropagation(),e.preventDefault()),!1},_onDoubleClick:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData(e)},getPointerId:function(e){var t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1},_isMainEvent:function(e){return!0===e.isPrimary||!1!==e.isPrimary&&("touchend"===e.type&&0===e.touches.length||(!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId))},_onTouchStart:function(r){r.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(r)),this.__onMouseDown(r),this._resetTransformEventData();var s=this.upperCanvasEl,o=this._getEventPrefix();e(i.document,"touchend",this._onTouchEnd,n),e(i.document,"touchmove",this._onMouseMove,n),t(s,o+"down",this._onMouseDown)},_onMouseDown:function(r){this.__onMouseDown(r),this._resetTransformEventData();var s=this.upperCanvasEl,o=this._getEventPrefix();t(s,o+"move",this._onMouseMove,n),e(i.document,o+"up",this._onMouseUp),e(i.document,o+"move",this._onMouseMove,n)},_onTouchEnd:function(r){if(!(r.touches.length>0)){this.__onMouseUp(r),this._resetTransformEventData(),this.mainTouchId=null;var s=this._getEventPrefix();t(i.document,"touchend",this._onTouchEnd,n),t(i.document,"touchmove",this._onMouseMove,n);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){e(o.upperCanvasEl,s+"down",o._onMouseDown),o._willAddMouseDown=0},400)}},_onMouseUp:function(r){this.__onMouseUp(r),this._resetTransformEventData();var s=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(r)&&(t(i.document,o+"up",this._onMouseUp),t(i.document,o+"move",this._onMouseMove,n),e(s,o+"move",this._onMouseMove,n))},_onMouseMove:function(e){!this.allowTouchScrolling&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)},_onResize:function(){this.calcOffset()},_shouldRender:function(e){var t=this._activeObject;return!!(!!t!==!!e||t&&e&&t!==e)||(t&&t.isEditing,!1)},__onMouseUp:function(e){var t,n=this._currentTransform,s=this._groupSelector,o=!1,a=!s||0===s.left&&0===s.top;if(this._cacheTransformEventData(e),t=this._target,this._handleEvent(e,"up:before"),r(e,3))this.fireRightClick&&this._handleEvent(e,"up",3,a);else{if(r(e,2))return this.fireMiddleClick&&this._handleEvent(e,"up",2,a),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(e);else if(this._isMainEvent(e)){if(n&&(this._finalizeCurrentTransform(e),o=n.actionPerformed),!a){var l=t===this._activeObject;this._maybeGroupObjects(e),o||(o=this._shouldRender(t)||!l&&t===this._activeObject)}var c,u;if(t){if(c=t._findTargetCorner(this.getPointer(e,!0),i.util.isTouchEvent(e)),t.selectable&&t!==this._activeObject&&"up"===t.activeOn)this.setActiveObject(t,e),o=!0;else{var h=t.controls[c],f=h&&h.getMouseUpHandler(e,t,h);f&&f(e,n,(u=this.getPointer(e)).x,u.y)}t.isMoving=!1}if(n&&(n.target!==t||n.corner!==c)){var d=n.target&&n.target.controls[n.corner],p=d&&d.getMouseUpHandler(e,t,h);u=u||this.getPointer(e),p&&p(e,n,u.x,u.y)}this._setCursorFromEvent(e,t),this._handleEvent(e,"up",1,a),this._groupSelector=null,this._currentTransform=null,t&&(t.__corner=0),o?this.requestRenderAll():a||this.renderTop()}}},_simpleEventHandler:function(e,t){var n=this.findTarget(t),r=this.targets,i={e:t,target:n,subTargets:r};if(this.fire(e,i),n&&n.fire(e,i),!r)return n;for(var s=0;s<r.length;s++)r[s].fire(e,i);return n},_handleEvent:function(e,t,n,r){var i=this._target,s=this.targets||[],o={e:e,target:i,subTargets:s,button:n||1,isClick:r||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===t&&(o.currentTarget=this.findTarget(e),o.currentSubTargets=this.targets),this.fire("mouse:"+t,o),i&&i.fire("mouse"+t,o);for(var a=0;a<s.length;a++)s[a].fire("mouse"+t,o)},_finalizeCurrentTransform:function(e){var t=this._currentTransform,n=t.target,r={e:e,target:n,transform:t,action:t.action};n._scaling&&(n._scaling=!1),n.setCoords(),(t.actionPerformed||this.stateful&&n.hasStateChanged())&&this._fire("modified",r)},_onMouseDownInDrawingMode:function(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(e).requestRenderAll();var t=this.getPointer(e);this.freeDrawingBrush.onMouseDown(t,{e:e,pointer:t}),this._handleEvent(e,"down")},_onMouseMoveInDrawingMode:function(e){if(this._isCurrentlyDrawing){var t=this.getPointer(e);this.freeDrawingBrush.onMouseMove(t,{e:e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")},_onMouseUpInDrawingMode:function(e){var t=this.getPointer(e);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:e,pointer:t}),this._handleEvent(e,"up")},__onMouseDown:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"down:before");var t=this._target;if(r(e,3))this.fireRightClick&&this._handleEvent(e,"down",3);else if(r(e,2))this.fireMiddleClick&&this._handleEvent(e,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(e);else if(this._isMainEvent(e)&&!this._currentTransform){var n=this._pointer;this._previousPointer=n;var s=this._shouldRender(t),o=this._shouldGroup(e,t);if(this._shouldClearSelection(e,t)?this.discardActiveObject(e):o&&(this._handleGrouping(e,t),t=this._activeObject),!this.selection||t&&(t.selectable||t.isEditing||t===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),t){var a=t===this._activeObject;t.selectable&&"down"===t.activeOn&&this.setActiveObject(t,e);var l=t._findTargetCorner(this.getPointer(e,!0),i.util.isTouchEvent(e));if(t.__corner=l,t===this._activeObject&&(l||!o)){this._setupCurrentTransform(e,t,a);var c=t.controls[l],u=(n=this.getPointer(e),c&&c.getMouseDownHandler(e,t,c));u&&u(e,this._currentTransform,n.x,n.y)}}this._handleEvent(e,"down"),(s||o)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(e){this._resetTransformEventData(),this._pointer=this.getPointer(e,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)||null},_beforeTransform:function(e){var t=this._currentTransform;this.stateful&&t.target.saveState(),this.fire("before:transform",{e:e,transform:t})},__onMouseMove:function(e){var t,n;if(this._handleEvent(e,"move:before"),this._cacheTransformEventData(e),this.isDrawingMode)this._onMouseMoveInDrawingMode(e);else if(this._isMainEvent(e)){var r=this._groupSelector;r?(n=this._absolutePointer,r.left=n.x-r.ex,r.top=n.y-r.ey,this.renderTop()):this._currentTransform?this._transformObject(e):(t=this.findTarget(e)||null,this._setCursorFromEvent(e,t),this._fireOverOutEvents(t,e)),this._handleEvent(e,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(e,t){var n=this._hoveredTarget,r=this._hoveredTargets,i=this.targets,s=Math.max(r.length,i.length);this.fireSyntheticInOutEvents(e,t,{oldTarget:n,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var o=0;o<s;o++)this.fireSyntheticInOutEvents(i[o],t,{oldTarget:r[o],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(e,t){var n=this._draggedoverTarget,r=this._hoveredTargets,i=this.targets,s=Math.max(r.length,i.length);this.fireSyntheticInOutEvents(e,t,{oldTarget:n,evtOut:"dragleave",evtIn:"dragenter"});for(var o=0;o<s;o++)this.fireSyntheticInOutEvents(i[o],t,{oldTarget:r[o],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=e},fireSyntheticInOutEvents:function(e,t,n){var r,i,s,o=n.oldTarget,a=o!==e,l=n.canvasEvtIn,c=n.canvasEvtOut;a&&(r={e:t,target:e,previousTarget:o},i={e:t,target:o,nextTarget:e}),s=e&&a,o&&a&&(c&&this.fire(c,i),o.fire(n.evtOut,i)),s&&(l&&this.fire(l,r),e.fire(n.evtIn,r))},__onMouseWheel:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()},_transformObject:function(e){var t=this.getPointer(e),n=this._currentTransform;n.reset=!1,n.shiftKey=e.shiftKey,n.altKey=e[this.centeredKey],this._performTransformAction(e,n,t),n.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(e,t,n){var r=n.x,i=n.y,s=t.action,o=!1,a=t.actionHandler;a&&(o=a(e,t,r,i)),"drag"===s&&o&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||o},_fire:i.controlsUtils.fireEvent,_setCursorFromEvent:function(e,t){if(!t)return this.setCursor(this.defaultCursor),!1;var n=t.hoverCursor||this.hoverCursor,r=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,i=(!r||!r.contains(t))&&t._findTargetCorner(this.getPointer(e,!0));i?this.setCursor(this.getCornerCursor(i,t,e)):(t.subTargetCheck&&this.targets.concat().reverse().map(function(e){n=e.hoverCursor||n}),this.setCursor(n))},getCornerCursor:function(e,t,n){var r=t.controls[e];return r.cursorStyleHandler(n,r,t)}})}(),function(){var e=Math.min,t=Math.max;i.util.object.extend(i.Canvas.prototype,{_shouldGroup:function(e,t){var n=this._activeObject;return n&&this._isSelectionKeyPressed(e)&&t&&t.selectable&&this.selection&&(n!==t||"activeSelection"===n.type)&&!t.onSelect({e:e})},_handleGrouping:function(e,t){var n=this._activeObject;n.__corner||(t!==n||(t=this.findTarget(e,!0))&&t.selectable)&&(n&&"activeSelection"===n.type?this._updateActiveSelection(t,e):this._createActiveSelection(t,e))},_updateActiveSelection:function(e,t){var n=this._activeObject,r=n._objects.slice(0);n.contains(e)?(n.removeWithUpdate(e),this._hoveredTarget=e,this._hoveredTargets=this.targets.concat(),1===n.size()&&this._setActiveObject(n.item(0),t)):(n.addWithUpdate(e),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(r,t)},_createActiveSelection:function(e,t){var n=this.getActiveObjects(),r=this._createGroup(e);this._hoveredTarget=r,this._setActiveObject(r,t),this._fireSelectionEvents(n,t)},_createGroup:function(e){var t=this._objects,n=t.indexOf(this._activeObject)<t.indexOf(e)?[this._activeObject,e]:[e,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new i.ActiveSelection(n,{canvas:this})},_groupSelectedObjects:function(e){var t,n=this._collectObjects(e);1===n.length?this.setActiveObject(n[0],e):n.length>1&&(t=new i.ActiveSelection(n.reverse(),{canvas:this}),this.setActiveObject(t,e))},_collectObjects:function(n){for(var r,s=[],o=this._groupSelector.ex,a=this._groupSelector.ey,l=o+this._groupSelector.left,c=a+this._groupSelector.top,u=new i.Point(e(o,l),e(a,c)),h=new i.Point(t(o,l),t(a,c)),f=!this.selectionFullyContained,d=o===l&&a===c,p=this._objects.length;p--&&!((r=this._objects[p])&&r.selectable&&r.visible&&(f&&r.intersectsWithRect(u,h,!0)||r.isContainedWithinRect(u,h,!0)||f&&r.containsPoint(u,null,!0)||f&&r.containsPoint(h,null,!0))&&(s.push(r),d)););return s.length>1&&(s=s.filter(function(e){return!e.onSelect({e:n})})),s},_maybeGroupObjects:function(e){this.selection&&this._groupSelector&&this._groupSelectedObjects(e),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),i.util.object.extend(i.StaticCanvas.prototype,{toDataURL:function(e){e||(e={});var t=e.format||"png",n=e.quality||1,r=(e.multiplier||1)*(e.enableRetinaScaling?this.getRetinaScaling():1),s=this.toCanvasElement(r,e);return i.util.toDataURL(s,t,n)},toCanvasElement:function(e,t){e=e||1;var n=((t=t||{}).width||this.width)*e,r=(t.height||this.height)*e,s=this.getZoom(),o=this.width,a=this.height,l=s*e,c=this.viewportTransform,u=(c[4]-(t.left||0))*e,h=(c[5]-(t.top||0))*e,f=this.interactive,d=[l,0,0,l,u,h],p=this.enableRetinaScaling,g=i.util.createCanvasElement(),m=this.contextTop;return g.width=n,g.height=r,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=d,this.width=n,this.height=r,this.calcViewportBoundaries(),this.renderCanvas(g.getContext("2d"),this._objects),this.viewportTransform=c,this.width=o,this.height=a,this.calcViewportBoundaries(),this.interactive=f,this.enableRetinaScaling=p,this.contextTop=m,g}}),i.util.object.extend(i.StaticCanvas.prototype,{loadFromJSON:function(e,t,n){if(e){var r="string"===typeof e?JSON.parse(e):i.util.object.clone(e),s=this,o=r.clipPath,a=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete r.clipPath,this._enlivenObjects(r.objects,function(e){s.clear(),s._setBgOverlay(r,function(){o?s._enlivenObjects([o],function(n){s.clipPath=n[0],s.__setupCanvas.call(s,r,e,a,t)}):s.__setupCanvas.call(s,r,e,a,t)})},n),this}},__setupCanvas:function(e,t,n,r){var i=this;t.forEach(function(e,t){i.insertAt(e,t)}),this.renderOnAddRemove=n,delete e.objects,delete e.backgroundImage,delete e.overlayImage,delete e.background,delete e.overlay,this._setOptions(e),this.renderAll(),r&&r()},_setBgOverlay:function(e,t){var n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(e.backgroundImage||e.overlayImage||e.background||e.overlay){var r=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&t&&t()};this.__setBgOverlay("backgroundImage",e.backgroundImage,n,r),this.__setBgOverlay("overlayImage",e.overlayImage,n,r),this.__setBgOverlay("backgroundColor",e.background,n,r),this.__setBgOverlay("overlayColor",e.overlay,n,r)}else t&&t()},__setBgOverlay:function(e,t,n,r){var s=this;if(!t)return n[e]=!0,void(r&&r());"backgroundImage"===e||"overlayImage"===e?i.util.enlivenObjects([t],function(t){s[e]=t[0],n[e]=!0,r&&r()}):this["set"+i.util.string.capitalize(e,!0)](t,function(){n[e]=!0,r&&r()})},_enlivenObjects:function(e,t,n){e&&0!==e.length?i.util.enlivenObjects(e,function(e){t&&t(e)},null,n):t&&t([])},_toDataURL:function(e,t){this.clone(function(n){t(n.toDataURL(e))})},_toDataURLWithMultiplier:function(e,t,n){this.clone(function(r){n(r.toDataURLWithMultiplier(e,t))})},clone:function(e,t){var n=JSON.stringify(this.toJSON(t));this.cloneWithoutData(function(t){t.loadFromJSON(n,function(){e&&e(t)})})},cloneWithoutData:function(e){var t=i.util.createCanvasElement();t.width=this.width,t.height=this.height;var n=new i.Canvas(t);this.backgroundImage?(n.setBackgroundImage(this.backgroundImage.src,function(){n.renderAll(),e&&e(n)}),n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch):e&&e(n)}}),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.object.clone,i=t.util.toFixed,s=t.util.string.capitalize,o=t.util.degreesToRadians,a=!t.isLikelyNode;t.Object||(t.Object=t.util.createClass(t.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:a,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(e){e&&this.setOptions(e)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=t.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(e){var n=t.perfLimitSizeTotal,r=e.width,i=e.height,s=t.maxCacheSideLimit,o=t.minCacheSideLimit;if(r<=s&&i<=s&&r*i<=n)return r<o&&(e.width=o),i<o&&(e.height=o),e;var a=r/i,l=t.util.limitDimsByArea(a,n),c=t.util.capValue,u=c(o,l.x,s),h=c(o,l.y,s);return r>u&&(e.zoomX/=r/u,e.width=u,e.capped=!0),i>h&&(e.zoomY/=i/h,e.height=h,e.capped=!0),e},_getCacheCanvasDimensions:function(){var e=this.getTotalObjectScaling(),t=this._getTransformedDimensions(0,0),n=t.x*e.scaleX/this.scaleX,r=t.y*e.scaleY/this.scaleY;return{width:n+2,height:r+2,zoomX:e.scaleX,zoomY:e.scaleY,x:n,y:r}},_updateCacheCanvas:function(){var e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){var n=e._currentTransform.target,r=e._currentTransform.action;if(this===n&&r.slice&&"scale"===r.slice(0,5))return!1}var i,s,o=this._cacheCanvas,a=this._limitCacheSize(this._getCacheCanvasDimensions()),l=t.minCacheSideLimit,c=a.width,u=a.height,h=a.zoomX,f=a.zoomY,d=c!==this.cacheWidth||u!==this.cacheHeight,p=this.zoomX!==h||this.zoomY!==f,g=d||p,m=0,v=0,y=!1;if(d){var b=this._cacheCanvas.width,w=this._cacheCanvas.height,x=c>b||u>w;y=x||(c<.9*b||u<.9*w)&&b>l&&w>l,x&&!a.capped&&(c>l||u>l)&&(m=.1*c,v=.1*u)}return this instanceof t.Text&&this.path&&(g=!0,y=!0,m+=this.getHeightOfLine(0)*this.zoomX,v+=this.getHeightOfLine(0)*this.zoomY),!!g&&(y?(o.width=Math.ceil(c+m),o.height=Math.ceil(u+v)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,o.width,o.height)),i=a.x/2,s=a.y/2,this.cacheTranslationX=Math.round(o.width/2-i)+i,this.cacheTranslationY=Math.round(o.height/2-s)+s,this.cacheWidth=c,this.cacheHeight=u,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(h,f),this.zoomX=h,this.zoomY=f,!0)},setOptions:function(e){this._setOptions(e),this._initGradient(e.fill,"fill"),this._initGradient(e.stroke,"stroke"),this._initPattern(e.fill,"fill"),this._initPattern(e.stroke,"stroke")},transform:function(e){var t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!t);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])},toObject:function(e){var n=t.Object.NUM_FRACTION_DIGITS,r={type:this.type,version:t.version,originX:this.originX,originY:this.originY,left:i(this.left,n),top:i(this.top,n),width:i(this.width,n),height:i(this.height,n),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:i(this.strokeWidth,n),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:i(this.strokeMiterLimit,n),scaleX:i(this.scaleX,n),scaleY:i(this.scaleY,n),angle:i(this.angle,n),flipX:this.flipX,flipY:this.flipY,opacity:i(this.opacity,n),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:i(this.skewX,n),skewY:i(this.skewY,n)};return this.clipPath&&!this.clipPath.excludeFromExport&&(r.clipPath=this.clipPath.toObject(e),r.clipPath.inverted=this.clipPath.inverted,r.clipPath.absolutePositioned=this.clipPath.absolutePositioned),t.util.populateWithProperties(this,r,e),this.includeDefaultValues||(r=this._removeDefaultValues(r)),r},toDatalessObject:function(e){return this.toObject(e)},_removeDefaultValues:function(e){var n=t.util.getKlass(e.type).prototype;return n.stateProperties.forEach(function(t){"left"!==t&&"top"!==t&&(e[t]===n[t]&&delete e[t],Array.isArray(e[t])&&Array.isArray(n[t])&&0===e[t].length&&0===n[t].length&&delete e[t])}),e},toString:function(){return"#<fabric."+s(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var e=t.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(e.scaleX),scaleY:Math.abs(e.scaleY)}},getTotalObjectScaling:function(){var e=this.getObjectScaling(),t=e.scaleX,n=e.scaleY;if(this.canvas){var r=this.canvas.getZoom(),i=this.canvas.getRetinaScaling();t*=r*i,n*=r*i}return{scaleX:t,scaleY:n}},getObjectOpacity:function(){var e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e},_set:function(e,n){var r="scaleX"===e||"scaleY"===e,i=this[e]!==n,s=!1;return r&&(n=this._constrainScale(n)),"scaleX"===e&&n<0?(this.flipX=!this.flipX,n*=-1):"scaleY"===e&&n<0?(this.flipY=!this.flipY,n*=-1):"shadow"!==e||!n||n instanceof t.Shadow?"dirty"===e&&this.group&&this.group.set("dirty",n):n=new t.Shadow(n),this[e]=n,i&&(s=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(e)>-1?(this.dirty=!0,s&&this.group.set("dirty",!0)):s&&this.stateProperties.indexOf(e)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:t.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(e),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),e.restore())},renderCache:function(e){e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,e.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!==typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(e,n){if(e.save(),n.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",n.absolutePositioned){var r=t.util.invertTransform(this.calcTransformMatrix());e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}n.transform(e),e.scale(1/n.zoomX,1/n.zoomY),e.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),e.restore()},drawObject:function(e,t){var n=this.fill,r=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath),this.fill=n,this.stroke=r},_drawClipPath:function(e,t){t&&(t.canvas=this.canvas,t.shouldCache(),t._transformDone=!0,t.renderCache({forClipping:!0}),this.drawClipPathOnCache(e,t))},drawCacheOnCanvas:function(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(e){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!e&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!e){var t=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-t/2,-n/2,t,n)}return!0}return!1},_renderBackground:function(e){if(this.backgroundColor){var t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}},_setOpacity:function(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity},_setStrokeStyles:function(e,t){var n=t.stroke;n&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,n.toLive?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e,this),this._applyPatternGradientTransform(e,n)):e.strokeStyle=t.stroke)},_setFillStyles:function(e,t){var n=t.fill;n&&(n.toLive?(e.fillStyle=n.toLive(e,this),this._applyPatternGradientTransform(e,t.fill)):e.fillStyle=n)},_setClippingProperties:function(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"},_setLineDash:function(e,t){t&&0!==t.length&&(1&t.length&&t.push.apply(t,t),e.setLineDash(t))},_renderControls:function(e,n){var r,i,s,a=this.getViewportTransform(),l=this.calcTransformMatrix();i="undefined"!==typeof(n=n||{}).hasBorders?n.hasBorders:this.hasBorders,s="undefined"!==typeof n.hasControls?n.hasControls:this.hasControls,l=t.util.multiplyTransformMatrices(a,l),r=t.util.qrDecompose(l),e.save(),e.translate(r.translateX,r.translateY),e.lineWidth=1*this.borderScaleFactor,this.group||(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(r.angle-=180),e.rotate(o(this.group?r.angle:this.angle)),n.forActiveSelection||this.group?i&&this.drawBordersInGroup(e,r,n):i&&this.drawBorders(e,n),s&&this.drawControls(e,n),e.restore()},_setShadow:function(e){if(this.shadow){var n,r=this.shadow,i=this.canvas,s=i&&i.viewportTransform[0]||1,o=i&&i.viewportTransform[3]||1;n=r.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),i&&i._isRetinaScaling()&&(s*=t.devicePixelRatio,o*=t.devicePixelRatio),e.shadowColor=r.color,e.shadowBlur=r.blur*t.browserShadowBlurConstant*(s+o)*(n.scaleX+n.scaleY)/4,e.shadowOffsetX=r.offsetX*s*n.scaleX,e.shadowOffsetY=r.offsetY*o*n.scaleY}},_removeShadow:function(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)},_applyPatternGradientTransform:function(e,t){if(!t||!t.toLive)return{offsetX:0,offsetY:0};var n=t.gradientTransform||t.patternTransform,r=-this.width/2+t.offsetX||0,i=-this.height/2+t.offsetY||0;return"percentage"===t.gradientUnits?e.transform(this.width,0,0,this.height,r,i):e.transform(1,0,0,1,r,i),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:r,offsetY:i}},_renderPaintInOrder:function(e){"stroke"===this.paintFirst?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))},_render:function(){},_renderFill:function(e){this.fill&&(e.save(),this._setFillStyles(e,this),"evenodd"===this.fillRule?e.fill("evenodd"):e.fill(),e.restore())},_renderStroke:function(e){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform&&this.group){var t=this.getObjectScaling();e.scale(1/t.scaleX,1/t.scaleY)}else this.strokeUniform&&e.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}},_applyPatternForTransformedGradient:function(e,n){var r,i=this._limitCacheSize(this._getCacheCanvasDimensions()),s=t.util.createCanvasElement(),o=this.canvas.getRetinaScaling(),a=i.x/this.scaleX/o,l=i.y/this.scaleY/o;s.width=a,s.height=l,(r=s.getContext("2d")).beginPath(),r.moveTo(0,0),r.lineTo(a,0),r.lineTo(a,l),r.lineTo(0,l),r.closePath(),r.translate(a/2,l/2),r.scale(i.zoomX/this.scaleX/o,i.zoomY/this.scaleY/o),this._applyPatternGradientTransform(r,n),r.fillStyle=n.toLive(e),r.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(o*this.scaleX/i.zoomX,o*this.scaleY/i.zoomY),e.strokeStyle=r.createPattern(s,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var e=t.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",e.scaleX),this.set("scaleY",e.scaleY),this.angle=e.angle,this.skewX=e.skewX,this.skewY=0}},_removeTransformMatrix:function(e){var n=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),n=t.util.transformPoint(n,this.transformMatrix)),this.transformMatrix=null,e&&(this.scaleX*=e.scaleX,this.scaleY*=e.scaleY,this.cropX=e.cropX,this.cropY=e.cropY,n.x+=e.offsetLeft,n.y+=e.offsetTop,this.width=e.width,this.height=e.height),this.setPositionByOrigin(n,"center","center")},clone:function(e,n){var r=this.toObject(n);this.constructor.fromObject?this.constructor.fromObject(r,e):t.Object._fromObject("Object",r,e)},cloneAsImage:function(e,n){var r=this.toCanvasElement(n);return e&&e(new t.Image(r)),this},toCanvasElement:function(e){e||(e={});var n=t.util,r=n.saveObjectTransform(this),i=this.group,s=this.shadow,o=Math.abs,a=(e.multiplier||1)*(e.enableRetinaScaling?t.devicePixelRatio:1);delete this.group,e.withoutTransform&&n.resetObjectTransform(this),e.withoutShadow&&(this.shadow=null);var l,c,u,h,f=t.util.createCanvasElement(),d=this.getBoundingRect(!0,!0),p=this.shadow,g={x:0,y:0};p&&(c=p.blur,l=p.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),g.x=2*Math.round(o(p.offsetX)+c)*o(l.scaleX),g.y=2*Math.round(o(p.offsetY)+c)*o(l.scaleY)),u=d.width+g.x,h=d.height+g.y,f.width=Math.ceil(u),f.height=Math.ceil(h);var m=new t.StaticCanvas(f,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===e.format&&(m.backgroundColor="#fff"),this.setPositionByOrigin(new t.Point(m.width/2,m.height/2),"center","center");var v=this.canvas;m.add(this);var y=m.toCanvasElement(a||1,e);return this.shadow=s,this.set("canvas",v),i&&(this.group=i),this.set(r).setCoords(),m._objects=[],m.dispose(),m=null,y},toDataURL:function(e){return e||(e={}),t.util.toDataURL(this.toCanvasElement(e),e.format||"png",e.quality||1)},isType:function(e){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===e},complexity:function(){return 1},toJSON:function(e){return this.toObject(e)},rotate:function(e){var t=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return t&&this._setOriginToCenter(),this.set("angle",e),t&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(e,n){n=n||this.canvas.getPointer(e);var r=new t.Point(n.x,n.y),i=this._getLeftTopCoords();return this.angle&&(r=t.util.rotatePoint(r,i,o(-this.angle))),{x:r.x-i.x,y:r.y-i.y}},_setupCompositeOperation:function(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){t.runningAnimations&&t.runningAnimations.cancelByTarget(this)}}),t.util.createAccessors&&t.util.createAccessors(t.Object),n(t.Object.prototype,t.Observable),t.Object.NUM_FRACTION_DIGITS=2,t.Object.ENLIVEN_PROPS=["clipPath"],t.Object._fromObject=function(e,n,i,s){var o=t[e];n=r(n,!0),t.util.enlivenPatterns([n.fill,n.stroke],function(e){"undefined"!==typeof e[0]&&(n.fill=e[0]),"undefined"!==typeof e[1]&&(n.stroke=e[1]),t.util.enlivenObjectEnlivables(n,n,function(){var e=s?new o(n[s],n):new o(n);i&&i(e)})})},t.Object.__uid=0)}(t),function(){var e=i.util.degreesToRadians,t={left:-.5,center:0,right:.5},n={top:-.5,center:0,bottom:.5};i.util.object.extend(i.Object.prototype,{translateToGivenOrigin:function(e,r,s,o,a){var l,c,u,h=e.x,f=e.y;return"string"===typeof r?r=t[r]:r-=.5,"string"===typeof o?o=t[o]:o-=.5,"string"===typeof s?s=n[s]:s-=.5,"string"===typeof a?a=n[a]:a-=.5,c=a-s,((l=o-r)||c)&&(u=this._getTransformedDimensions(),h=e.x+l*u.x,f=e.y+c*u.y),new i.Point(h,f)},translateToCenterPoint:function(t,n,r){var s=this.translateToGivenOrigin(t,n,r,"center","center");return this.angle?i.util.rotatePoint(s,t,e(this.angle)):s},translateToOriginPoint:function(t,n,r){var s=this.translateToGivenOrigin(t,"center","center",n,r);return this.angle?i.util.rotatePoint(s,t,e(this.angle)):s},getCenterPoint:function(){var e=new i.Point(this.left,this.top);return this.translateToCenterPoint(e,this.originX,this.originY)},getPointByOrigin:function(e,t){var n=this.getCenterPoint();return this.translateToOriginPoint(n,e,t)},toLocalPoint:function(t,n,r){var s,o,a=this.getCenterPoint();return s="undefined"!==typeof n&&"undefined"!==typeof r?this.translateToGivenOrigin(a,"center","center",n,r):new i.Point(this.left,this.top),o=new i.Point(t.x,t.y),this.angle&&(o=i.util.rotatePoint(o,a,-e(this.angle))),o.subtractEquals(s)},setPositionByOrigin:function(e,t,n){var r=this.translateToCenterPoint(e,t,n),i=this.translateToOriginPoint(r,this.originX,this.originY);this.set("left",i.x),this.set("top",i.y)},adjustPosition:function(n){var r,s,o=e(this.angle),a=this.getScaledWidth(),l=i.util.cos(o)*a,c=i.util.sin(o)*a;r="string"===typeof this.originX?t[this.originX]:this.originX-.5,s="string"===typeof n?t[n]:n-.5,this.left+=l*(s-r),this.top+=c*(s-r),this.setCoords(),this.originX=n},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var e=this.getCenterPoint();this.originX="center",this.originY="center",this.left=e.x,this.top=e.y},_resetOrigin:function(){var e=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=e.x,this.top=e.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var e=i.util,t=e.degreesToRadians,n=e.multiplyTransformMatrices,r=e.transformPoint;e.object.extend(i.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(e,t){return t?e?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),e?this.aCoords:this.lineCoords)},getCoords:function(e,t){return n=this._getCoords(e,t),[new i.Point(n.tl.x,n.tl.y),new i.Point(n.tr.x,n.tr.y),new i.Point(n.br.x,n.br.y),new i.Point(n.bl.x,n.bl.y)];var n},intersectsWithRect:function(e,t,n,r){var s=this.getCoords(n,r);return"Intersection"===i.Intersection.intersectPolygonRectangle(s,e,t).status},intersectsWithObject:function(e,t,n){return"Intersection"===i.Intersection.intersectPolygonPolygon(this.getCoords(t,n),e.getCoords(t,n)).status||e.isContainedWithinObject(this,t,n)||this.isContainedWithinObject(e,t,n)},isContainedWithinObject:function(e,t,n){for(var r=this.getCoords(t,n),i=t?e.aCoords:e.lineCoords,s=0,o=e._getImageLines(i);s<4;s++)if(!e.containsPoint(r[s],o))return!1;return!0},isContainedWithinRect:function(e,t,n,r){var i=this.getBoundingRect(n,r);return i.left>=e.x&&i.left+i.width<=t.x&&i.top>=e.y&&i.top+i.height<=t.y},containsPoint:function(e,t,n,r){var i=this._getCoords(n,r),s=(t=t||this._getImageLines(i),this._findCrossPoints(e,t));return 0!==s&&s%2===1},isOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.getCoords(!0,e).some(function(e){return e.x<=n.x&&e.x>=t.x&&e.y<=n.y&&e.y>=t.y})||(!!this.intersectsWithRect(t,n,!0,e)||this._containsCenterOfCanvas(t,n,e))},_containsCenterOfCanvas:function(e,t,n){var r={x:(e.x+t.x)/2,y:(e.y+t.y)/2};return!!this.containsPoint(r,null,!0,n)},isPartiallyOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.intersectsWithRect(t,n,!0,e)||this.getCoords(!0,e).every(function(e){return(e.x>=n.x||e.x<=t.x)&&(e.y>=n.y||e.y<=t.y)})&&this._containsCenterOfCanvas(t,n,e)},_getImageLines:function(e){return{topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:e.br},bottomline:{o:e.br,d:e.bl},leftline:{o:e.bl,d:e.tl}}},_findCrossPoints:function(e,t){var n,r,i,s=0;for(var o in t)if(!((i=t[o]).o.y<e.y&&i.d.y<e.y)&&!(i.o.y>=e.y&&i.d.y>=e.y)&&(i.o.x===i.d.x&&i.o.x>=e.x?r=i.o.x:(n=(i.d.y-i.o.y)/(i.d.x-i.o.x),r=-(e.y-0*e.x-(i.o.y-n*i.o.x))/(0-n)),r>=e.x&&(s+=1),2===s))break;return s},getBoundingRect:function(t,n){var r=this.getCoords(t,n);return e.makeBoundingBoxFromPoints(r)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:0===e?1e-4:e},scale:function(e){return this._set("scaleX",e),this._set("scaleY",e),this.setCoords()},scaleToWidth:function(e,t){var n=this.getBoundingRect(t).width/this.getScaledWidth();return this.scale(e/this.width/n)},scaleToHeight:function(e,t){var n=this.getBoundingRect(t).height/this.getScaledHeight();return this.scale(e/this.height/n)},calcLineCoords:function(){var n=this.getViewportTransform(),i=this.padding,s=t(this.angle),o=e.cos(s)*i,a=e.sin(s)*i,l=o+a,c=o-a,u=this.calcACoords(),h={tl:r(u.tl,n),tr:r(u.tr,n),bl:r(u.bl,n),br:r(u.br,n)};return i&&(h.tl.x-=c,h.tl.y-=l,h.tr.x+=l,h.tr.y-=c,h.bl.x-=l,h.bl.y+=c,h.br.x+=c,h.br.y+=l),h},calcOCoords:function(){var e=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),r=this.getViewportTransform(),i=n(r,t),s=n(i,e),o=(s=n(s,[1/r[0],0,0,1/r[3],0,0]),this._calculateCurrentDimensions()),a={};return this.forEachControl(function(e,t,n){a[t]=e.positionHandler(o,s,n)}),a},calcACoords:function(){var e=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),i=n(t,e),s=this._getTransformedDimensions(),o=s.x/2,a=s.y/2;return{tl:r({x:-o,y:-a},i),tr:r({x:o,y:-a},i),bl:r({x:-o,y:a},i),br:r({x:o,y:a},i)}},setCoords:function(e){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),e||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return e.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var e=this.getCenterPoint();return[1,0,0,1,e.x,e.y]},transformMatrixKey:function(e){var t="_",n="";return!e&&this.group&&(n=this.group.transformMatrixKey(e)+t),n+this.top+t+this.left+t+this.scaleX+t+this.scaleY+t+this.skewX+t+this.skewY+t+this.angle+t+this.originX+t+this.originY+t+this.width+t+this.height+t+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(e){var t=this.calcOwnMatrix();if(e||!this.group)return t;var r=this.transformMatrixKey(e),i=this.matrixCache||(this.matrixCache={});return i.key===r?i.value:(this.group&&(t=n(this.group.calcTransformMatrix(!1),t)),i.key=r,i.value=t,t)},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===t)return n.value;var r=this._calcTranslateMatrix(),i={angle:this.angle,translateX:r[4],translateY:r[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=t,n.value=e.composeMatrix(i),n.value},_getNonTransformedDimensions:function(){var e=this.strokeWidth;return{x:this.width+e,y:this.height+e}},_getTransformedDimensions:function(t,n){"undefined"===typeof t&&(t=this.skewX),"undefined"===typeof n&&(n=this.skewY);var r,i,s,o=0===t&&0===n;if(this.strokeUniform?(i=this.width,s=this.height):(i=(r=this._getNonTransformedDimensions()).x,s=r.y),o)return this._finalizeDimensions(i*this.scaleX,s*this.scaleY);var a=e.sizeAfterTransform(i,s,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:n});return this._finalizeDimensions(a.x,a.y)},_finalizeDimensions:function(e,t){return this.strokeUniform?{x:e+this.strokeWidth,y:t+this.strokeWidth}:{x:e,y:t}},_calculateCurrentDimensions:function(){var e=this.getViewportTransform(),t=this._getTransformedDimensions();return r(t,e,!0).scalarAdd(2*this.padding)}})}(),i.util.object.extend(i.Object.prototype,{sendToBack:function(){return this.group?i.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?i.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(e){return this.group?i.StaticCanvas.prototype.sendBackwards.call(this.group,this,e):this.canvas&&this.canvas.sendBackwards(this,e),this},bringForward:function(e){return this.group?i.StaticCanvas.prototype.bringForward.call(this.group,this,e):this.canvas&&this.canvas.bringForward(this,e),this},moveTo:function(e){return this.group&&"activeSelection"!==this.group.type?i.StaticCanvas.prototype.moveTo.call(this.group,this,e):this.canvas&&this.canvas.moveTo(this,e),this}}),function(){function e(e,t){if(t){if(t.toLive)return e+": url(#SVGID_"+t.id+"); ";var n=new i.Color(t),r=e+": "+n.toRgb()+"; ",s=n.getAlpha();return 1!==s&&(r+=e+"-opacity: "+s.toString()+"; "),r}return e+": none; "}var t=i.util.toFixed;i.util.object.extend(i.Object.prototype,{getSvgStyles:function(t){var n=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):"none",s=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c="undefined"!==typeof this.opacity?this.opacity:"1",u=this.visible?"":" visibility: hidden;",h=t?"":this.getSvgFilter(),f=e("fill",this.fill);return[e("stroke",this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",f,"fill-rule: ",n,"; ","opacity: ",c,";",h,u].join("")},getSvgSpanStyles:function(t,n){var r="; ",i=t.fontFamily?"font-family: "+(-1===t.fontFamily.indexOf("'")&&-1===t.fontFamily.indexOf('"')?"'"+t.fontFamily+"'":t.fontFamily)+r:"",s=t.strokeWidth?"stroke-width: "+t.strokeWidth+r:"",o=(i=i,t.fontSize?"font-size: "+t.fontSize+"px"+r:""),a=t.fontStyle?"font-style: "+t.fontStyle+r:"",l=t.fontWeight?"font-weight: "+t.fontWeight+r:"",c=t.fill?e("fill",t.fill):"",u=t.stroke?e("stroke",t.stroke):"",h=this.getSvgTextDecoration(t);return h&&(h="text-decoration: "+h+r),[u,s,i,o,a,l,h,c,t.deltaY?"baseline-shift: "+-t.deltaY+"; ":"",n?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(e){return["overline","underline","line-through"].filter(function(t){return e[t.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(e,t){var n=e?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+i.util.matrixToSVG(n)+(t||"")+'" '},_setSVGBg:function(e){if(this.backgroundColor){var n=i.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',t(-this.width/2,n),'" y="',t(-this.height/2,n),'" width="',t(this.width,n),'" height="',t(this.height,n),'"></rect>\n')}},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})},toClipPathSVG:function(e){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})},_createBaseClipPathSVGMarkup:function(e,t){var n=(t=t||{}).reviver,r=t.additionalTransform||"",i=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=i,n?n(e.join("")):e.join("")},_createBaseSVGMarkup:function(e,t){var n,r,s=(t=t||{}).noStyle,o=t.reviver,a=s?"":'style="'+this.getSvgStyles()+'" ',l=t.withShadow?'style="'+this.getSvgFilter()+'" ':"",c=this.clipPath,u=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=c&&c.absolutePositioned,f=this.stroke,d=this.fill,p=this.shadow,g=[],m=e.indexOf("COMMON_PARTS"),v=t.additionalTransform;return c&&(c.clipPathId="CLIPPATH_"+i.Object.__uid++,r='<clipPath id="'+c.clipPathId+'" >\n'+c.toClipPathSVG(o)+"</clipPath>\n"),h&&g.push("<g ",l,this.getSvgCommons()," >\n"),g.push("<g ",this.getSvgTransform(!1),h?"":l+this.getSvgCommons()," >\n"),n=[a,u,s?"":this.addPaintOrder()," ",v?'transform="'+v+'" ':""].join(""),e[m]=n,d&&d.toLive&&g.push(d.toSVG(this)),f&&f.toLive&&g.push(f.toSVG(this)),p&&g.push(p.toSVG(this)),c&&g.push(r),g.push(e.join("")),g.push("</g>\n"),h&&g.push("</g>\n"),o?o(g.join("")):g.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var e=i.util.object.extend,t="stateProperties";function n(t,n,r){var i={};r.forEach(function(e){i[e]=t[e]}),e(t[n],i,!0)}function r(e,t,n){if(e===t)return!0;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var i=0,s=e.length;i<s;i++)if(!r(e[i],t[i]))return!1;return!0}if(e&&"object"===typeof e){var o,a=Object.keys(e);if(!t||"object"!==typeof t||!n&&a.length!==Object.keys(t).length)return!1;for(i=0,s=a.length;i<s;i++)if("canvas"!==(o=a[i])&&"group"!==o&&!r(e[o],t[o]))return!1;return!0}}i.util.object.extend(i.Object.prototype,{hasStateChanged:function(e){var n="_"+(e=e||t);return Object.keys(this[n]).length<this[e].length||!r(this[n],this,!0)},saveState:function(e){var r=e&&e.propertySet||t,i="_"+r;return this[i]?(n(this,i,this[r]),e&&e.stateProperties&&n(this,i,e.stateProperties),this):this.setupState(e)},setupState:function(e){var n=(e=e||{}).propertySet||t;return e.propertySet=n,this["_"+n]={},this.saveState(e),this}})}(),function(){var e=i.util.degreesToRadians;i.util.object.extend(i.Object.prototype,{_findTargetCorner:function(e,t){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var n,r,i,s=e.x,o=e.y,a=Object.keys(this.oCoords),l=a.length-1;for(this.__corner=0;l>=0;l--)if(i=a[l],this.isControlVisible(i)&&(r=this._getImageLines(t?this.oCoords[i].touchCorner:this.oCoords[i].corner),0!==(n=this._findCrossPoints({x:s,y:o},r))&&n%2===1))return this.__corner=i,i;return!1},forEachControl:function(e){for(var t in this.controls)e(this.controls[t],t,this)},_setCornerCoords:function(){var e=this.oCoords;for(var t in e){var n=this.controls[t];e[t].corner=n.calcCornerCoords(this.angle,this.cornerSize,e[t].x,e[t].y,!1),e[t].touchCorner=n.calcCornerCoords(this.angle,this.touchCornerSize,e[t].x,e[t].y,!0)}},drawSelectionBackground:function(t){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;t.save();var n=this.getCenterPoint(),r=this._calculateCurrentDimensions(),i=this.canvas.viewportTransform;return t.translate(n.x,n.y),t.scale(1/i[0],1/i[3]),t.rotate(e(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-r.x/2,-r.y/2,r.x,r.y),t.restore(),this},drawBorders:function(e,t){t=t||{};var n=this._calculateCurrentDimensions(),r=this.borderScaleFactor,i=n.x+r,s=n.y+r,o="undefined"!==typeof t.hasControls?t.hasControls:this.hasControls,a=!1;return e.save(),e.strokeStyle=t.borderColor||this.borderColor,this._setLineDash(e,t.borderDashArray||this.borderDashArray),e.strokeRect(-i/2,-s/2,i,s),o&&(e.beginPath(),this.forEachControl(function(t,n,r){t.withConnection&&t.getVisibility(r,n)&&(a=!0,e.moveTo(t.x*i,t.y*s),e.lineTo(t.x*i+t.offsetX,t.y*s+t.offsetY))}),a&&e.stroke()),e.restore(),this},drawBordersInGroup:function(e,t,n){n=n||{};var r=i.util.sizeAfterTransform(this.width,this.height,t),s=this.strokeWidth,o=this.strokeUniform,a=this.borderScaleFactor,l=r.x+s*(o?this.canvas.getZoom():t.scaleX)+a,c=r.y+s*(o?this.canvas.getZoom():t.scaleY)+a;return e.save(),this._setLineDash(e,n.borderDashArray||this.borderDashArray),e.strokeStyle=n.borderColor||this.borderColor,e.strokeRect(-l/2,-c/2,l,c),e.restore(),this},drawControls:function(e,t){t=t||{},e.save();var n,r,s=this.canvas.getRetinaScaling();return e.setTransform(s,0,0,s,0,0),e.strokeStyle=e.fillStyle=t.cornerColor||this.cornerColor,this.transparentCorners||(e.strokeStyle=t.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(e,t.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(n=this.group.calcTransformMatrix()),this.forEachControl(function(s,o,a){r=a.oCoords[o],s.getVisibility(a,o)&&(n&&(r=i.util.transformPoint(r,n)),s.render(e,r.x,r.y,t,a))}),e.restore(),this},isControlVisible:function(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)},setControlVisible:function(e,t){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t,this},setControlsVisibility:function(e){for(var t in e||(e={}),e)this.setControlVisible(t,e[t]);return this},onDeselect:function(){},onSelect:function(){}})}(),i.util.object.extend(i.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,t){var n=function(){},r=(t=t||{}).onComplete||n,s=t.onChange||n,o=this;return i.util.animate({target:this,startValue:e.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(t){e.set("left",t),o.requestRenderAll(),s()},onComplete:function(){e.setCoords(),r()}})},fxCenterObjectV:function(e,t){var n=function(){},r=(t=t||{}).onComplete||n,s=t.onChange||n,o=this;return i.util.animate({target:this,startValue:e.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(t){e.set("top",t),o.requestRenderAll(),s()},onComplete:function(){e.setCoords(),r()}})},fxRemove:function(e,t){var n=function(){},r=(t=t||{}).onComplete||n,s=t.onChange||n,o=this;return i.util.animate({target:this,startValue:e.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(t){e.set("opacity",t),o.requestRenderAll(),s()},onComplete:function(){o.remove(e),r()}})}}),i.util.object.extend(i.Object.prototype,{animate:function(){if(arguments[0]&&"object"===typeof arguments[0]){var e,t,n=[],r=[];for(e in arguments[0])n.push(e);for(var i=0,s=n.length;i<s;i++)e=n[i],t=i!==s-1,r.push(this._animate(e,arguments[0][e],arguments[1],t));return r}return this._animate.apply(this,arguments)},_animate:function(e,t,n,r){var s,o=this;t=t.toString(),n=n?i.util.object.clone(n):{},~e.indexOf(".")&&(s=e.split("."));var a=o.colorProperties.indexOf(e)>-1||s&&o.colorProperties.indexOf(s[1])>-1,l=s?this.get(s[0])[s[1]]:this.get(e);"from"in n||(n.from=l),a||(t=~t.indexOf("=")?l+parseFloat(t.replace("=","")):parseFloat(t));var c={target:this,startValue:n.from,endValue:t,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(e,t,r){return n.abort.call(o,e,t,r)},onChange:function(t,i,a){s?o[s[0]][s[1]]=t:o.set(e,t),r||n.onChange&&n.onChange(t,i,a)},onComplete:function(e,t,i){r||(o.setCoords(),n.onComplete&&n.onComplete(e,t,i))}};return a?i.util.animateColor(c.startValue,c.endValue,c.duration,c):i.util.animate(c)}}),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.object.clone,i={x1:1,x2:1,y1:1,y2:1};function s(e,t){var n=e.origin,r=e.axis1,i=e.axis2,s=e.dimension,o=t.nearest,a=t.center,l=t.farthest;return function(){switch(this.get(n)){case o:return Math.min(this.get(r),this.get(i));case a:return Math.min(this.get(r),this.get(i))+.5*this.get(s);case l:return Math.max(this.get(r),this.get(i))}}}t.Line?t.warn("fabric.Line is already defined"):(t.Line=t.util.createClass(t.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:t.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(e,t){e||(e=[0,0,0,0]),this.callSuper("initialize",t),this.set("x1",e[0]),this.set("y1",e[1]),this.set("x2",e[2]),this.set("y2",e[3]),this._setWidthHeight(t)},_setWidthHeight:function(e){e||(e={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in e?e.left:this._getLeftToOriginX(),this.top="top"in e?e.top:this._getTopToOriginY()},_set:function(e,t){return this.callSuper("_set",e,t),"undefined"!==typeof i[e]&&this._setWidthHeight(),this},_getLeftToOriginX:s({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:s({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(e){e.beginPath();var t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;var n=e.strokeStyle;e.strokeStyle=this.stroke||e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(e){return n(this.callSuper("toObject",e),this.calcLinePoints())},_getNonTransformedDimensions:function(){var e=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(e.y-=this.strokeWidth),0===this.height&&(e.x-=this.strokeWidth)),e},calcLinePoints:function(){var e=this.x1<=this.x2?-1:1,t=this.y1<=this.y2?-1:1,n=e*this.width*.5,r=t*this.height*.5;return{x1:n,x2:e*this.width*-.5,y1:r,y2:t*this.height*-.5}},_toSVG:function(){var e=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',e.x1,'" y1="',e.y1,'" x2="',e.x2,'" y2="',e.y2,'" />\n']}}),t.Line.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),t.Line.fromElement=function(e,r,i){i=i||{};var s=t.parseAttributes(e,t.Line.ATTRIBUTE_NAMES),o=[s.x1||0,s.y1||0,s.x2||0,s.y2||0];r(new t.Line(o,n(s,i)))},t.Line.fromObject=function(e,n){var i=r(e,!0);i.points=[e.x1,e.y1,e.x2,e.y2],t.Object._fromObject("Line",i,function(e){delete e.points,n&&n(e)},"points")})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.degreesToRadians;t.Circle?t.warn("fabric.Circle is already defined."):(t.Circle=t.util.createClass(t.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:t.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(e,t){return this.callSuper("_set",e,t),"radius"===e&&this.setRadius(t),this},toObject:function(e){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(e))},_toSVG:function(){var e,r=(this.endAngle-this.startAngle)%360;if(0===r)e=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var i=n(this.startAngle),s=n(this.endAngle),o=this.radius;e=['<path d="M '+t.util.cos(i)*o+" "+t.util.sin(i)*o," A "+o+" "+o," 0 ",+(r>180?"1":"0")+" 1"," "+t.util.cos(s)*o+" "+t.util.sin(s)*o,'" ',"COMMON_PARTS"," />\n"]}return e},_render:function(e){e.beginPath(),e.arc(0,0,this.radius,n(this.startAngle),n(this.endAngle),!1),this._renderPaintInOrder(e)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(e){return this.radius=e,this.set("width",2*e).set("height",2*e)}}),t.Circle.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),t.Circle.fromElement=function(e,n){var r,i=t.parseAttributes(e,t.Circle.ATTRIBUTE_NAMES);if(!("radius"in(r=i)&&r.radius>=0))throw new Error("value of `r` attribute is required and can not be negative");i.left=(i.left||0)-i.radius,i.top=(i.top||0)-i.radius,n(new t.Circle(i))},t.Circle.fromObject=function(e,n){t.Object._fromObject("Circle",e,n)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Triangle?t.warn("fabric.Triangle is already defined"):(t.Triangle=t.util.createClass(t.Object,{type:"triangle",width:100,height:100,_render:function(e){var t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this._renderPaintInOrder(e)},_toSVG:function(){var e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-e+" "+t,"0 "+-t,e+" "+t].join(","),'" />']}}),t.Triangle.fromObject=function(e,n){return t.Object._fromObject("Triangle",e,n)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=2*Math.PI;t.Ellipse?t.warn("fabric.Ellipse is already defined."):(t.Ellipse=t.util.createClass(t.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:t.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this.set("rx",e&&e.rx||0),this.set("ry",e&&e.ry||0)},_set:function(e,t){switch(this.callSuper("_set",e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,n,!1),e.restore(),this._renderPaintInOrder(e)}}),t.Ellipse.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),t.Ellipse.fromElement=function(e,n){var r=t.parseAttributes(e,t.Ellipse.ATTRIBUTE_NAMES);r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,n(new t.Ellipse(r))},t.Ellipse.fromObject=function(e,n){t.Object._fromObject("Ellipse",e,n)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend;t.Rect?t.warn("fabric.Rect is already defined"):(t.Rect=t.util.createClass(t.Object,{stateProperties:t.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:t.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(e){var t=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,i=this.height,s=-this.width/2,o=-this.height/2,a=0!==t||0!==n,l=.4477152502;e.beginPath(),e.moveTo(s+t,o),e.lineTo(s+r-t,o),a&&e.bezierCurveTo(s+r-l*t,o,s+r,o+l*n,s+r,o+n),e.lineTo(s+r,o+i-n),a&&e.bezierCurveTo(s+r,o+i-l*n,s+r-l*t,o+i,s+r-t,o+i),e.lineTo(s+t,o+i),a&&e.bezierCurveTo(s+l*t,o+i,s,o+i-l*n,s,o+i-n),e.lineTo(s,o+n),a&&e.bezierCurveTo(s,o+l*n,s+l*t,o,s+t,o),e.closePath(),this._renderPaintInOrder(e)},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),t.Rect.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),t.Rect.fromElement=function(e,r,i){if(!e)return r(null);i=i||{};var s=t.parseAttributes(e,t.Rect.ATTRIBUTE_NAMES);s.left=s.left||0,s.top=s.top||0,s.height=s.height||0,s.width=s.width||0;var o=new t.Rect(n(i?t.util.object.clone(i):{},s));o.visible=o.visible&&o.width>0&&o.height>0,r(o)},t.Rect.fromObject=function(e,n){return t.Object._fromObject("Rect",e,n)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.array.min,i=t.util.array.max,s=t.util.toFixed,o=t.util.projectStrokeOnPoints;t.Polyline?t.warn("fabric.Polyline is already defined"):(t.Polyline=t.util.createClass(t.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:t.Object.prototype.cacheProperties.concat("points"),initialize:function(e,t){t=t||{},this.points=e||[],this.callSuper("initialize",t),this._setPositionDimensions(t)},_projectStrokeOnPoints:function(){return o(this.points,this,!0)},_setPositionDimensions:function(e){var t,n=this._calcDimensions(e),r=this.exactBoundingBox?this.strokeWidth:0;this.width=n.width-r,this.height=n.height-r,e.fromSVG||(t=this.translateToGivenOrigin({x:n.left-this.strokeWidth/2+r/2,y:n.top-this.strokeWidth/2+r/2},"left","top",this.originX,this.originY)),"undefined"===typeof e.left&&(this.left=e.fromSVG?n.left:t.x),"undefined"===typeof e.top&&(this.top=e.fromSVG?n.top:t.y),this.pathOffset={x:n.left+this.width/2+r/2,y:n.top+this.height/2+r/2}},_calcDimensions:function(){var e=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,t=r(e,"x")||0,n=r(e,"y")||0;return{left:t,top:n,width:(i(e,"x")||0)-t,height:(i(e,"y")||0)-n}},toObject:function(e){return n(this.callSuper("toObject",e),{points:this.points.concat()})},_toSVG:function(){for(var e=[],n=this.pathOffset.x,r=this.pathOffset.y,i=t.Object.NUM_FRACTION_DIGITS,o=0,a=this.points.length;o<a;o++)e.push(s(this.points[o].x-n,i),",",s(this.points[o].y-r,i)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',e.join(""),'" />\n']},commonRender:function(e){var t,n=this.points.length,r=this.pathOffset.x,i=this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-i);for(var s=0;s<n;s++)t=this.points[s],e.lineTo(t.x-r,t.y-i);return!0},_render:function(e){this.commonRender(e)&&this._renderPaintInOrder(e)},complexity:function(){return this.get("points").length}}),t.Polyline.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(),t.Polyline.fromElementGenerator=function(e){return function(r,i,s){if(!r)return i(null);s||(s={});var o=t.parsePointsAttribute(r.getAttribute("points")),a=t.parseAttributes(r,t[e].ATTRIBUTE_NAMES);a.fromSVG=!0,i(new t[e](o,n(a,s)))}},t.Polyline.fromElement=t.Polyline.fromElementGenerator("Polyline"),t.Polyline.fromObject=function(e,n){return t.Object._fromObject("Polyline",e,n,"points")})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.projectStrokeOnPoints;t.Polygon?t.warn("fabric.Polygon is already defined"):(t.Polygon=t.util.createClass(t.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return n(this.points,this)},_render:function(e){this.commonRender(e)&&(e.closePath(),this._renderPaintInOrder(e))}}),t.Polygon.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(),t.Polygon.fromElement=t.Polyline.fromElementGenerator("Polygon"),t.Polygon.fromObject=function(e,n){t.Object._fromObject("Polygon",e,n,"points")})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.array.min,r=t.util.array.max,i=t.util.object.extend,s=t.util.object.clone,o=t.util.toFixed;t.Path?t.warn("fabric.Path is already defined"):(t.Path=t.util.createClass(t.Object,{type:"path",path:null,cacheProperties:t.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:t.Object.prototype.stateProperties.concat("path"),initialize:function(e,t){delete(t=s(t||{})).path,this.callSuper("initialize",t),this._setPath(e||[],t)},_setPath:function(e,n){this.path=t.util.makePathSimpler(Array.isArray(e)?e:t.util.parsePath(e)),t.Polyline.prototype._setPositionDimensions.call(this,n||{})},_renderPathCommands:function(e){var t,n=0,r=0,i=0,s=0,o=0,a=0,l=-this.pathOffset.x,c=-this.pathOffset.y;e.beginPath();for(var u=0,h=this.path.length;u<h;++u)switch((t=this.path[u])[0]){case"L":i=t[1],s=t[2],e.lineTo(i+l,s+c);break;case"M":n=i=t[1],r=s=t[2],e.moveTo(i+l,s+c);break;case"C":i=t[5],s=t[6],o=t[3],a=t[4],e.bezierCurveTo(t[1]+l,t[2]+c,o+l,a+c,i+l,s+c);break;case"Q":e.quadraticCurveTo(t[1]+l,t[2]+c,t[3]+l,t[4]+c),i=t[3],s=t[4],o=t[1],a=t[2];break;case"z":case"Z":i=n,s=r,e.closePath()}},_render:function(e){this._renderPathCommands(e),this._renderPaintInOrder(e)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(e){return i(this.callSuper("toObject",e),{path:this.path.map(function(e){return e.slice()})})},toDatalessObject:function(e){var t=this.toObject(["sourcePath"].concat(e));return t.sourcePath&&delete t.path,t},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',t.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var e=t.Object.NUM_FRACTION_DIGITS;return" translate("+o(-this.pathOffset.x,e)+", "+o(-this.pathOffset.y,e)+")"},toClipPathSVG:function(e){var t=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},toSVG:function(e){var t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var e,i,s=[],o=[],a=0,l=0,c=0,u=0,h=0,f=this.path.length;h<f;++h){switch((e=this.path[h])[0]){case"L":c=e[1],u=e[2],i=[];break;case"M":a=c=e[1],l=u=e[2],i=[];break;case"C":i=t.util.getBoundsOfCurve(c,u,e[1],e[2],e[3],e[4],e[5],e[6]),c=e[5],u=e[6];break;case"Q":i=t.util.getBoundsOfCurve(c,u,e[1],e[2],e[1],e[2],e[3],e[4]),c=e[3],u=e[4];break;case"z":case"Z":c=a,u=l}i.forEach(function(e){s.push(e.x),o.push(e.y)}),s.push(c),o.push(u)}var d=n(s)||0,p=n(o)||0;return{left:d,top:p,width:(r(s)||0)-d,height:(r(o)||0)-p}}}),t.Path.fromObject=function(e,n){if("string"===typeof e.sourcePath){var r=e.sourcePath;t.loadSVGFromURL(r,function(r){var i=r[0];i.setOptions(e),e.clipPath?t.util.enlivenObjects([e.clipPath],function(e){i.clipPath=e[0],n&&n(i)}):n&&n(i)})}else t.Object._fromObject("Path",e,n,"path")},t.Path.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(["d"]),t.Path.fromElement=function(e,n,r){var s=t.parseAttributes(e,t.Path.ATTRIBUTE_NAMES);s.fromSVG=!0,n(new t.Path(s.d,i(s,r)))})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.array.min,r=t.util.array.max;t.Group||(t.Group=t.util.createClass(t.Object,t.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(e,t,n){t=t||{},this._objects=[],n&&this.callSuper("initialize",t),this._objects=e||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;if(n)this._updateObjectsACoords();else{var i=t&&t.centerPoint;void 0!==t.originX&&(this.originX=t.originX),void 0!==t.originY&&(this.originY=t.originY),i||this._calcBounds(),this._updateObjectsCoords(i),delete t.centerPoint,this.callSuper("initialize",t)}this.setCoords()},_updateObjectsACoords:function(){for(var e=this._objects.length;e--;)this._objects[e].setCoords(true)},_updateObjectsCoords:function(e){e=e||this.getCenterPoint();for(var t=this._objects.length;t--;)this._updateObjectCoords(this._objects[t],e)},_updateObjectCoords:function(e,t){var n=e.left,r=e.top;e.set({left:n-t.x,top:r-t.y}),e.group=this,e.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(e){var n=!!this.group;return this._restoreObjectsState(),t.util.resetObjectTransform(this),e&&(n&&t.util.removeTransformFromObject(e,this.group.calcTransformMatrix()),this._objects.push(e),e.group=this,e._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,n?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(e){return this._restoreObjectsState(),t.util.resetObjectTransform(this),this.remove(e),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(e){this.dirty=!0,e.group=this,e._set("canvas",this.canvas)},_onObjectRemoved:function(e){this.dirty=!0,delete e.group},_set:function(e,n){var r=this._objects.length;if(this.useSetOnGroup)for(;r--;)this._objects[r].setOnGroup(e,n);if("canvas"===e)for(;r--;)this._objects[r]._set(e,n);t.Object.prototype._set.call(this,e,n)},toObject:function(e){var n=this.includeDefaultValues,r=this._objects.filter(function(e){return!e.excludeFromExport}).map(function(t){var r=t.includeDefaultValues;t.includeDefaultValues=n;var i=t.toObject(e);return t.includeDefaultValues=r,i}),i=t.Object.prototype.toObject.call(this,e);return i.objects=r,i},toDatalessObject:function(e){var n,r=this.sourcePath;if(r)n=r;else{var i=this.includeDefaultValues;n=this._objects.map(function(t){var n=t.includeDefaultValues;t.includeDefaultValues=i;var r=t.toDatalessObject(e);return t.includeDefaultValues=n,r})}var s=t.Object.prototype.toDatalessObject.call(this,e);return s.objects=n,s},render:function(e){this._transformDone=!0,this.callSuper("render",e),this._transformDone=!1},shouldCache:function(){var e=t.Object.prototype.shouldCache.call(this);if(e)for(var n=0,r=this._objects.length;n<r;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1,!1;return e},willDrawShadow:function(){if(t.Object.prototype.willDrawShadow.call(this))return!0;for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(e){for(var t=0,n=this._objects.length;t<n;t++)this._objects[t].render(e);this._drawClipPath(e,this.clipPath)},isCacheDirty:function(e){if(this.callSuper("isCacheDirty",e))return!0;if(!this.statefullCache)return!1;for(var t=0,n=this._objects.length;t<n;t++)if(this._objects[t].isCacheDirty(!0)){if(this._cacheCanvas){var r=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-r/2,-i/2,r,i)}return!0}return!1},_restoreObjectsState:function(){var e=this.calcOwnMatrix();return this._objects.forEach(function(n){t.util.addTransformToObject(n,e),delete n.group,n.setCoords()}),this},destroy:function(){return this._objects.forEach(function(e){e.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(e){e.dispose&&e.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var e=this._objects,n=this.canvas;this._objects=[];var r=this.toObject();delete r.objects;var i=new t.ActiveSelection([]);return i.set(r),i.type="activeSelection",n.remove(this),e.forEach(function(e){e.group=i,e.dirty=!0,n.add(e)}),i.canvas=n,i._objects=e,n._activeObject=i,i.setCoords(),i}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(e){e.setCoords(true)}),this},_calcBounds:function(e){for(var t,n,r,i,s=[],o=[],a=["tr","br","bl","tl"],l=0,c=this._objects.length,u=a.length;l<c;++l){for(r=(t=this._objects[l]).calcACoords(),i=0;i<u;i++)n=a[i],s.push(r[n].x),o.push(r[n].y);t.aCoords=r}this._getBounds(s,o,e)},_getBounds:function(e,i,s){var o=new t.Point(n(e),n(i)),a=new t.Point(r(e),r(i)),l=o.y||0,c=o.x||0,u=a.x-o.x||0,h=a.y-o.y||0;this.width=u,this.height=h,s||this.setPositionByOrigin({x:c,y:l},"left","top")},_toSVG:function(e){for(var t=["<g ","COMMON_PARTS"," >\n"],n=0,r=this._objects.length;n<r;n++)t.push("\t\t",this._objects[n].toSVG(e));return t.push("</g>\n"),t},getSvgStyles:function(){var e="undefined"!==typeof this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")},toClipPathSVG:function(e){for(var t=[],n=0,r=this._objects.length;n<r;n++)t.push("\t",this._objects[n].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}}),t.Group.fromObject=function(e,n){var r=e.objects,i=t.util.object.clone(e,!0);delete i.objects,"string"!==typeof r?t.util.enlivenObjects(r,function(r){t.util.enlivenObjectEnlivables(e,i,function(){n&&n(new t.Group(r,i,!0))})}):t.loadSVGFromURL(r,function(s){var o=t.util.groupSVGElements(s,e,r),a=i.clipPath;delete i.clipPath,o.set(i),a?t.util.enlivenObjects([a],function(e){o.clipPath=e[0],n&&n(o)}):n&&n(o)})})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.ActiveSelection||(t.ActiveSelection=t.util.createClass(t.Group,{type:"activeSelection",initialize:function(e,n){n=n||{},this._objects=e||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;n.originX&&(this.originX=n.originX),n.originY&&(this.originY=n.originY),this._calcBounds(),this._updateObjectsCoords(),t.Object.prototype.initialize.call(this,n),this.setCoords()},toGroup:function(){var e=this._objects.concat();this._objects=[];var n=t.Object.prototype.toObject.call(this),r=new t.Group([]);if(delete n.type,r.set(n),e.forEach(function(e){e.canvas.remove(e),e.group=r}),r._objects=e,!this.canvas)return r;var i=this.canvas;return i.add(r),i._activeObject=r,r.setCoords(),r},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(e,t,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",e,t),"undefined"===typeof(n=n||{}).hasControls&&(n.hasControls=!1),n.forActiveSelection=!0;for(var r=0,i=this._objects.length;r<i;r++)this._objects[r]._renderControls(e,n);e.restore()}}),t.ActiveSelection.fromObject=function(e,n){t.util.enlivenObjects(e.objects,function(r){delete e.objects,n&&n(new t.ActiveSelection(r,e,!0))})})}(t),function(e){"use strict";var t=i.util.object.extend;e.fabric||(e.fabric={}),e.fabric.Image?i.warn("fabric.Image is already defined."):(i.Image=i.util.createClass(i.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:i.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:i.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(e,t){t||(t={}),this.filters=[],this.cacheKey="texture"+i.Object.__uid++,this.callSuper("initialize",t),this._initElement(e,t)},getElement:function(){return this._element||{}},setElement:function(e,t){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=e,this._originalElement=e,this._initConfig(t),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(e){var t=i.filterBackend;t&&t.evictCachesForKey&&t.evictCachesForKey(e)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(e){i.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var e=this.getElement();return{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}},_stroke:function(e){if(this.stroke&&0!==this.strokeWidth){var t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath()}},toObject:function(e){var n=[];this.filters.forEach(function(e){e&&n.push(e.toObject())});var r=t(this.callSuper("toObject",["cropX","cropY"].concat(e)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:n});return this.resizeFilter&&(r.resizeFilter=this.resizeFilter.toObject()),r},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var e,t=[],n=[],r=this._element,s=-this.width/2,o=-this.height/2,a="",l="";if(!r)return[];if(this.hasCrop()){var c=i.Object.__uid++;t.push('<clipPath id="imageCrop_'+c+'">\n','\t<rect x="'+s+'" y="'+o+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),n.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',s-this.cropX,'" y="',o-this.cropY,'" width="',r.width||r.naturalWidth,'" height="',r.height||r.height,l,'"',a,"></image>\n"),this.stroke||this.strokeDashArray){var u=this.fill;this.fill=null,e=["\t<rect ",'x="',s,'" y="',o,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=u}return t="fill"!==this.paintFirst?t.concat(e,n):t.concat(n,e)},getSrc:function(e){var t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src"):t.src:this.src||""},setSrc:function(e,t,n){return i.util.loadImage(e,function(e,r){this.setElement(e,n),this._setWidthHeight(),t&&t(this,r)},this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var e=this.resizeFilter,t=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),r=n.scaleX,s=n.scaleY,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||r>t&&s>t)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,void(this._lastScaleY=s);i.filterBackend||(i.filterBackend=i.initFilterBackend());var a=i.util.createCanvasElement(),l=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,c=o.width,u=o.height;a.width=c,a.height=u,this._element=a,this._lastScaleX=e.scaleX=r,this._lastScaleY=e.scaleY=s,i.filterBackend.applyFilters([e],o,c,u,this._element,l),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height},applyFilters:function(e){if(e=(e=e||this.filters||[]).filter(function(e){return e&&!e.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===e.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var t=this._originalElement,n=t.naturalWidth||t.width,r=t.naturalHeight||t.height;if(this._element===this._originalElement){var s=i.util.createCanvasElement();s.width=n,s.height=r,this._element=s,this._filteredEl=s}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,r),this._lastScaleX=1,this._lastScaleY=1;return i.filterBackend||(i.filterBackend=i.initFilterBackend()),i.filterBackend.applyFilters(e,this._originalElement,n,r,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(e){i.util.setImageSmoothing(e,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)},drawCacheOnCanvas:function(e){i.util.setImageSmoothing(e,this.imageSmoothing),i.Object.prototype.drawCacheOnCanvas.call(this,e)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(e){var t=this._element;if(t){var n=this._filterScalingX,r=this._filterScalingY,i=this.width,s=this.height,o=Math.min,a=Math.max,l=a(this.cropX,0),c=a(this.cropY,0),u=t.naturalWidth||t.width,h=t.naturalHeight||t.height,f=l*n,d=c*r,p=o(i*n,u-f),g=o(s*r,h-d),m=-i/2,v=-s/2,y=o(i,u/n-l),b=o(s,h/r-c);t&&e.drawImage(t,f,d,p,g,m,v,y,b)}},_needsResize:function(){var e=this.getTotalObjectScaling();return e.scaleX!==this._lastScaleX||e.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(e,t){this.setElement(i.util.getById(e),t),i.util.addClass(this.getElement(),i.Image.CSS_CANVAS)},_initConfig:function(e){e||(e={}),this.setOptions(e),this._setWidthHeight(e)},_initFilters:function(e,t){e&&e.length?i.util.enlivenObjects(e,function(e){t&&t(e)},"fabric.Image.filters"):t&&t()},_setWidthHeight:function(e){e||(e={});var t=this.getElement();this.width=e.width||t.naturalWidth||t.width||0,this.height=e.height||t.naturalHeight||t.height||0},parsePreserveAspectRatioAttribute:function(){var e,t=i.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),n=this._element.width,r=this._element.height,s=1,o=1,a=0,l=0,c=0,u=0,h=this.width,f=this.height,d={width:h,height:f};return!t||"none"===t.alignX&&"none"===t.alignY?(s=h/n,o=f/r):("meet"===t.meetOrSlice&&(e=(h-n*(s=o=i.util.findScaleToFit(this._element,d)))/2,"Min"===t.alignX&&(a=-e),"Max"===t.alignX&&(a=e),e=(f-r*o)/2,"Min"===t.alignY&&(l=-e),"Max"===t.alignY&&(l=e)),"slice"===t.meetOrSlice&&(e=n-h/(s=o=i.util.findScaleToCover(this._element,d)),"Mid"===t.alignX&&(c=e/2),"Max"===t.alignX&&(c=e),e=r-f/o,"Mid"===t.alignY&&(u=e/2),"Max"===t.alignY&&(u=e),n=h/s,r=f/o)),{width:n,height:r,scaleX:s,scaleY:o,offsetLeft:a,offsetTop:l,cropX:c,cropY:u}}}),i.Image.CSS_CANVAS="canvas-img",i.Image.prototype.getSvgSrc=i.Image.prototype.getSrc,i.Image.fromObject=function(e,t){var n=i.util.object.clone(e);i.util.loadImage(n.src,function(e,r){r?t&&t(null,!0):i.Image.prototype._initFilters.call(n,n.filters,function(r){n.filters=r||[],i.Image.prototype._initFilters.call(n,[n.resizeFilter],function(r){n.resizeFilter=r[0],i.util.enlivenObjectEnlivables(n,n,function(){var r=new i.Image(e,n);t(r,!1)})})})},null,n.crossOrigin)},i.Image.fromURL=function(e,t,n){i.util.loadImage(e,function(e,r){t&&t(new i.Image(e,n),r)},null,n&&n.crossOrigin)},i.Image.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),i.Image.fromElement=function(e,n,r){var s=i.parseAttributes(e,i.Image.ATTRIBUTE_NAMES);i.Image.fromURL(s["xlink:href"],n,t(r?i.util.object.clone(r):{},s))})}(t),i.util.object.extend(i.Object.prototype,{_getAngleValueForStraighten:function(){var e=this.angle%360;return e>0?90*Math.round((e-1)/90):90*Math.round(e/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(e){var t=function(){},n=(e=e||{}).onComplete||t,r=e.onChange||t,s=this;return i.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(e){s.rotate(e),r()},onComplete:function(){s.setCoords(),n()}})}}),i.util.object.extend(i.StaticCanvas.prototype,{straightenObject:function(e){return e.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(e){return e.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";function e(e,t){var n="precision "+t+" float;\nvoid main(){}",r=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(r,n),e.compileShader(r),!!e.getShaderParameter(r,e.COMPILE_STATUS)}function t(e){e&&e.tileSize&&(this.tileSize=e.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}i.isWebglSupported=function(t){if(i.isLikelyNode)return!1;t=t||i.WebglFilterBackend.prototype.tileSize;var n=document.createElement("canvas"),r=n.getContext("webgl")||n.getContext("experimental-webgl"),s=!1;if(r){i.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),s=i.maxTextureSize>=t;for(var o=["highp","mediump","lowp"],a=0;a<3;a++)if(e(r,o[a])){i.webGlPrecision=o[a];break}}return this.isSupported=s,s},i.WebglFilterBackend=t,t.prototype={tileSize:2048,resources:{},setupGLContext:function(e,t){this.dispose(),this.createWebGLCanvas(e,t),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(e,t)},chooseFastestCopyGLTo2DMethod:function(e,t){var n,r="undefined"!==typeof window.performance;try{new ImageData(1,1),n=!0}catch(p){n=!1}var s="undefined"!==typeof ArrayBuffer,l="undefined"!==typeof Uint8ClampedArray;if(r&&n&&s&&l){var c=i.util.createCanvasElement(),u=new ArrayBuffer(e*t*4);if(i.forceGLPutImageData)return this.imageBuffer=u,void(this.copyGLTo2D=a);var h,f,d={imageBuffer:u,destinationWidth:e,destinationHeight:t,targetCanvas:c};c.width=e,c.height=t,h=window.performance.now(),o.call(d,this.gl,d),f=window.performance.now()-h,h=window.performance.now(),a.call(d,this.gl,d),f>window.performance.now()-h?(this.imageBuffer=u,this.copyGLTo2D=a):this.copyGLTo2D=o}},createWebGLCanvas:function(e,t){var n=i.util.createCanvasElement();n.width=e,n.height=t;var r={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},s=n.getContext("webgl",r);s||(s=n.getContext("experimental-webgl",r)),s&&(s.clearColor(0,0,0,0),this.canvas=n,this.gl=s)},applyFilters:function(e,t,n,r,i,s){var o,a=this.gl;s&&(o=this.getCachedTexture(s,t));var l={originalWidth:t.width||t.originalWidth,originalHeight:t.height||t.originalHeight,sourceWidth:n,sourceHeight:r,destinationWidth:n,destinationHeight:r,context:a,sourceTexture:this.createTexture(a,n,r,!o&&t),targetTexture:this.createTexture(a,n,r),originalTexture:o||this.createTexture(a,n,r,!o&&t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},c=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,c),e.forEach(function(e){e&&e.applyTo(l)}),function(e){var t=e.targetCanvas,n=t.width,r=t.height,i=e.destinationWidth,s=e.destinationHeight;n===i&&r===s||(t.width=i,t.height=s)}(l),this.copyGLTo2D(a,l),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(l.sourceTexture),a.deleteTexture(l.targetTexture),a.deleteFramebuffer(c),i.getContext("2d").setTransform(1,0,0,1,0,0),l},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(e,t,n,r,i){var s=e.createTexture();return e.bindTexture(e.TEXTURE_2D,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,i||e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i||e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),r?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),s},getCachedTexture:function(e,t){if(this.textureCache[e])return this.textureCache[e];var n=this.createTexture(this.gl,t.width,t.height,t);return this.textureCache[e]=n,n},evictCachesForKey:function(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])},copyGLTo2D:o,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var e=this.gl,t={renderer:"",vendor:""};if(!e)return t;var n=e.getExtension("WEBGL_debug_renderer_info");if(n){var r=e.getParameter(n.UNMASKED_RENDERER_WEBGL),i=e.getParameter(n.UNMASKED_VENDOR_WEBGL);r&&(t.renderer=r.toLowerCase()),i&&(t.vendor=i.toLowerCase())}return this.gpuInfo=t,t}}}(),function(){"use strict";var e=function(){};function t(){}i.Canvas2dFilterBackend=t,t.prototype={evictCachesForKey:e,dispose:e,clearWebGLCaches:e,resources:{},applyFilters:function(e,t,n,r,i){var s=i.getContext("2d");s.drawImage(t,0,0,n,r);var o={sourceWidth:n,sourceHeight:r,imageData:s.getImageData(0,0,n,r),originalEl:t,originalImageData:s.getImageData(0,0,n,r),canvasEl:i,ctx:s,filterBackend:this};return e.forEach(function(e){e.applyTo(o)}),o.imageData.width===n&&o.imageData.height===r||(i.width=o.imageData.width,i.height=o.imageData.height),s.putImageData(o.imageData,0,0),o}}}(),i.Image=i.Image||{},i.Image.filters=i.Image.filters||{},i.Image.filters.BaseFilter=i.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(e){e&&this.setOptions(e)},setOptions:function(e){for(var t in e)this[t]=e[t]},createProgram:function(e,t,n){t=t||this.fragmentSource,n=n||this.vertexSource,"highp"!==i.webGlPrecision&&(t=t.replace(/precision highp float/g,"precision "+i.webGlPrecision+" float"));var r=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+e.getShaderInfoLog(r));var s=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(s,t),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+e.getShaderInfoLog(s));var o=e.createProgram();if(e.attachShader(o,r),e.attachShader(o,s),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+e.getProgramInfoLog(o));var a=this.getAttributeLocations(e,o),l=this.getUniformLocations(e,o)||{};return l.uStepW=e.getUniformLocation(o,"uStepW"),l.uStepH=e.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:a,uniformLocations:l}},getAttributeLocations:function(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(e,t,n){var r=t.aPosition,i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)},_setupFrameBuffer:function(e){var t,n,r=e.context;e.passes>1?(t=e.destinationWidth,n=e.destinationHeight,e.sourceWidth===t&&e.sourceHeight===n||(r.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(r,t,n)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(e){e.passes--,e.pass++;var t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t},isNeutralState:function(){var e=this.mainParameter,t=i.Image.filters[this.type].prototype;if(e){if(Array.isArray(t[e])){for(var n=t[e].length;n--;)if(this[e][n]!==t[e][n])return!1;return!0}return t[e]===this[e]}return!1},applyTo:function(e){e.webgl?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},retrieveShader:function(e){return e.programCache.hasOwnProperty(this.type)||(e.programCache[this.type]=this.createProgram(e.context)),e.programCache[this.type]},applyToWebGL:function(e){var t=e.context,n=this.retrieveShader(e);0===e.pass&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(n.program),this.sendAttributeData(t,n.attributeLocations,e.aPosition),t.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,n.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(e,t,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)},unbindAdditionalTexture:function(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(e){this[this.mainParameter]=e},sendUniformData:function(){},createHelpLayer:function(e){if(!e.helpLayer){var t=document.createElement("canvas");t.width=e.sourceWidth,t.height=e.sourceHeight,e.helpLayer=t}},toObject:function(){var e={type:this.type},t=this.mainParameter;return t&&(e[t]=this[t]),e},toJSON:function(){return this.toObject()}}),i.Image.filters.BaseFilter.fromObject=function(e,t){var n=new i.Image.filters[e.type](e);return t&&t(n),n},function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.ColorMatrix=r(n.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(e){this.callSuper("initialize",e),this.matrix=this.matrix.slice(0)},applyTo2d:function(e){var t,n,r,i,s,o=e.imageData.data,a=o.length,l=this.matrix,c=this.colorsOnly;for(s=0;s<a;s+=4)t=o[s],n=o[s+1],r=o[s+2],c?(o[s]=t*l[0]+n*l[1]+r*l[2]+255*l[4],o[s+1]=t*l[5]+n*l[6]+r*l[7]+255*l[9],o[s+2]=t*l[10]+n*l[11]+r*l[12]+255*l[14]):(i=o[s+3],o[s]=t*l[0]+n*l[1]+r*l[2]+i*l[3]+255*l[4],o[s+1]=t*l[5]+n*l[6]+r*l[7]+i*l[8]+255*l[9],o[s+2]=t*l[10]+n*l[11]+r*l[12]+i*l[13]+255*l[14],o[s+3]=t*l[15]+n*l[16]+r*l[17]+i*l[18]+255*l[19])},getUniformLocations:function(e,t){return{uColorMatrix:e.getUniformLocation(t,"uColorMatrix"),uConstants:e.getUniformLocation(t,"uConstants")}},sendUniformData:function(e,t){var n=this.matrix,r=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],i=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,r),e.uniform4fv(t.uConstants,i)}}),t.Image.filters.ColorMatrix.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Brightness=r(n.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(e){if(0!==this.brightness){var t,n=e.imageData.data,r=n.length,i=Math.round(255*this.brightness);for(t=0;t<r;t+=4)n[t]=n[t]+i,n[t+1]=n[t+1]+i,n[t+2]=n[t+2]+i}},getUniformLocations:function(e,t){return{uBrightness:e.getUniformLocation(t,"uBrightness")}},sendUniformData:function(e,t){e.uniform1f(t.uBrightness,this.brightness)}}),t.Image.filters.Brightness.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.Image.filters,i=t.util.createClass;r.Convolute=i(r.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(e){var t=Math.sqrt(this.matrix.length),n=this.type+"_"+t+"_"+(this.opaque?1:0),r=this.fragmentSource[n];return e.programCache.hasOwnProperty(n)||(e.programCache[n]=this.createProgram(e.context,r)),e.programCache[n]},applyTo2d:function(e){var t,n,r,i,s,o,a,l,c,u,h,f,d,p=e.imageData,g=p.data,m=this.matrix,v=Math.round(Math.sqrt(m.length)),y=Math.floor(v/2),b=p.width,w=p.height,x=e.ctx.createImageData(b,w),C=x.data,_=this.opaque?1:0;for(h=0;h<w;h++)for(u=0;u<b;u++){for(s=4*(h*b+u),t=0,n=0,r=0,i=0,d=0;d<v;d++)for(f=0;f<v;f++)o=u+f-y,(a=h+d-y)<0||a>=w||o<0||o>=b||(l=4*(a*b+o),c=m[d*v+f],t+=g[l]*c,n+=g[l+1]*c,r+=g[l+2]*c,_||(i+=g[l+3]*c));C[s]=t,C[s+1]=n,C[s+2]=r,C[s+3]=_?g[s+3]:i}e.imageData=x},getUniformLocations:function(e,t){return{uMatrix:e.getUniformLocation(t,"uMatrix"),uOpaque:e.getUniformLocation(t,"uOpaque"),uHalfSize:e.getUniformLocation(t,"uHalfSize"),uSize:e.getUniformLocation(t,"uSize")}},sendUniformData:function(e,t){e.uniform1fv(t.uMatrix,this.matrix)},toObject:function(){return n(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),t.Image.filters.Convolute.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Grayscale=r(n.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(e){var t,n,r=e.imageData.data,i=r.length,s=this.mode;for(t=0;t<i;t+=4)"average"===s?n=(r[t]+r[t+1]+r[t+2])/3:"lightness"===s?n=(Math.min(r[t],r[t+1],r[t+2])+Math.max(r[t],r[t+1],r[t+2]))/2:"luminosity"===s&&(n=.21*r[t]+.72*r[t+1]+.07*r[t+2]),r[t]=n,r[t+1]=n,r[t+2]=n},retrieveShader:function(e){var t=this.type+"_"+this.mode;if(!e.programCache.hasOwnProperty(t)){var n=this.fragmentSource[this.mode];e.programCache[t]=this.createProgram(e.context,n)}return e.programCache[t]},getUniformLocations:function(e,t){return{uMode:e.getUniformLocation(t,"uMode")}},sendUniformData:function(e,t){e.uniform1i(t.uMode,1)},isNeutralState:function(){return!1}}),t.Image.filters.Grayscale.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Invert=r(n.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(e){var t,n=e.imageData.data,r=n.length;for(t=0;t<r;t+=4)n[t]=255-n[t],n[t+1]=255-n[t+1],n[t+2]=255-n[t+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(e,t){return{uInvert:e.getUniformLocation(t,"uInvert")}},sendUniformData:function(e,t){e.uniform1i(t.uInvert,this.invert)}}),t.Image.filters.Invert.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.Image.filters,i=t.util.createClass;r.Noise=i(r.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(e){if(0!==this.noise){var t,n,r=e.imageData.data,i=r.length,s=this.noise;for(t=0,i=r.length;t<i;t+=4)n=(.5-Math.random())*s,r[t]+=n,r[t+1]+=n,r[t+2]+=n}},getUniformLocations:function(e,t){return{uNoise:e.getUniformLocation(t,"uNoise"),uSeed:e.getUniformLocation(t,"uSeed")}},sendUniformData:function(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())},toObject:function(){return n(this.callSuper("toObject"),{noise:this.noise})}}),t.Image.filters.Noise.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Pixelate=r(n.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(e){var t,n,r,i,s,o,a,l,c,u,h,f=e.imageData,d=f.data,p=f.height,g=f.width;for(n=0;n<p;n+=this.blocksize)for(r=0;r<g;r+=this.blocksize)for(i=d[t=4*n*g+4*r],s=d[t+1],o=d[t+2],a=d[t+3],u=Math.min(n+this.blocksize,p),h=Math.min(r+this.blocksize,g),l=n;l<u;l++)for(c=r;c<h;c++)d[t=4*l*g+4*c]=i,d[t+1]=s,d[t+2]=o,d[t+3]=a},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(e,t){return{uBlocksize:e.getUniformLocation(t,"uBlocksize"),uStepW:e.getUniformLocation(t,"uStepW"),uStepH:e.getUniformLocation(t,"uStepH")}},sendUniformData:function(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}),t.Image.filters.Pixelate.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.Image.filters,i=t.util.createClass;r.RemoveColor=i(r.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(e){var n,r,i,s,o=e.imageData.data,a=255*this.distance,l=new t.Color(this.color).getSource(),c=[l[0]-a,l[1]-a,l[2]-a],u=[l[0]+a,l[1]+a,l[2]+a];for(n=0;n<o.length;n+=4)r=o[n],i=o[n+1],s=o[n+2],r>c[0]&&i>c[1]&&s>c[2]&&r<u[0]&&i<u[1]&&s<u[2]&&(o[n+3]=0)},getUniformLocations:function(e,t){return{uLow:e.getUniformLocation(t,"uLow"),uHigh:e.getUniformLocation(t,"uHigh")}},sendUniformData:function(e,n){var r=new t.Color(this.color).getSource(),i=parseFloat(this.distance),s=[0+r[0]/255-i,0+r[1]/255-i,0+r[2]/255-i,1],o=[r[0]/255+i,r[1]/255+i,r[2]/255+i,1];e.uniform4fv(n.uLow,s),e.uniform4fv(n.uHigh,o)},toObject:function(){return n(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),t.Image.filters.RemoveColor.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass,i={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var s in i)n[s]=r(n.ColorMatrix,{type:s,matrix:i[s],mainParameter:!1,colorsOnly:!0}),t.Image.filters[s].fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric,n=t.Image.filters,r=t.util.createClass;n.BlendColor=r(n.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(e){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[e]+"}\n}"},retrieveShader:function(e){var t,n=this.type+"_"+this.mode;return e.programCache.hasOwnProperty(n)||(t=this.buildSource(this.mode),e.programCache[n]=this.createProgram(e.context,t)),e.programCache[n]},applyTo2d:function(e){var n,r,i,s,o,a,l,c=e.imageData.data,u=c.length,h=1-this.alpha;n=(l=new t.Color(this.color).getSource())[0]*this.alpha,r=l[1]*this.alpha,i=l[2]*this.alpha;for(var f=0;f<u;f+=4)switch(s=c[f],o=c[f+1],a=c[f+2],this.mode){case"multiply":c[f]=s*n/255,c[f+1]=o*r/255,c[f+2]=a*i/255;break;case"screen":c[f]=255-(255-s)*(255-n)/255,c[f+1]=255-(255-o)*(255-r)/255,c[f+2]=255-(255-a)*(255-i)/255;break;case"add":c[f]=s+n,c[f+1]=o+r,c[f+2]=a+i;break;case"diff":case"difference":c[f]=Math.abs(s-n),c[f+1]=Math.abs(o-r),c[f+2]=Math.abs(a-i);break;case"subtract":c[f]=s-n,c[f+1]=o-r,c[f+2]=a-i;break;case"darken":c[f]=Math.min(s,n),c[f+1]=Math.min(o,r),c[f+2]=Math.min(a,i);break;case"lighten":c[f]=Math.max(s,n),c[f+1]=Math.max(o,r),c[f+2]=Math.max(a,i);break;case"overlay":c[f]=n<128?2*s*n/255:255-2*(255-s)*(255-n)/255,c[f+1]=r<128?2*o*r/255:255-2*(255-o)*(255-r)/255,c[f+2]=i<128?2*a*i/255:255-2*(255-a)*(255-i)/255;break;case"exclusion":c[f]=n+s-2*n*s/255,c[f+1]=r+o-2*r*o/255,c[f+2]=i+a-2*i*a/255;break;case"tint":c[f]=n+s*h,c[f+1]=r+o*h,c[f+2]=i+a*h}},getUniformLocations:function(e,t){return{uColor:e.getUniformLocation(t,"uColor")}},sendUniformData:function(e,n){var r=new t.Color(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(n.uColor,r)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),t.Image.filters.BlendColor.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric,n=t.Image.filters,r=t.util.createClass;n.BlendImage=r(n.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(e){var t=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return e.programCache.hasOwnProperty(t)||(e.programCache[t]=this.createProgram(e.context,n)),e.programCache[t]},applyToWebGL:function(e){var t=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,n,t.TEXTURE1),this.callSuper("applyToWebGL",e),this.unbindAdditionalTexture(t,t.TEXTURE1)},createTexture:function(e,t){return e.getCachedTexture(t.cacheKey,t._element)},calculateMatrix:function(){var e=this.image,t=e._element.width,n=e._element.height;return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/n,1]},applyTo2d:function(e){var n,r,i,s,o,a,l,c,u,h,f,d=e.imageData,p=e.filterBackend.resources,g=d.data,m=g.length,v=d.width,y=d.height,b=this.image;p.blendImage||(p.blendImage=t.util.createCanvasElement()),h=(u=p.blendImage).getContext("2d"),u.width!==v||u.height!==y?(u.width=v,u.height=y):h.clearRect(0,0,v,y),h.setTransform(b.scaleX,0,0,b.scaleY,b.left,b.top),h.drawImage(b._element,0,0,v,y),f=h.getImageData(0,0,v,y).data;for(var w=0;w<m;w+=4)switch(o=g[w],a=g[w+1],l=g[w+2],c=g[w+3],n=f[w],r=f[w+1],i=f[w+2],s=f[w+3],this.mode){case"multiply":g[w]=o*n/255,g[w+1]=a*r/255,g[w+2]=l*i/255,g[w+3]=c*s/255;break;case"mask":g[w+3]=s}},getUniformLocations:function(e,t){return{uTransformMatrix:e.getUniformLocation(t,"uTransformMatrix"),uImage:e.getUniformLocation(t,"uImage")}},sendUniformData:function(e,t){var n=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),t.Image.filters.BlendImage.fromObject=function(e,n){t.Image.fromObject(e.image,function(r){var i=t.util.object.clone(e);i.image=r,n(new t.Image.filters.BlendImage(i))})}}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=Math.pow,r=Math.floor,i=Math.sqrt,s=Math.abs,o=Math.round,a=Math.sin,l=Math.ceil,c=t.Image.filters,u=t.util.createClass;c.Resize=u(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(e,t){return{uDelta:e.getUniformLocation(t,"uDelta"),uTaps:e.getUniformLocation(t,"uTaps")}},sendUniformData:function(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)},retrieveShader:function(e){var t=this.getFilterWindow(),n=this.type+"_"+t;if(!e.programCache.hasOwnProperty(n)){var r=this.generateShader(t);e.programCache[n]=this.createProgram(e.context,r)}return e.programCache[n]},getFilterWindow:function(){var e=this.tempScale;return Math.ceil(this.lanczosLobes/e)},getTaps:function(){for(var e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,n=this.getFilterWindow(),r=new Array(n),i=1;i<=n;i++)r[i-1]=e(i*t);return r},generateShader:function(e){for(var t=new Array(e),n=this.fragmentSourceTOP,r=1;r<=e;r++)t[r-1]=r+".0 * uDelta";return n+="uniform float uTaps["+e+"];\n",n+="void main() {\n",n+="  vec4 color = texture2D(uTexture, vTexCoord);\n",n+="  float sum = 1.0;\n",t.forEach(function(e,t){n+="  color += texture2D(uTexture, vTexCoord + "+e+") * uTaps["+t+"];\n",n+="  color += texture2D(uTexture, vTexCoord - "+e+") * uTaps["+t+"];\n",n+="  sum += 2.0 * uTaps["+t+"];\n"}),n+="  gl_FragColor = color / sum;\n",n+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(e){e.webgl?(e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceHeight=e.destinationHeight):this.applyTo2d(e)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(e){return function(t){if(t>=e||t<=-e)return 0;if(t<1.1920929e-7&&t>-1.1920929e-7)return 1;var n=(t*=Math.PI)/e;return a(t)/t*a(n)/n}},applyTo2d:function(e){var t=e.imageData,n=this.scaleX,r=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/r;var i,s=t.width,a=t.height,l=o(s*n),c=o(a*r);"sliceHack"===this.resizeType?i=this.sliceByTwo(e,s,a,l,c):"hermite"===this.resizeType?i=this.hermiteFastResize(e,s,a,l,c):"bilinear"===this.resizeType?i=this.bilinearFiltering(e,s,a,l,c):"lanczos"===this.resizeType&&(i=this.lanczosResize(e,s,a,l,c)),e.imageData=i},sliceByTwo:function(e,n,i,s,o){var a,l,c=e.imageData,u=.5,h=!1,f=!1,d=n*u,p=i*u,g=t.filterBackend.resources,m=0,v=0,y=n,b=0;for(g.sliceByTwo||(g.sliceByTwo=document.createElement("canvas")),((a=g.sliceByTwo).width<1.5*n||a.height<i)&&(a.width=1.5*n,a.height=i),(l=a.getContext("2d")).clearRect(0,0,1.5*n,i),l.putImageData(c,0,0),s=r(s),o=r(o);!h||!f;)n=d,i=p,s<r(d*u)?d=r(d*u):(d=s,h=!0),o<r(p*u)?p=r(p*u):(p=o,f=!0),l.drawImage(a,m,v,n,i,y,b,d,p),m=y,v=b,b+=p;return l.getImageData(m,v,s,o)},lanczosResize:function(e,t,o,a,c){var u=e.imageData.data,h=e.ctx.createImageData(a,c),f=h.data,d=this.lanczosCreate(this.lanczosLobes),p=this.rcpScaleX,g=this.rcpScaleY,m=2/this.rcpScaleX,v=2/this.rcpScaleY,y=l(p*this.lanczosLobes/2),b=l(g*this.lanczosLobes/2),w={},x={},C={};return function e(l){var _,A,S,T,E,k,P,O,I,D,R;for(x.x=(l+.5)*p,C.x=r(x.x),_=0;_<c;_++){for(x.y=(_+.5)*g,C.y=r(x.y),E=0,k=0,P=0,O=0,I=0,A=C.x-y;A<=C.x+y;A++)if(!(A<0||A>=t)){D=r(1e3*s(A-x.x)),w[D]||(w[D]={});for(var N=C.y-b;N<=C.y+b;N++)N<0||N>=o||(R=r(1e3*s(N-x.y)),w[D][R]||(w[D][R]=d(i(n(D*m,2)+n(R*v,2))/1e3)),(S=w[D][R])>0&&(E+=S,k+=S*u[T=4*(N*t+A)],P+=S*u[T+1],O+=S*u[T+2],I+=S*u[T+3]))}f[T=4*(_*a+l)]=k/E,f[T+1]=P/E,f[T+2]=O/E,f[T+3]=I/E}return++l<a?e(l):h}(0)},bilinearFiltering:function(e,t,n,i,s){var o,a,l,c,u,h,f,d,p,g=0,m=this.rcpScaleX,v=this.rcpScaleY,y=4*(t-1),b=e.imageData.data,w=e.ctx.createImageData(i,s),x=w.data;for(l=0;l<s;l++)for(c=0;c<i;c++)for(u=m*c-(o=r(m*c)),h=v*l-(a=r(v*l)),p=4*(a*t+o),f=0;f<4;f++)d=b[p+f]*(1-u)*(1-h)+b[p+4+f]*u*(1-h)+b[p+y+f]*h*(1-u)+b[p+y+4+f]*u*h,x[g++]=d;return w},hermiteFastResize:function(e,t,n,o,a){for(var c=this.rcpScaleX,u=this.rcpScaleY,h=l(c/2),f=l(u/2),d=e.imageData.data,p=e.ctx.createImageData(o,a),g=p.data,m=0;m<a;m++)for(var v=0;v<o;v++){for(var y=4*(v+m*o),b=0,w=0,x=0,C=0,_=0,A=0,S=0,T=(m+.5)*u,E=r(m*u);E<(m+1)*u;E++)for(var k=s(T-(E+.5))/f,P=(v+.5)*c,O=k*k,I=r(v*c);I<(v+1)*c;I++){var D=s(P-(I+.5))/h,R=i(O+D*D);R>1&&R<-1||(b=2*R*R*R-3*R*R+1)>0&&(S+=b*d[(D=4*(I+E*t))+3],x+=b,d[D+3]<255&&(b=b*d[D+3]/250),C+=b*d[D],_+=b*d[D+1],A+=b*d[D+2],w+=b)}g[y]=C/w,g[y+1]=_/w,g[y+2]=A/w,g[y+3]=S/x}return p},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),t.Image.filters.Resize.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Contrast=r(n.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(e){if(0!==this.contrast){var t,n=e.imageData.data,r=n.length,i=Math.floor(255*this.contrast),s=259*(i+255)/(255*(259-i));for(t=0;t<r;t+=4)n[t]=s*(n[t]-128)+128,n[t+1]=s*(n[t+1]-128)+128,n[t+2]=s*(n[t+2]-128)+128}},getUniformLocations:function(e,t){return{uContrast:e.getUniformLocation(t,"uContrast")}},sendUniformData:function(e,t){e.uniform1f(t.uContrast,this.contrast)}}),t.Image.filters.Contrast.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Saturation=r(n.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(e){if(0!==this.saturation){var t,n,r=e.imageData.data,i=r.length,s=-this.saturation;for(t=0;t<i;t+=4)n=Math.max(r[t],r[t+1],r[t+2]),r[t]+=n!==r[t]?(n-r[t])*s:0,r[t+1]+=n!==r[t+1]?(n-r[t+1])*s:0,r[t+2]+=n!==r[t+2]?(n-r[t+2])*s:0}},getUniformLocations:function(e,t){return{uSaturation:e.getUniformLocation(t,"uSaturation")}},sendUniformData:function(e,t){e.uniform1f(t.uSaturation,-this.saturation)}}),t.Image.filters.Saturation.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Vibrance=r(n.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(e){if(0!==this.vibrance){var t,n,r,i,s=e.imageData.data,o=s.length,a=-this.vibrance;for(t=0;t<o;t+=4)n=Math.max(s[t],s[t+1],s[t+2]),r=(s[t]+s[t+1]+s[t+2])/3,i=2*Math.abs(n-r)/255*a,s[t]+=n!==s[t]?(n-s[t])*i:0,s[t+1]+=n!==s[t+1]?(n-s[t+1])*i:0,s[t+2]+=n!==s[t+2]?(n-s[t+2])*i:0}},getUniformLocations:function(e,t){return{uVibrance:e.getUniformLocation(t,"uVibrance")}},sendUniformData:function(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}}),t.Image.filters.Vibrance.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Blur=r(n.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(e){e.webgl?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},applyTo2d:function(e){e.imageData=this.simpleBlur(e)},simpleBlur:function(e){var n,r,i=e.filterBackend.resources,s=e.imageData.width,o=e.imageData.height;i.blurLayer1||(i.blurLayer1=t.util.createCanvasElement(),i.blurLayer2=t.util.createCanvasElement()),n=i.blurLayer1,r=i.blurLayer2,n.width===s&&n.height===o||(r.width=n.width=s,r.height=n.height=o);var a,l,c,u,h=n.getContext("2d"),f=r.getContext("2d"),d=15,p=.06*this.blur*.5;for(h.putImageData(e.imageData,0,0),f.clearRect(0,0,s,o),u=-15;u<=d;u++)c=p*(l=u/d)*s+(a=(Math.random()-.5)/4),f.globalAlpha=1-Math.abs(l),f.drawImage(n,c,a),h.drawImage(r,0,0),f.globalAlpha=1,f.clearRect(0,0,r.width,r.height);for(u=-15;u<=d;u++)c=p*(l=u/d)*o+(a=(Math.random()-.5)/4),f.globalAlpha=1-Math.abs(l),f.drawImage(n,a,c),h.drawImage(r,0,0),f.globalAlpha=1,f.clearRect(0,0,r.width,r.height);e.ctx.drawImage(n,0,0);var g=e.ctx.getImageData(0,0,n.width,n.height);return h.globalAlpha=1,h.clearRect(0,0,n.width,n.height),g},getUniformLocations:function(e,t){return{delta:e.getUniformLocation(t,"uDelta")}},sendUniformData:function(e,t){var n=this.chooseRightDelta();e.uniform2fv(t.delta,n)},chooseRightDelta:function(){var e,t=1,n=[0,0];return this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio),e=t*this.blur*.12,this.horizontal?n[0]=e:n[1]=e,n}}),n.Blur.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Gamma=r(n.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(e){this.gamma=[1,1,1],n.BaseFilter.prototype.initialize.call(this,e)},applyTo2d:function(e){var t,n=e.imageData.data,r=this.gamma,i=n.length,s=1/r[0],o=1/r[1],a=1/r[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),t=0,i=256;t<i;t++)this.rVals[t]=255*Math.pow(t/255,s),this.gVals[t]=255*Math.pow(t/255,o),this.bVals[t]=255*Math.pow(t/255,a);for(t=0,i=n.length;t<i;t+=4)n[t]=this.rVals[n[t]],n[t+1]=this.gVals[n[t+1]],n[t+2]=this.bVals[n[t+2]]},getUniformLocations:function(e,t){return{uGamma:e.getUniformLocation(t,"uGamma")}},sendUniformData:function(e,t){e.uniform3fv(t.uGamma,this.gamma)}}),t.Image.filters.Gamma.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Composed=r(n.BaseFilter,{type:"Composed",subFilters:[],initialize:function(e){this.callSuper("initialize",e),this.subFilters=this.subFilters.slice(0)},applyTo:function(e){e.passes+=this.subFilters.length-1,this.subFilters.forEach(function(t){t.applyTo(e)})},toObject:function(){return t.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(e){return e.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(e){return!e.isNeutralState()})}}),t.Image.filters.Composed.fromObject=function(e,n){var r=(e.subFilters||[]).map(function(e){return new t.Image.filters[e.type](e)}),i=new t.Image.filters.Composed({subFilters:r});return n&&n(i),i}}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.HueRotation=r(n.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var e=this.rotation*Math.PI,n=t.util.cos(e),r=t.util.sin(e),i=1/3,s=Math.sqrt(i)*r,o=1-n;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=n+o/3,this.matrix[1]=i*o-s,this.matrix[2]=i*o+s,this.matrix[5]=i*o+s,this.matrix[6]=n+i*o,this.matrix[7]=i*o-s,this.matrix[10]=i*o-s,this.matrix[11]=i*o+s,this.matrix[12]=n+i*o},isNeutralState:function(e){return this.calculateMatrix(),n.BaseFilter.prototype.isNeutralState.call(this,e)},applyTo:function(e){this.calculateMatrix(),n.BaseFilter.prototype.applyTo.call(this,e)}}),t.Image.filters.HueRotation.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.clone;if(t.Text)t.warn("fabric.Text is already defined");else{var r="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");t.Text=t.util.createClass(t.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:t.Object.prototype.stateProperties.concat(r),cacheProperties:t.Object.prototype.cacheProperties.concat(r),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(e,t){this.styles=t&&t.styles||{},this.text=e,this.__skipDimension=!0,this.callSuper("initialize",t),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var e=this.path;e&&(e.segmentsInfo=t.util.getPathSegmentsInfo(e.path))},getMeasuringContext:function(){return t._measuringContext||(t._measuringContext=this.canvas&&this.canvas.contextCache||t.util.createCanvasElement().getContext("2d")),t._measuringContext},_splitText:function(){var e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var e,t,n,r,i,s,o,a=0,l=this._textLines.length;a<l;a++)if(("justify"===this.textAlign||a!==l-1&&!this.isEndOfWrapping(a))&&(r=0,i=this._textLines[a],(t=this.getLineWidth(a))<this.width&&(o=this.textLines[a].match(this._reSpacesAndTabs)))){n=o.length,e=(this.width-t)/n;for(var c=0,u=i.length;c<=u;c++)s=this.__charBounds[a][c],this._reSpaceAndTab.test(i[c])?(s.width+=e,s.kernedWidth+=e,s.left+=r,r+=e):s.left+=r}},isEndOfWrapping:function(e){return e===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var e=this.callSuper("_getCacheCanvasDimensions"),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e},_render:function(e){var t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")},_renderText:function(e){"stroke"===this.paintFirst?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))},_setTextStyles:function(e,t,n){if(e.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":e.textBaseline="middle";break;case"ascender":e.textBaseline="top";break;case"descender":e.textBaseline="bottom"}e.font=this._getFontDeclaration(t,n)},calcTextWidth:function(){for(var e=this.getLineWidth(0),t=1,n=this._textLines.length;t<n;t++){var r=this.getLineWidth(t);r>e&&(e=r)}return e},_renderTextLine:function(e,t,n,r,i,s){this._renderChars(e,t,n,r,i,s)},_renderTextLinesBackground:function(e){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var t,n,r,i,s,o,a,l=e.fillStyle,c=this._getLeftOffset(),u=this._getTopOffset(),h=0,f=0,d=this.path,p=0,g=this._textLines.length;p<g;p++)if(t=this.getHeightOfLine(p),this.textBackgroundColor||this.styleHas("textBackgroundColor",p)){r=this._textLines[p],n=this._getLineLeftOffset(p),f=0,h=0,i=this.getValueOfPropertyAt(p,0,"textBackgroundColor");for(var m=0,v=r.length;m<v;m++)s=this.__charBounds[p][m],o=this.getValueOfPropertyAt(p,m,"textBackgroundColor"),d?(e.save(),e.translate(s.renderLeft,s.renderTop),e.rotate(s.angle),e.fillStyle=o,o&&e.fillRect(-s.width/2,-t/this.lineHeight*(1-this._fontSizeFraction),s.width,t/this.lineHeight),e.restore()):o!==i?(a=c+n+h,"rtl"===this.direction&&(a=this.width-a-f),e.fillStyle=i,i&&e.fillRect(a,u,f,t/this.lineHeight),h=s.left,f=s.width,i=o):f+=s.kernedWidth;o&&!d&&(a=c+n+h,"rtl"===this.direction&&(a=this.width-a-f),e.fillStyle=o,e.fillRect(a,u,f,t/this.lineHeight)),u+=t}else u+=t;e.fillStyle=l,this._removeShadow(e)}},getFontCache:function(e){var n=e.fontFamily.toLowerCase();t.charWidthsCache[n]||(t.charWidthsCache[n]={});var r=t.charWidthsCache[n],i=e.fontStyle.toLowerCase()+"_"+(e.fontWeight+"").toLowerCase();return r[i]||(r[i]={}),r[i]},_measureChar:function(e,t,n,r){var i,s,o,a,l=this.getFontCache(t),c=n+e,u=this._getFontDeclaration(t)===this._getFontDeclaration(r),h=t.fontSize/this.CACHE_FONT_SIZE;if(n&&void 0!==l[n]&&(o=l[n]),void 0!==l[e]&&(a=i=l[e]),u&&void 0!==l[c]&&(a=(s=l[c])-o),void 0===i||void 0===o||void 0===s){var f=this.getMeasuringContext();this._setTextStyles(f,t,!0)}return void 0===i&&(a=i=f.measureText(e).width,l[e]=i),void 0===o&&u&&n&&(o=f.measureText(n).width,l[n]=o),u&&void 0===s&&(s=f.measureText(c).width,l[c]=s,a=s-o),{width:i*h,kernedWidth:a*h}},getHeightOfChar:function(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")},measureLine:function(e){var t=this._measureLine(e);return 0!==this.charSpacing&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t},_measureLine:function(e){var n,r,i,s,o,a,l=0,c=this._textLines[e],u=new Array(c.length),h=0,f=this.path,d="right"===this.pathSide;for(this.__charBounds[e]=u,n=0;n<c.length;n++)r=c[n],s=this._getGraphemeBox(r,e,n,i),u[n]=s,l+=s.kernedWidth,i=r;if(u[n]={left:s?s.left+s.width:0,width:0,kernedWidth:0,height:this.fontSize},f){switch(a=f.segmentsInfo[f.segmentsInfo.length-1].length,(o=t.util.getPointOnPath(f.path,0,f.segmentsInfo)).x+=f.pathOffset.x,o.y+=f.pathOffset.y,this.textAlign){case"left":h=d?a-l:0;break;case"center":h=(a-l)/2;break;case"right":h=d?0:a-l}for(h+=this.pathStartOffset*(d?-1:1),n=d?c.length-1:0;d?n>=0:n<c.length;d?n--:n++)s=u[n],h>a?h%=a:h<0&&(h+=a),this._setGraphemeOnPath(h,s,o),h+=s.kernedWidth}return{width:l,numOfSpaces:0}},_setGraphemeOnPath:function(e,n,r){var i=e+n.kernedWidth/2,s=this.path,o=t.util.getPointOnPath(s.path,i,s.segmentsInfo);n.renderLeft=o.x-r.x,n.renderTop=o.y-r.y,n.angle=o.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(e,t,n,r,i){var s,o=this.getCompleteStyleDeclaration(t,n),a=r?this.getCompleteStyleDeclaration(t,n-1):{},l=this._measureChar(e,o,r,a),c=l.kernedWidth,u=l.width;0!==this.charSpacing&&(u+=s=this._getWidthOfCharSpacing(),c+=s);var h={width:u,left:0,height:o.fontSize,kernedWidth:c,deltaY:o.deltaY};if(n>0&&!i){var f=this.__charBounds[t][n-1];h.left=f.left+f.width+l.kernedWidth-l.width}return h},getHeightOfLine:function(e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var t=this._textLines[e],n=this.getHeightOfChar(e,0),r=1,i=t.length;r<i;r++)n=Math.max(this.getHeightOfChar(e,r),n);return this.__lineHeights[e]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var e,t=0,n=0,r=this._textLines.length;n<r;n++)e=this.getHeightOfLine(n),t+=n===r-1?e/this.lineHeight:e;return t},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(e,t){e.save();for(var n=0,r=this._getLeftOffset(),i=this._getTopOffset(),s=0,o=this._textLines.length;s<o;s++){var a=this.getHeightOfLine(s),l=a/this.lineHeight,c=this._getLineLeftOffset(s);this._renderTextLine(t,e,this._textLines[s],r+c,i+n+l,s),n+=a}e.restore()},_renderTextFill:function(e){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(e,"fillText")},_renderTextStroke:function(e){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())},_renderChars:function(e,n,r,i,s,o){var a,l,c,u,h,f=this.getHeightOfLine(o),d=-1!==this.textAlign.indexOf("justify"),p="",g=0,m=this.path,v=!d&&0===this.charSpacing&&this.isEmptyStyles(o)&&!m,y="ltr"===this.direction,b="ltr"===this.direction?1:-1,w=n.canvas.getAttribute("dir");if(n.save(),w!==this.direction&&(n.canvas.setAttribute("dir",y?"ltr":"rtl"),n.direction=y?"ltr":"rtl",n.textAlign=y?"left":"right"),s-=f*this._fontSizeFraction/this.lineHeight,v)return this._renderChar(e,n,o,0,r.join(""),i,s,f),void n.restore();for(var x=0,C=r.length-1;x<=C;x++)u=x===C||this.charSpacing||m,p+=r[x],c=this.__charBounds[o][x],0===g?(i+=b*(c.kernedWidth-c.width),g+=c.width):g+=c.kernedWidth,d&&!u&&this._reSpaceAndTab.test(r[x])&&(u=!0),u||(a=a||this.getCompleteStyleDeclaration(o,x),l=this.getCompleteStyleDeclaration(o,x+1),u=t.util.hasStyleChanged(a,l,!1)),u&&(m?(n.save(),n.translate(c.renderLeft,c.renderTop),n.rotate(c.angle),this._renderChar(e,n,o,x,p,-g/2,0,f),n.restore()):(h=i,this._renderChar(e,n,o,x,p,h,s,f)),p="",a=l,i+=b*g,g=0);n.restore()},_applyPatternGradientTransformText:function(e){var n,r=t.util.createCanvasElement(),i=this.width+this.strokeWidth,s=this.height+this.strokeWidth;return r.width=i,r.height=s,(n=r.getContext("2d")).beginPath(),n.moveTo(0,0),n.lineTo(i,0),n.lineTo(i,s),n.lineTo(0,s),n.closePath(),n.translate(i/2,s/2),n.fillStyle=e.toLive(n),this._applyPatternGradientTransform(n,e),n.fill(),n.createPattern(r,"no-repeat")},handleFiller:function(e,t,n){var r,i;return n.toLive?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?(r=-this.width/2,i=-this.height/2,e.translate(r,i),e[t]=this._applyPatternGradientTransformText(n),{offsetX:r,offsetY:i}):(e[t]=n.toLive(e,this),this._applyPatternGradientTransform(e,n)):(e[t]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(e,t){return e.lineWidth=t.strokeWidth,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",t.stroke)},_setFillStyles:function(e,t){return this.handleFiller(e,"fillStyle",t.fill)},_renderChar:function(e,t,n,r,i,s,o){var a,l,c=this._getStyleDeclaration(n,r),u=this.getCompleteStyleDeclaration(n,r),h="fillText"===e&&u.fill,f="strokeText"===e&&u.stroke&&u.strokeWidth;(f||h)&&(t.save(),h&&(a=this._setFillStyles(t,u)),f&&(l=this._setStrokeStyles(t,u)),t.font=this._getFontDeclaration(u),c&&c.textBackgroundColor&&this._removeShadow(t),c&&c.deltaY&&(o+=c.deltaY),h&&t.fillText(i,s-a.offsetX,o-a.offsetY),f&&t.strokeText(i,s-l.offsetX,o-l.offsetY),t.restore())},setSuperscript:function(e,t){return this._setScript(e,t,this.superscript)},setSubscript:function(e,t){return this._setScript(e,t,this.subscript)},_setScript:function(e,t,n){var r=this.get2DCursorLocation(e,!0),i=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"fontSize"),s=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"deltaY"),o={fontSize:i*n.size,deltaY:s+i*n.baseline};return this.setSelectionStyles(o,e,t),this},_getLineLeftOffset:function(e){var t=this.getLineWidth(e),n=this.width-t,r=this.textAlign,i=this.direction,s=0,o=this.isEndOfWrapping(e);return"justify"===r||"justify-center"===r&&!o||"justify-right"===r&&!o||"justify-left"===r&&!o?0:("center"===r&&(s=n/2),"right"===r&&(s=n),"justify-center"===r&&(s=n/2),"justify-right"===r&&(s=n),"rtl"===i&&(s-=n),s)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var e=this._forceClearCache;return e||(e=this.hasStateChanged("_dimensionAffectingProps")),e&&(this.dirty=!0,this._forceClearCache=!1),e},getLineWidth:function(e){if(void 0!==this.__lineWidths[e])return this.__lineWidths[e];var t=this.measureLine(e).width;return this.__lineWidths[e]=t,t},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(e,t,n){var r=this._getStyleDeclaration(e,t);return r&&"undefined"!==typeof r[n]?r[n]:this[n]},_renderTextDecoration:function(e,t){if(this[t]||this.styleHas(t)){for(var n,r,i,s,o,a,l,c,u,h,f,d,p,g,m,v,y=this._getLeftOffset(),b=this._getTopOffset(),w=this.path,x=this._getWidthOfCharSpacing(),C=this.offsets[t],_=0,A=this._textLines.length;_<A;_++)if(n=this.getHeightOfLine(_),this[t]||this.styleHas(t,_)){l=this._textLines[_],g=n/this.lineHeight,s=this._getLineLeftOffset(_),h=0,f=0,c=this.getValueOfPropertyAt(_,0,t),v=this.getValueOfPropertyAt(_,0,"fill"),u=b+g*(1-this._fontSizeFraction),r=this.getHeightOfChar(_,0),o=this.getValueOfPropertyAt(_,0,"deltaY");for(var S=0,T=l.length;S<T;S++)if(d=this.__charBounds[_][S],p=this.getValueOfPropertyAt(_,S,t),m=this.getValueOfPropertyAt(_,S,"fill"),i=this.getHeightOfChar(_,S),a=this.getValueOfPropertyAt(_,S,"deltaY"),w&&p&&m)e.save(),e.fillStyle=v,e.translate(d.renderLeft,d.renderTop),e.rotate(d.angle),e.fillRect(-d.kernedWidth/2,C*i+a,d.kernedWidth,this.fontSize/15),e.restore();else if((p!==c||m!==v||i!==r||a!==o)&&f>0){var E=y+s+h;"rtl"===this.direction&&(E=this.width-E-f),c&&v&&(e.fillStyle=v,e.fillRect(E,u+C*r+o,f,this.fontSize/15)),h=d.left,f=d.width,c=p,v=m,r=i,o=a}else f+=d.kernedWidth;E=y+s+h;"rtl"===this.direction&&(E=this.width-E-f),e.fillStyle=m,p&&m&&e.fillRect(E,u+C*r+o,f-x,this.fontSize/15),b+=n}else b+=n;this._removeShadow(e)}},_getFontDeclaration:function(e,n){var r=e||this,i=this.fontFamily,s=t.Text.genericFonts.indexOf(i.toLowerCase())>-1,o=void 0===i||i.indexOf("'")>-1||i.indexOf(",")>-1||i.indexOf('"')>-1||s?r.fontFamily:'"'+r.fontFamily+'"';return[t.isLikelyNode?r.fontWeight:r.fontStyle,t.isLikelyNode?r.fontStyle:r.fontWeight,n?this.CACHE_FONT_SIZE+"px":r.fontSize+"px",o].join(" ")},render:function(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",e)))},_splitTextIntoLines:function(e){for(var n=e.split(this._reNewline),r=new Array(n.length),i=["\n"],s=[],o=0;o<n.length;o++)r[o]=t.util.string.graphemeSplit(n[o]),s=s.concat(r[o],i);return s.pop(),{_unwrappedLines:r,lines:n,graphemeText:s,graphemeLines:r}},toObject:function(e){var n=r.concat(e),i=this.callSuper("toObject",n);return i.styles=t.util.stylesToArray(this.styles,this.text),i.path&&(i.path=this.path.toObject()),i},set:function(e,t){this.callSuper("set",e,t);var n=!1,r=!1;if("object"===typeof e)for(var i in e)"path"===i&&this.setPathInfo(),n=n||-1!==this._dimensionAffectingProps.indexOf(i),r=r||"path"===i;else n=-1!==this._dimensionAffectingProps.indexOf(e),r="path"===e;return r&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),t.Text.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),t.Text.DEFAULT_SVG_FONT_SIZE=16,t.Text.fromElement=function(e,r,i){if(!e)return r(null);var s=t.parseAttributes(e,t.Text.ATTRIBUTE_NAMES),o=s.textAnchor||"left";if((i=t.util.object.extend(i?n(i):{},s)).top=i.top||0,i.left=i.left||0,s.textDecoration){var a=s.textDecoration;-1!==a.indexOf("underline")&&(i.underline=!0),-1!==a.indexOf("overline")&&(i.overline=!0),-1!==a.indexOf("line-through")&&(i.linethrough=!0),delete i.textDecoration}"dx"in s&&(i.left+=s.dx),"dy"in s&&(i.top+=s.dy),"fontSize"in i||(i.fontSize=t.Text.DEFAULT_SVG_FONT_SIZE);var l="";"textContent"in e?l=e.textContent:"firstChild"in e&&null!==e.firstChild&&"data"in e.firstChild&&null!==e.firstChild.data&&(l=e.firstChild.data),l=l.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var c=i.strokeWidth;i.strokeWidth=0;var u=new t.Text(l,i),h=u.getScaledHeight()/u.height,f=((u.height+u.strokeWidth)*u.lineHeight-u.height)*h,d=u.getScaledHeight()+f,p=0;"center"===o&&(p=u.getScaledWidth()/2),"right"===o&&(p=u.getScaledWidth()),u.set({left:u.left-p,top:u.top-(d-u.fontSize*(.07+u._fontSizeFraction))/u.lineHeight,strokeWidth:"undefined"!==typeof c?c:1}),r(u)},t.Text.fromObject=function(e,r){var i=n(e),s=e.path;return delete i.path,t.Object._fromObject("Text",i,function(n){n.styles=t.util.stylesFromArray(e.styles,e.text),s?t.Object._fromObject("Path",s,function(e){n.set("path",e),r(n)},"path"):r(n)},"text")},t.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],t.util.createAccessors&&t.util.createAccessors(t.Text)}}(t),i.util.object.extend(i.Text.prototype,{isEmptyStyles:function(e){if(!this.styles)return!0;if("undefined"!==typeof e&&!this.styles[e])return!0;var t="undefined"===typeof e?this.styles:{line:this.styles[e]};for(var n in t)for(var r in t[n])for(var i in t[n][r])return!1;return!0},styleHas:function(e,t){if(!this.styles||!e||""===e)return!1;if("undefined"!==typeof t&&!this.styles[t])return!1;var n="undefined"===typeof t?this.styles:{0:this.styles[t]};for(var r in n)for(var i in n[r])if("undefined"!==typeof n[r][i][e])return!0;return!1},cleanStyle:function(e){if(!this.styles||!e||""===e)return!1;var t,n,r=this.styles,i=0,s=!0,o=0;for(var a in r){for(var l in t=0,r[a]){var c;i++,(c=r[a][l]).hasOwnProperty(e)?(n?c[e]!==n&&(s=!1):n=c[e],c[e]===this[e]&&delete c[e]):s=!1,0!==Object.keys(c).length?t++:delete r[a][l]}0===t&&delete r[a]}for(var u=0;u<this._textLines.length;u++)o+=this._textLines[u].length;s&&i===o&&(this[e]=n,this.removeStyle(e))},removeStyle:function(e){if(this.styles&&e&&""!==e){var t,n,r,i=this.styles;for(n in i){for(r in t=i[n])delete t[r][e],0===Object.keys(t[r]).length&&delete t[r];0===Object.keys(t).length&&delete i[n]}}},_extendStyles:function(e,t){var n=this.get2DCursorLocation(e);this._getLineStyle(n.lineIndex)||this._setLineStyle(n.lineIndex),this._getStyleDeclaration(n.lineIndex,n.charIndex)||this._setStyleDeclaration(n.lineIndex,n.charIndex,{}),i.util.object.extend(this._getStyleDeclaration(n.lineIndex,n.charIndex),t)},get2DCursorLocation:function(e,t){"undefined"===typeof e&&(e=this.selectionStart);for(var n=t?this._unwrappedTextLines:this._textLines,r=n.length,i=0;i<r;i++){if(e<=n[i].length)return{lineIndex:i,charIndex:e};e-=n[i].length+this.missingNewlineOffset(i)}return{lineIndex:i-1,charIndex:n[i-1].length<e?n[i-1].length:e}},getSelectionStyles:function(e,t,n){"undefined"===typeof e&&(e=this.selectionStart||0),"undefined"===typeof t&&(t=this.selectionEnd||e);for(var r=[],i=e;i<t;i++)r.push(this.getStyleAtPosition(i,n));return r},getStyleAtPosition:function(e,t){var n=this.get2DCursorLocation(e);return(t?this.getCompleteStyleDeclaration(n.lineIndex,n.charIndex):this._getStyleDeclaration(n.lineIndex,n.charIndex))||{}},setSelectionStyles:function(e,t,n){"undefined"===typeof t&&(t=this.selectionStart||0),"undefined"===typeof n&&(n=this.selectionEnd||t);for(var r=t;r<n;r++)this._extendStyles(r,e);return this._forceClearCache=!0,this},_getStyleDeclaration:function(e,t){var n=this.styles&&this.styles[e];return n?n[t]:null},getCompleteStyleDeclaration:function(e,t){for(var n,r=this._getStyleDeclaration(e,t)||{},i={},s=0;s<this._styleProperties.length;s++)i[n=this._styleProperties[s]]="undefined"===typeof r[n]?this[n]:r[n];return i},_setStyleDeclaration:function(e,t,n){this.styles[e][t]=n},_deleteStyleDeclaration:function(e,t){delete this.styles[e][t]},_getLineStyle:function(e){return!!this.styles[e]},_setLineStyle:function(e){this.styles[e]={}},_deleteLineStyle:function(e){delete this.styles[e]}}),function(){function e(e){e.textDecoration&&(e.textDecoration.indexOf("underline")>-1&&(e.underline=!0),e.textDecoration.indexOf("line-through")>-1&&(e.linethrough=!0),e.textDecoration.indexOf("overline")>-1&&(e.overline=!0),delete e.textDecoration)}i.IText=i.util.createClass(i.Text,i.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(e,t){this.callSuper("initialize",e,t),this.initBehavior()},setSelectionStart:function(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)},setSelectionEnd:function(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)},_updateAndFire:function(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(e){this.clearContextTop(),this.callSuper("render",e),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(e){this.callSuper("_render",e)},clearContextTop:function(e){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this.canvas.contextTop,n=this.canvas.viewportTransform;t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(t),this._clearTextArea(t),e||t.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this._getCursorBoundaries(),t=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(e,t):this.renderSelection(e,t),t.restore()}},_clearTextArea:function(e){var t=this.width+4,n=this.height+4;e.clearRect(-t/2,-n/2,t,n)},_getCursorBoundaries:function(e){"undefined"===typeof e&&(e=this.selectionStart);var t=this._getLeftOffset(),n=this._getTopOffset(),r=this._getCursorBoundariesOffsets(e);return{left:t,top:n,leftOffset:r.left,topOffset:r.top}},_getCursorBoundariesOffsets:function(e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var t,n,r,i,s=0,o=0,a=this.get2DCursorLocation(e);r=a.charIndex,n=a.lineIndex;for(var l=0;l<n;l++)s+=this.getHeightOfLine(l);t=this._getLineLeftOffset(n);var c=this.__charBounds[n][r];return c&&(o=c.left),0!==this.charSpacing&&r===this._textLines[n].length&&(o-=this._getWidthOfCharSpacing()),i={top:s,left:t+(o>0?o:0)},"rtl"===this.direction&&(i.left*=-1),this.cursorOffsetCache=i,this.cursorOffsetCache},renderCursor:function(e,t){var n=this.get2DCursorLocation(),r=n.lineIndex,i=n.charIndex>0?n.charIndex-1:0,s=this.getValueOfPropertyAt(r,i,"fontSize"),o=this.scaleX*this.canvas.getZoom(),a=this.cursorWidth/o,l=e.topOffset,c=this.getValueOfPropertyAt(r,i,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-s*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(e,t),t.fillStyle=this.cursorColor||this.getValueOfPropertyAt(r,i,"fill"),t.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,t.fillRect(e.left+e.leftOffset-a/2,l+e.top+c,a,s)},renderSelection:function(e,t){for(var n=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,r=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,i=-1!==this.textAlign.indexOf("justify"),s=this.get2DCursorLocation(n),o=this.get2DCursorLocation(r),a=s.lineIndex,l=o.lineIndex,c=s.charIndex<0?0:s.charIndex,u=o.charIndex<0?0:o.charIndex,h=a;h<=l;h++){var f,d=this._getLineLeftOffset(h)||0,p=this.getHeightOfLine(h),g=0,m=0;if(h===a&&(g=this.__charBounds[a][c].left),h>=a&&h<l)m=i&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5;else if(h===l)if(0===u)m=this.__charBounds[l][u].left;else{var v=this._getWidthOfCharSpacing();m=this.__charBounds[l][u-1].left+this.__charBounds[l][u-1].width-v}f=p,(this.lineHeight<1||h===l&&this.lineHeight>1)&&(p/=this.lineHeight);var y=e.left+d+g,b=m-g,w=p,x=0;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",w=1,x=p):t.fillStyle=this.selectionColor,"rtl"===this.direction&&(y=this.width-y-b),t.fillRect(y,e.top+e.topOffset+x,b,w),e.topOffset+=f}},getCurrentCharFontSize:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")},getCurrentCharColor:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fill")},_getCurrentCharIndex:function(){var e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}}),i.IText.fromObject=function(t,n){var r=i.util.stylesFromArray(t.styles,t.text),s=Object.assign({},t,{styles:r});if(e(s),s.styles)for(var o in s.styles)for(var a in s.styles[o])e(s.styles[o][a]);i.Object._fromObject("IText",s,n,"text")}}(),function(){var e=i.util.object.clone;i.util.object.extend(i.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var e=this;this.on("added",function(){var t=e.canvas;t&&(t._hasITextHandlers||(t._hasITextHandlers=!0,e._initCanvasHandlers(t)),t._iTextInstances=t._iTextInstances||[],t._iTextInstances.push(e))})},initRemovedHandler:function(){var e=this;this.on("removed",function(){var t=e.canvas;t&&(t._iTextInstances=t._iTextInstances||[],i.util.removeFromArray(t._iTextInstances,e),0===t._iTextInstances.length&&(t._hasITextHandlers=!1,e._removeCanvasHandlers(t)))})},_initCanvasHandlers:function(e){e._mouseUpITextHandler=function(){e._iTextInstances&&e._iTextInstances.forEach(function(e){e.__isMousedown=!1})},e.on("mouse:up",e._mouseUpITextHandler)},_removeCanvasHandlers:function(e){e.off("mouse:up",e._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(e,t,n,r){var i;return i={isAborted:!1,abort:function(){this.isAborted=!0}},e.animate("_currentCursorOpacity",t,{duration:n,onComplete:function(){i.isAborted||e[r]()},onChange:function(){e.canvas&&e.selectionStart===e.selectionEnd&&e.renderCursorOrSelection()},abort:function(){return i.isAborted}}),i},_onTickComplete:function(){var e=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){e._currentTickCompleteState=e._animateCursor(e,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(e){var t=this,n=e?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){t._tick()},n)},abortCursorAnimation:function(){var e=this._currentTickState||this._currentTickCompleteState,t=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,e&&t&&t.clearContext(t.contextTop||t.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(e){var t=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n--;for(;/\S/.test(this._text[n])&&n>-1;)t++,n--;return e-t},findWordBoundaryRight:function(e){var t=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t},findLineBoundaryLeft:function(e){for(var t=0,n=e-1;!/\n/.test(this._text[n])&&n>-1;)t++,n--;return e-t},findLineBoundaryRight:function(e){for(var t=0,n=e;!/\n/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t},searchWordBoundary:function(e,t){for(var n=this._text,r=this._reSpace.test(n[e])?e-1:e,s=n[r],o=i.reNonWord;!o.test(s)&&r>0&&r<n.length;)s=n[r+=t];return o.test(s)&&(r+=1===t?0:1),r},selectWord:function(e){e=e||this.selectionStart;var t=this.searchWordBoundary(e,-1),n=this.searchWordBoundary(e,1);this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(e){e=e||this.selectionStart;var t=this.findLineBoundaryLeft(e),n=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(e){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(e),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(e){e._iTextInstances&&e._iTextInstances.forEach(function(e){e.selected=!1,e.isEditing&&e.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(e){if(this.__isMousedown&&this.isEditing){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var t=this.getSelectionStartFromPointer(e.e),n=this.selectionStart,r=this.selectionEnd;(t===this.__selectionStartOnMouseDown&&n!==r||n!==t&&r!==t)&&(t>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=t):(this.selectionStart=t,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===r||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(e,t,n){var r=n.slice(0,e),s=i.util.string.graphemeSplit(r).length;if(e===t)return{selectionStart:s,selectionEnd:s};var o=n.slice(e,t);return{selectionStart:s,selectionEnd:s+i.util.string.graphemeSplit(o).length}},fromGraphemeToStringSelection:function(e,t,n){var r=n.slice(0,e).join("").length;return e===t?{selectionStart:r,selectionEnd:r}:{selectionStart:r,selectionEnd:r+n.slice(e,t).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var e=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),r=n.lineIndex,s=n.charIndex,o=this.getValueOfPropertyAt(r,s,"fontSize")*this.lineHeight,a=t.leftOffset,l=this.calcTransformMatrix(),c={x:t.left+a,y:t.top+t.topOffset+o},u=this.canvas.getRetinaScaling(),h=this.canvas.upperCanvasEl,f=h.width/u,d=h.height/u,p=f-o,g=d-o,m=h.clientWidth/f,v=h.clientHeight/d;return c=i.util.transformPoint(c,l),(c=i.util.transformPoint(c,this.canvas.viewportTransform)).x*=m,c.y*=v,c.x<0&&(c.x=0),c.x>p&&(c.x=p),c.y<0&&(c.y=0),c.y>g&&(c.y=g),c.x+=this.canvas._offset.left,c.y+=this.canvas._offset.top,{left:c.x+"px",top:c.y+"px",fontSize:o+"px",charHeight:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var e=this._textBeforeEdit!==this.text,t=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),e&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var e in this.styles)this._textLines[e]||delete this.styles[e]},removeStyleFromTo:function(e,t){var n,r,i=this.get2DCursorLocation(e,!0),s=this.get2DCursorLocation(t,!0),o=i.lineIndex,a=i.charIndex,l=s.lineIndex,c=s.charIndex;if(o!==l){if(this.styles[o])for(n=a;n<this._unwrappedTextLines[o].length;n++)delete this.styles[o][n];if(this.styles[l])for(n=c;n<this._unwrappedTextLines[l].length;n++)(r=this.styles[l][n])&&(this.styles[o]||(this.styles[o]={}),this.styles[o][a+n-c]=r);for(n=o+1;n<=l;n++)delete this.styles[n];this.shiftLineStyles(l,o-l)}else if(this.styles[o]){r=this.styles[o];var u,h,f=c-a;for(n=a;n<c;n++)delete r[n];for(h in this.styles[o])(u=parseInt(h,10))>=c&&(r[u-f]=r[h],delete r[h])}},shiftLineStyles:function(t,n){var r=e(this.styles);for(var i in this.styles){var s=parseInt(i,10);s>t&&(this.styles[s+n]=r[s],r[s-n]||delete this.styles[s])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(t,n,r,i){var s,o={},a=!1,l=this._unwrappedTextLines[t].length===n;for(var c in r||(r=1),this.shiftLineStyles(t,r),this.styles[t]&&(s=this.styles[t][0===n?n:n-1]),this.styles[t]){var u=parseInt(c,10);u>=n&&(a=!0,o[u-n]=this.styles[t][c],l&&0===n||delete this.styles[t][c])}var h=!1;for(a&&!l&&(this.styles[t+r]=o,h=!0),h&&r--;r>0;)i&&i[r-1]?this.styles[t+r]={0:e(i[r-1])}:s?this.styles[t+r]={0:e(s)}:delete this.styles[t+r],r--;this._forceClearCache=!0},insertCharStyleObject:function(t,n,r,i){this.styles||(this.styles={});var s=this.styles[t],o=s?e(s):{};for(var a in r||(r=1),o){var l=parseInt(a,10);l>=n&&(s[l+r]=o[l],o[l-r]||delete s[l])}if(this._forceClearCache=!0,i)for(;r--;)Object.keys(i[r]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][n+r]=e(i[r]));else if(s)for(var c=s[n?n-1:1];c&&r--;)this.styles[t][n+r]=e(c)},insertNewStyleBlock:function(e,t,n){for(var r=this.get2DCursorLocation(t,!0),i=[0],s=0,o=0;o<e.length;o++)"\n"===e[o]?i[++s]=0:i[s]++;i[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,i[0],n),n=n&&n.slice(i[0]+1)),s&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+i[0],s);for(o=1;o<s;o++)i[o]>0?this.insertCharStyleObject(r.lineIndex+o,0,i[o],n):n&&this.styles[r.lineIndex+o]&&n[0]&&(this.styles[r.lineIndex+o][0]=n[0]),n=n&&n.slice(i[o]+1);i[o]>0&&this.insertCharStyleObject(r.lineIndex+o,0,i[o],n)},setSelectionStartEndWithShift:function(e,t,n){n<=e?(t===e?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=e),this.selectionStart=n):n>e&&n<t?"right"===this._selectionDirection?this.selectionEnd=n:this.selectionStart=n:(t===e?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=t),this.selectionEnd=n)},setSelectionInBoundaries:function(){var e=this.text.length;this.selectionStart>e?this.selectionStart=e:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>e?this.selectionEnd=e:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),i.util.object.extend(i.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(e){if(this.canvas){this.__newClickTime=+new Date;var t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),this._stopEvent(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y},_stopEvent:function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))},tripleClickHandler:function(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(e.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(e){if(this.__isMousedown=!1,!(!this.editable||this.group||e.transform&&e.transform.actionPerformed||e.e.button&&1!==e.e.button)){if(this.canvas){var t=this.canvas._activeObject;if(t&&t!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(e.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(e){var t=this.getSelectionStartFromPointer(e),n=this.selectionStart,r=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,r,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(e){for(var t,n=this.getLocalPointer(e),r=0,i=0,s=0,o=0,a=0,l=0,c=this._textLines.length;l<c&&s<=n.y;l++)s+=this.getHeightOfLine(l)*this.scaleY,a=l,l>0&&(o+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));i=this._getLineLeftOffset(a)*this.scaleX,t=this._textLines[a],"rtl"===this.direction&&(n.x=this.width*this.scaleX-n.x+i);for(var u=0,h=t.length;u<h&&(r=i,(i+=this.__charBounds[a][u].kernedWidth*this.scaleX)<=n.x);u++)o++;return this._getNewSelectionStartFromOffset(n,r,i,o,h)},_getNewSelectionStartFromOffset:function(e,t,n,r,i){var s=e.x-t,o=n-e.x,a=r+(o>s||o<0?0:1);return this.flipX&&(a=i-a),a>this._text.length&&(a=this._text.length),a}}),i.util.object.extend(i.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=i.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var e=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+e.top+"; left: "+e.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+e.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):i.document.body.appendChild(this.hiddenTextarea),i.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),i.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),i.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),i.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),i.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),i.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),i.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),i.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),i.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(i.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(e){if(this.isEditing){var t="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(e){var t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),this.isEditing){var n,r,s,o,a,l=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,c=this._text.length,u=l.length,h=u-c,f=this.selectionStart,d=this.selectionEnd,p=f!==d;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var g=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),m=f>g.selectionStart;p?(n=this._text.slice(f,d),h+=d-f):u<c&&(n=m?this._text.slice(d+h,d):this._text.slice(f,f-h)),r=l.slice(g.selectionEnd-h,g.selectionEnd),n&&n.length&&(r.length&&(s=this.getSelectionStyles(f,f+1,!1),s=r.map(function(){return s[0]})),p?(o=f,a=d):m?(o=d-n.length,a=d):(o=d,a=d+n.length),this.removeStyleFromTo(o,a)),r.length&&(t&&r.join("")===i.copiedText&&!i.disableStyleCopyPaste&&(s=i.copiedTextStyle),this.insertNewStyleBlock(r,f,s)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(e){this.compositionStart=e.target.selectionStart,this.compositionEnd=e.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(i.copiedText=this.getSelectedText(),i.disableStyleCopyPaste?i.copiedTextStyle=null:i.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(e){return e&&e.clipboardData||i.window.clipboardData},_getWidthBeforeCursor:function(e,t){var n,r=this._getLineLeftOffset(e);return t>0&&(r+=(n=this.__charBounds[e][t-1]).left+n.width),r},getDownCursorOffset:function(e,t){var n=this._getSelectionForOffset(e,t),r=this.get2DCursorLocation(n),i=r.lineIndex;if(i===this._textLines.length-1||e.metaKey||34===e.keyCode)return this._text.length-n;var s=r.charIndex,o=this._getWidthBeforeCursor(i,s),a=this._getIndexOnLine(i+1,o);return this._textLines[i].slice(s).length+a+1+this.missingNewlineOffset(i)},_getSelectionForOffset:function(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(e,t){var n=this._getSelectionForOffset(e,t),r=this.get2DCursorLocation(n),i=r.lineIndex;if(0===i||e.metaKey||33===e.keyCode)return-n;var s=r.charIndex,o=this._getWidthBeforeCursor(i,s),a=this._getIndexOnLine(i-1,o),l=this._textLines[i].slice(0,s),c=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+a-l.length+(1-c)},_getIndexOnLine:function(e,t){for(var n,r,i=this._textLines[e],s=this._getLineLeftOffset(e),o=0,a=0,l=i.length;a<l;a++)if((s+=n=this.__charBounds[e][a].width)>t){r=!0;var c=s-n,u=s,h=Math.abs(c-t);o=Math.abs(u-t)<h?a:a-1;break}return r||(o=i.length-1),o},moveCursorDown:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)},moveCursorUp:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",e)},_moveCursorUpOrDown:function(e,t){var n=this["get"+e+"CursorOffset"](t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),0!==n&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(e){var t="left"===this._selectionDirection?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),0!==e},moveCursorWithoutShift:function(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),0!==e},moveCursorLeft:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",e)},_move:function(e,t,n){var r;if(e.altKey)r=this["findWordBoundary"+n](this[t]);else{if(!e.metaKey&&35!==e.keyCode&&36!==e.keyCode)return this[t]+="Left"===n?-1:1,!0;r=this["findLineBoundary"+n](this[t])}if("undefined"!==typeof r&&this[t]!==r)return this[t]=r,!0},_moveLeft:function(e,t){return this._move(e,t,"Left")},_moveRight:function(e,t){return this._move(e,t,"Right")},moveCursorLeftWithoutShift:function(e){var t=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t},moveCursorLeftWithShift:function(e){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(e,"selectionStart")):void 0},moveCursorRight:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)},_moveCursorLeftOrRight:function(e,t){var n="moveCursor"+e+"With";this._currentCursorOpacity=1,t.shiftKey?n+="Shift":n+="outShift",this[n](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(e){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(e,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(e){var t=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t},removeChars:function(e,t){"undefined"===typeof t&&(t=e+1),this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(e,t,n,r){"undefined"===typeof r&&(r=n),r>n&&this.removeStyleFromTo(n,r);var s=i.util.string.graphemeSplit(e);this.insertNewStyleBlock(s,n,t),this._text=[].concat(this._text.slice(0,n),s,this._text.slice(r)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var e=i.util.toFixed,t=/  +/g;i.util.object.extend(i.Text.prototype,{_toSVG:function(){var e=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(e.textTop,e.textLeft);return this._wrapSVGTextAndBg(t)},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(e){var t=this.getSvgTextDecoration(this);return[e.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",t?'text-decoration="'+t+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(e,t){var n,r=[],i=[],s=e;this._setSVGBg(i);for(var o=0,a=this._textLines.length;o<a;o++)n=this._getLineLeftOffset(o),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(i,o,t+n,s),this._setSVGTextLineText(r,o,t+n,s),s+=this.getHeightOfLine(o);return{textSpans:r,textBgRects:i}},_createTextCharSpan:function(n,r,s,o){var a=n!==n.trim()||n.match(t),l=this.getSvgSpanStyles(r,a),c=l?'style="'+l+'"':"",u=r.deltaY,h="",f=i.Object.NUM_FRACTION_DIGITS;return u&&(h=' dy="'+e(u,f)+'" '),['<tspan x="',e(s,f),'" y="',e(o,f),'" ',h,c,">",i.util.string.escapeXml(n),"</tspan>"].join("")},_setSVGTextLineText:function(e,t,n,r){var s,o,a,l,c,u=this.getHeightOfLine(t),h=-1!==this.textAlign.indexOf("justify"),f="",d=0,p=this._textLines[t];r+=u*(1-this._fontSizeFraction)/this.lineHeight;for(var g=0,m=p.length-1;g<=m;g++)c=g===m||this.charSpacing,f+=p[g],a=this.__charBounds[t][g],0===d?(n+=a.kernedWidth-a.width,d+=a.width):d+=a.kernedWidth,h&&!c&&this._reSpaceAndTab.test(p[g])&&(c=!0),c||(s=s||this.getCompleteStyleDeclaration(t,g),o=this.getCompleteStyleDeclaration(t,g+1),c=i.util.hasStyleChanged(s,o,!0)),c&&(l=this._getStyleDeclaration(t,g)||{},e.push(this._createTextCharSpan(f,l,n,r)),f="",s=o,n+=d,d=0)},_pushTextBgRect:function(t,n,r,s,o,a){var l=i.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(n),' x="',e(r,l),'" y="',e(s,l),'" width="',e(o,l),'" height="',e(a,l),'"></rect>\n')},_setSVGTextLineBg:function(e,t,n,r){for(var i,s,o=this._textLines[t],a=this.getHeightOfLine(t)/this.lineHeight,l=0,c=0,u=this.getValueOfPropertyAt(t,0,"textBackgroundColor"),h=0,f=o.length;h<f;h++)i=this.__charBounds[t][h],(s=this.getValueOfPropertyAt(t,h,"textBackgroundColor"))!==u?(u&&this._pushTextBgRect(e,u,n+c,r,l,a),c=i.left,l=i.width,u=s):l+=i.kernedWidth;s&&this._pushTextBgRect(e,s,n+c,r,l,a)},_getFillAttributes:function(e){var t=e&&"string"===typeof e?new i.Color(e):"";return t&&t.getSource()&&1!==t.getAlpha()?'opacity="'+t.getAlpha()+'" fill="'+t.setAlpha(1).toRgb()+'"':'fill="'+e+'"'},_getSVGLineTopOffset:function(e){for(var t,n=0,r=0;r<e;r++)n+=this.getHeightOfLine(r);return t=this.getHeightOfLine(r),{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*t/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(e){return i.Object.prototype.getSvgStyles.call(this,e)+" white-space: pre;"}})}(),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Textbox=t.util.createClass(t.IText,t.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:t.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(e){for(var t=0,n=0,r=0,i={},s=0;s<e.graphemeLines.length;s++)"\n"===e.graphemeText[r]&&s>0?(n=0,r++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[r])&&s>0&&(n++,r++),i[s]={line:t,offset:n},r+=e.graphemeLines[s].length,n+=e.graphemeLines[s].length;return i},styleHas:function(e,n){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[n];r&&(n=r.line)}return t.Text.prototype.styleHas.call(this,e,n)},isEmptyStyles:function(e){if(!this.styles)return!0;var t,n,r=0,i=!1,s=this._styleMap[e],o=this._styleMap[e+1];for(var a in s&&(e=s.line,r=s.offset),o&&(i=o.line===e,t=o.offset),n="undefined"===typeof e?this.styles:{line:this.styles[e]})for(var l in n[a])if(l>=r&&(!i||l<t))for(var c in n[a][l])return!1;return!0},_getStyleDeclaration:function(e,t){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[e];if(!n)return null;e=n.line,t=n.offset+t}return this.callSuper("_getStyleDeclaration",e,t)},_setStyleDeclaration:function(e,t,n){var r=this._styleMap[e];e=r.line,t=r.offset+t,this.styles[e][t]=n},_deleteStyleDeclaration:function(e,t){var n=this._styleMap[e];e=n.line,t=n.offset+t,delete this.styles[e][t]},_getLineStyle:function(e){var t=this._styleMap[e];return!!this.styles[t.line]},_setLineStyle:function(e){var t=this._styleMap[e];this.styles[t.line]={}},_wrapText:function(e,t){var n,r=[];for(this.isWrapping=!0,n=0;n<e.length;n++)r=r.concat(this._wrapLine(e[n],n,t));return this.isWrapping=!1,r},_measureWord:function(e,t,n){var r,i=0;n=n||0;for(var s=0,o=e.length;s<o;s++){i+=this._getGraphemeBox(e[s],t,s+n,r,true).kernedWidth,r=e[s]}return i},_wrapLine:function(e,n,r,i){var s=0,o=this.splitByGrapheme,a=[],l=[],c=o?t.util.string.graphemeSplit(e):e.split(this._wordJoiners),u="",h=0,f=o?"":" ",d=0,p=0,g=0,m=!0,v=this._getWidthOfCharSpacing();i=i||0;0===c.length&&c.push([]),r-=i;for(var y=0;y<c.length;y++)u=o?c[y]:t.util.string.graphemeSplit(c[y]),d=this._measureWord(u,n,h),h+=u.length,(s+=p+d-v)>r&&!m?(a.push(l),l=[],s=d,m=!0):s+=v,m||o||l.push(f),l=l.concat(u),p=o?0:this._measureWord([f],n,h),h++,m=!1,d>g&&(g=d);return y&&a.push(l),g+i>this.dynamicMinWidth&&(this.dynamicMinWidth=g-v+i),a},isEndOfWrapping:function(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line},missingNewlineOffset:function(e){return this.splitByGrapheme?this.isEndOfWrapping(e)?1:0:1},_splitTextIntoLines:function(e){for(var n=t.Text.prototype._splitTextIntoLines.call(this,e),r=this._wrapText(n.lines,this.width),i=new Array(r.length),s=0;s<r.length;s++)i[s]=r[s].join("");return n.lines=i,n.graphemeLines=r,n},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var e={};for(var t in this._styleMap)this._textLines[t]&&(e[this._styleMap[t].line]=1);for(var t in this.styles)e[t]||delete this.styles[t]},toObject:function(e){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(e))}}),t.Textbox.fromObject=function(e,n){var r=t.util.stylesFromArray(e.styles,e.text),i=Object.assign({},e,{styles:r});return t.Object._fromObject("Textbox",i,n,"text")}}(t),function(){var e=i.controlsUtils,t=e.scaleSkewCursorStyleHandler,n=e.scaleCursorStyleHandler,r=e.scalingEqually,s=e.scalingYOrSkewingX,o=e.scalingXOrSkewingY,a=e.scaleOrSkewActionName,l=i.Object.prototype.controls;if(l.ml=new i.Control({x:-.5,y:0,cursorStyleHandler:t,actionHandler:o,getActionName:a}),l.mr=new i.Control({x:.5,y:0,cursorStyleHandler:t,actionHandler:o,getActionName:a}),l.mb=new i.Control({x:0,y:.5,cursorStyleHandler:t,actionHandler:s,getActionName:a}),l.mt=new i.Control({x:0,y:-.5,cursorStyleHandler:t,actionHandler:s,getActionName:a}),l.tl=new i.Control({x:-.5,y:-.5,cursorStyleHandler:n,actionHandler:r}),l.tr=new i.Control({x:.5,y:-.5,cursorStyleHandler:n,actionHandler:r}),l.bl=new i.Control({x:-.5,y:.5,cursorStyleHandler:n,actionHandler:r}),l.br=new i.Control({x:.5,y:.5,cursorStyleHandler:n,actionHandler:r}),l.mtr=new i.Control({x:0,y:-.5,actionHandler:e.rotationWithSnapping,cursorStyleHandler:e.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),i.Textbox){var c=i.Textbox.prototype.controls={};c.mtr=l.mtr,c.tr=l.tr,c.br=l.br,c.tl=l.tl,c.bl=l.bl,c.mt=l.mt,c.mb=l.mb,c.mr=new i.Control({x:.5,y:0,actionHandler:e.changeWidth,cursorStyleHandler:t,actionName:"resizing"}),c.ml=new i.Control({x:-.5,y:0,actionHandler:e.changeWidth,cursorStyleHandler:t,actionName:"resizing"})}}()},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),C=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),E=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case C:return"Portal";case S:return"Profiler";case A:return"StrictMode";case P:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=X(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,_e=null,Ae=null;function Se(e){if(e=bi(e)){if("function"!==typeof Ce)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),Ce(e.stateNode,e.type,t))}}function Te(e){_e?Ae?Ae.push(e):Ae=[e]:_e=e}function Ee(){if(_e){var e=_e,t=Ae;if(Ae=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function ke(e,t){return e(t)}function Pe(){}var Oe=!1;function Ie(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return ke(e,t,n)}finally{Oe=!1,(null!==_e||null!==Ae)&&(Pe(),Ee())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ue){Re=!1}function je(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Be=null,Ue={onError:function(e){Le=!0,Me=e}};function Ve(e,t,n,r,i,s,o,a,l){Le=!1,Me=null,je.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(s(188))}function Xe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,Ct,_t,At,St,Tt=!1,Et=[],kt=null,Pt=null,Ot=null,It=new Map,Dt=new Map,Rt=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Ct(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void St(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Ct(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Tt=!1,null!==kt&&Ft(kt)&&(kt=null),null!==Pt&&Ft(Pt)&&(Pt=null),null!==Ot&&Ft(Ot)&&(Ot=null),It.forEach(Bt),Dt.forEach(Bt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Vt(t,e)}if(0<Et.length){Vt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==kt&&Vt(kt,e),null!==Pt&&Vt(Pt,e),null!==Ot&&Vt(Ot,e),It.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var Ht=w.ReactCurrentBatchConfig,Wt=!0;function Xt(e,t,n,r){var i=bt,s=Ht.transition;Ht.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=i,Ht.transition=s}}function Kt(e,t,n,r){var i=bt,s=Ht.transition;Ht.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=i,Ht.transition=s}}function qt(e,t,n,r){if(Wt){var i=Qt(e,t,n,r);if(null===i)Wr(e,t,r,Gt,n),jt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return kt=Lt(kt,e,t,n,r,i),!0;case"dragenter":return Pt=Lt(Pt,e,t,n,r,i),!0;case"mouseover":return Ot=Lt(Ot,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return It.set(s,Lt(It.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Lt(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<Nt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&xt(s),null===(s=Qt(e,t,n,r))&&Wr(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=yi(e=xe(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=M({},cn,{view:0,detail:0}),fn=sn(hn),dn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(dn),gn=sn(M({},dn,{dataTransfer:0})),mn=sn(M({},hn,{relatedTarget:0})),vn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),wn=sn(M({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return An}var Tn=M({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=sn(Tn),kn=sn(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),On=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(In),Rn=[9,13,27,32],Nn=u&&"CompositionEvent"in window,jn=null;u&&"documentMode"in document&&(jn=document.documentMode);var Ln=u&&"TextEvent"in window&&!jn,Mn=u&&(!Nn||jn&&8<jn&&11>=jn),Fn=String.fromCharCode(32),Bn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Xn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,qn=null;function Gn(e){Fr(e,0)}function Qn(e){if(q(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Zn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),qn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(qn)){var t=[];Xn(t,qn,e,xe(e)),Ie(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(qn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==G(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},_r={},Ar={};function Sr(e){if(_r[e])return _r[e];if(!Cr[e])return e;var t,n=Cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ar)return _r[e]=n[t];return e}u&&(Ar=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);var Tr=Sr("animationend"),Er=Sr("animationiteration"),kr=Sr("animationstart"),Pr=Sr("transitionend"),Or=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Or.set(e,t),l(t,[e])}for(var Rr=0;Rr<Ir.length;Rr++){var Nr=Ir[Rr];Dr(Nr.toLowerCase(),"on"+(Nr[0].toUpperCase()+Nr.slice(1)))}Dr(Tr,"onAnimationEnd"),Dr(Er,"onAnimationIteration"),Dr(kr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Pr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Be=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,c),s=l}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Br(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Yt(t)){case 1:var i=Xt;break;case 4:i=Kt;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Ie(function(){var r=s,i=xe(n),o=[];e:{var a=Or.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Tr:case Er:case kr:l=vn;break;case Pr:l=On;break;case"scroll":l=fn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=kn}var u=0!==(4&t),h=!u&&"scroll"===e,f=u?null!==a?a+"Capture":null:a;u=[];for(var d,p=r;null!==p;){var g=(d=p).stateNode;if(5===d.tag&&null!==g&&(d=g,null!==f&&(null!=(g=De(p,f))&&u.push(Xr(p,g,d)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=kn,g="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==l?a:wi(l),d=null==c?a:wi(c),(a=new u(g,p+"leave",l,n,i)).target=h,a.relatedTarget=d,g=null,yi(i)===r&&((u=new u(f,p+"enter",c,n,i)).target=d,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(f=c,p=0,d=u=l;d;d=qr(d))p++;for(d=0,g=f;g;g=qr(g))d++;for(;0<p-d;)u=qr(u),p--;for(;0<d-p;)f=qr(f),d--;for(;p--;){if(u===f||null!==f&&u===f.alternate)break e;u=qr(u),f=qr(f)}u=null}else u=null;null!==l&&Gr(o,a,l,u,!1),null!==c&&null!==h&&Gr(o,h,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Yn;else if(Wn(a))if(Jn)m=or;else{m=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sr);switch(m&&(m=m(e,r))?Xn(o,m,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?wi(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(o,n,i)}var y;if(Nn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(y=en()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(v=Kr(r,b)).length&&(b=new wn(b,e,null,n,i),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Nn&&Un(e,t)?(e=en(),$t=Zt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Fr(o,t)})}function Xr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Xr(e,s,i)),null!=(s=De(e,t))&&r.push(Xr(e,s,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=De(n,s))&&o.unshift(Xr(n,l,a)):i||null!=(l=De(n,s))&&o.push(Xr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[fi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[di]||null}var Ci=[],_i=-1;function Ai(e){return{current:e}}function Si(e){0>_i||(e.current=Ci[_i],Ci[_i]=null,_i--)}function Ti(e,t){_i++,Ci[_i]=e.current,e.current=t}var Ei={},ki=Ai(Ei),Pi=Ai(!1),Oi=Ei;function Ii(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Si(Pi),Si(ki)}function Ni(e,t,n){if(ki.current!==Ei)throw Error(s(168));Ti(ki,t),Ti(Pi,n)}function ji(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,H(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Oi=ki.current,Ti(ki,e),Ti(Pi,Pi.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=ji(e,t,Oi),r.__reactInternalMemoizedMergedChildContext=e,Si(Pi),Si(ki),Ti(ki,e)):Si(Pi),Ti(Pi,n)}var Fi=null,Bi=!1,Ui=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Ui&&null!==Fi){Ui=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Bi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),qe($e,zi),i}finally{bt=t,Ui=!1}}return null}var Hi=[],Wi=0,Xi=null,Ki=0,qi=[],Gi=0,Qi=null,Yi=1,Ji="";function Zi(e,t){Hi[Wi++]=Ki,Hi[Wi++]=Xi,Xi=e,Ki=t}function $i(e,t,n){qi[Gi++]=Yi,qi[Gi++]=Ji,qi[Gi++]=Qi,Qi=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Yi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function ts(e){for(;e===Xi;)Xi=Hi[--Wi],Hi[Wi]=null,Ki=Hi[--Wi],Hi[Wi]=null;for(;e===Qi;)Qi=qi[--Gi],qi[Gi]=null,Ji=qi[--Gi],qi[Gi]=null,Yi=qi[--Gi],qi[Gi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Ic(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ic(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw fs(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=rs;e;)e=ci(e.nextSibling)}function ds(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=w.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===_?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&ys(s)===t.type)?((r=i(t,n.props)).ref=ms(e,t,n),r.return=e,r):((r=Nc(n.type,n.key,n.props,null,e.mode,r)).ref=ms(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=jc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Nc(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case C:return(t=Fc(t,e.mode,n)).return=e,t;case D:return f(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=jc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case C:return n.key===i?u(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||j(n))return null!==i?null:h(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case C:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||j(r))return h(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function g(i,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=d(i,h,a[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,g),null===u?c=v:u.sibling=v,u=v,h=m}if(g===a.length)return n(i,h),is&&Zi(i,g),c;if(null===h){for(;g<a.length;g++)null!==(h=f(i,a[g],l))&&(s=o(h,s,g),null===u?c=h:u.sibling=h,u=h);return is&&Zi(i,g),c}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(i,e)}),is&&Zi(i,g),c}function m(i,a,l,c){var u=j(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=d(i,g,y.value,c);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(i,g),a=o(b,a,m),null===h?u=b:h.sibling=b,h=b,g=v}if(y.done)return n(i,g),is&&Zi(i,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=f(i,y.value,c))&&(a=o(y,a,m),null===h?u=y:h.sibling=y,h=y);return is&&Zi(i,m),u}for(g=r(i,g);!y.done;m++,y=l.next())null!==(y=p(g,i,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=o(y,a,m),null===h?u=y:h.sibling=y,h=y);return e&&g.forEach(function(e){return t(i,e)}),is&&Zi(i,m),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===_){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&ys(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=ms(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===_?((s=jc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Nc(o.type,o.key,o.props,null,r.mode,l)).ref=ms(r,s,o),l.return=r,r=l)}return a(r);case C:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(o,r.mode,l)).return=r,r=s}return a(r);case D:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return g(r,s,o,l);if(j(o))return m(r,s,o,l);vs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Mc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var ws=bs(!0),xs=bs(!1),Cs=Ai(null),_s=null,As=null,Ss=null;function Ts(){Ss=As=_s=null}function Es(e){var t=Cs.current;Si(Cs),e._currentValue=t}function ks(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ps(e,t){_s=e,Ss=As=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Os(e){var t=e._currentValue;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},null===As){if(null===_s)throw Error(s(308));As=e,_s.dependencies={lanes:0,firstContext:e}}else As=As.next=e;return t}var Is=null;function Ds(e){null===Is?Is=[e]:Is.push(e)}function Rs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ds(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var js=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&kl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Ds(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Vs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zs(e,t,n,r){var i=e.updateQueue;js=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var f=a.lane,d=a.eventTime;if((r&f)===f){null!==u&&(u=u.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(f=t,d=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=g.payload)?p.call(d,h,f):p)||void 0===f)break e;h=M({},h,f);break e;case 2:js=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=d,l=h):u=u.next=d,o|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(f=a).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ll|=o,e.lanes=o,e.memoizedState=h}}function Hs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Ws={},Xs=Ai(Ws),Ks=Ai(Ws),qs=Ai(Ws);function Gs(e){if(e===Ws)throw Error(s(174));return e}function Qs(e,t){switch(Ti(qs,t),Ti(Ks,e),Ti(Xs,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Xs),Ti(Xs,t)}function Ys(){Si(Xs),Si(Ks),Si(qs)}function Js(e){Gs(qs.current);var t=Gs(Xs.current),n=le(t,e.type);t!==n&&(Ti(Ks,e),Ti(Xs,n))}function Zs(e){Ks.current===e&&(Si(Xs),Si(Ks))}var $s=Ai(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=w.ReactCurrentDispatcher,io=w.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function go(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function mo(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?$o:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Zo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function vo(){var e=0!==ho;return ho=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((so&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=f,a=r):c=c.next=f,oo.lanes|=h,Ll|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ll|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Co(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function _o(){}function Ao(e,t){var n=oo,r=bo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Lo(Eo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Io(9,To.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(s(349));0!==(30&so)||So(n,t,i)}return i}function So(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,ko(t)&&Po(e)}function Eo(e,t,n){return n(function(){ko(t)&&Po(e)})}function ko(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Po(e){var t=Ns(e,1);null!==t&&nc(t,e,1,-1)}function Oo(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Go.bind(null,oo,e),[t.memoizedState,e]}function Io(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Do(){return bo().memoizedState}function Ro(e,t,n,r){var i=yo();oo.flags|=e,i.memoizedState=Io(1|t,n,void 0,void 0===r?null:r)}function No(e,t,n,r){var i=bo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&go(r,o.deps))return void(i.memoizedState=Io(t,n,s,r))}oo.flags|=e,i.memoizedState=Io(1|t,n,s,r)}function jo(e,t){return Ro(8390656,8,e,t)}function Lo(e,t){return No(2048,8,e,t)}function Mo(e,t){return No(4,2,e,t)}function Fo(e,t){return No(4,4,e,t)}function Bo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Uo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,No(4,4,Bo.bind(null,t,e),n)}function Vo(){}function zo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ho(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wo(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),oo.lanes|=n,Ll|=n,e.baseState=!0),t)}function Xo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{bt=n,io.transition=r}}function Ko(){return bo().memoizedState}function qo(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e))Yo(t,n);else if(null!==(n=Rs(e,t,n,r))){nc(n,e,r,ec()),Jo(n,t,r)}}function Go(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Yo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ds(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Rs(e,t,i,r))&&(nc(n,e,r,i=ec()),Jo(n,t,r))}}function Qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Yo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Zo={readContext:Os,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},$o={readContext:Os,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Os,useEffect:jo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ro(4194308,4,Bo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ro(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Oo,useDebugValue:Vo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Oo(!1),t=e[0];return e=Xo.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=yo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Pl)throw Error(s(349));0!==(30&so)||So(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,jo(Eo.bind(null,r,o,e),[e]),r.flags|=2048,Io(9,To.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Pl.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Os,useCallback:zo,useContext:Os,useEffect:Lo,useImperativeHandle:Uo,useInsertionEffect:Mo,useLayoutEffect:Fo,useMemo:Ho,useReducer:xo,useRef:Do,useState:function(){return xo(wo)},useDebugValue:Vo,useDeferredValue:function(e){return Wo(bo(),ao.memoizedState,e)},useTransition:function(){return[xo(wo)[0],bo().memoizedState]},useMutableSource:_o,useSyncExternalStore:Ao,useId:Ko,unstable_isNewReconciler:!1},ta={readContext:Os,useCallback:zo,useContext:Os,useEffect:Lo,useImperativeHandle:Uo,useInsertionEffect:Mo,useLayoutEffect:Fo,useMemo:Ho,useReducer:Co,useRef:Do,useState:function(){return Co(wo)},useDebugValue:Vo,useDeferredValue:function(e){var t=bo();return null===ao?t.memoizedState=e:Wo(t,ao.memoizedState,e)},useTransition:function(){return[Co(wo)[0],bo().memoizedState]},useMutableSource:_o,useSyncExternalStore:Ao,useId:Ko,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Bs(e,s,i))&&(nc(t,e,i,r),Us(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Bs(e,s,i))&&(nc(t,e,i,r),Us(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Bs(e,i,r))&&(nc(t,e,r,n),Us(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=Ei,s=t.contextType;return"object"===typeof s&&null!==s?s=Os(s):(i=Di(t)?Oi:ki.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ii(e,i):Ei),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Os(s):(s=Di(t)?Oi:ki.current,i.context=Ii(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),zs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fa="function"===typeof WeakMap?WeakMap:Map;function da(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Xl=r),ha(0,t)},n}function pa(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Bs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=w.ReactCurrentOwner,ba=!1;function wa(e,t,n,r){t.child=null===e?xs(t,null,n,r):ws(t,e.child,n,r)}function xa(e,t,n,r,i){n=n.render;var s=t.ref;return Ps(t,i),r=mo(e,t,n,r,s,i),n=vo(),null===e||ba?(is&&n&&es(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ca(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Nc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,_a(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Rc(s,r)).ref=t.ref,e.return=t,t.child=e}function _a(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ta(e,t,n,r,i)}function Aa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Rl,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Rl,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Rl,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Rl,Dl),Dl|=r;return wa(e,t,i,n),t.child}function Sa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var s=Di(n)?Oi:ki.current;return s=Ii(t,s),Ps(t,i),n=mo(e,t,n,r,s,i),r=vo(),null===e||ba?(is&&r&&es(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ea(e,t,n,r,i){if(Di(n)){var s=!0;Li(t)}else s=!1;if(Ps(t,i),null===t.stateNode)Ha(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Os(c):c=Ii(t,c=Di(n)?Oi:ki.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),js=!1;var f=t.memoizedState;o.state=f,zs(t,r,o,i),l=t.memoizedState,a!==r||f!==l||Pi.current||js?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=js||sa(t,n,a,r,f,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ms(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Os(l):l=Ii(t,l=Di(n)?Oi:ki.current);var d=n.getDerivedStateFromProps;(u="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||f!==l)&&aa(t,o,r,l),js=!1,f=t.memoizedState,o.state=f,zs(t,r,o,i);var p=t.memoizedState;a!==h||f!==p||Pi.current||js?("function"===typeof d&&(ra(t,n,d,r),p=t.memoizedState),(c=js||sa(t,n,c,r,f,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return ka(e,t,n,r,s,i)}function ka(e,t,n,r,i,s){Sa(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Wa(e,t,s);r=t.stateNode,ya.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,a,s)):wa(e,t,a,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?Ni(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ni(0,t.context,!1),Qs(e,t.containerInfo)}function Oa(e,t,n,r,i){return ds(),ps(i),t.flags|=256,wa(e,t,n,r),t.child}var Ia,Da,Ra,Na,ja={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ma(e,t,n){var r,i=t.pendingProps,o=$s.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti($s,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Lc(l,i,0,null),e=jc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=La(n),t.memoizedState=ja,e):Fa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(o=jc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,a),t.child.memoizedState=La(a),t.memoizedState=ja,o);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ba(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Pl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ns(e,i),nc(r,e,i,-1))}return gc(),Ba(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(qi[Gi++]=Yi,qi[Gi++]=Ji,qi[Gi++]=Qi,Yi=e.id,Ji=e.overflow,Qi=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Rc(r,a):(a=jc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?La(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=ja,i}return e=(a=e.child).sibling,i=Rc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){return null!==r&&ps(r),ws(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ks(e.return,t,n)}function Va(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function za(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=$s.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,n,t);else if(19===e.tag)Ua(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti($s,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,s);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xa(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Di(t.type)&&Ri(),Ka(t),null;case 3:return r=t.stateNode,Ys(),Si(Pi),Si(ki),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Da(e,t),Ka(t),null;case 5:Zs(t);var i=Gs(qs.current);if(n=t.type,null!==e&&null!=t.stateNode)Ra(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=Gs(Xs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<jr.length;i++)Br(jr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Y(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ie(r,o),Br("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":K(r),$(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fi]=t,e[di]=r,Ia(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<jr.length;i++)Br(jr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&fe(e,u):"number"===typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Br("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":K(e),$(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Na(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Gs(qs.current),Gs(Xs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Ka(t),null;case 13:if(Si($s),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))fs(),ds(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[fi]=t}else ds(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$s.current)?0===Nl&&(Nl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return Ys(),Da(e,t),null===e&&zr(t.stateNode.containerInfo),Ka(t),null;case 10:return Es(t.type._context),Ka(t),null;case 19:if(Si($s),null===(o=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Xa(o,!1);else{if(0!==Nl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Xa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti($s,1&$s.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>zl&&(t.flags|=128,r=!0,Xa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Xa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ka(t),null}else 2*Je()-o.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Xa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=$s.current,Ti($s,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ga(e,t){switch(ts(t),t.tag){case 1:return Di(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),Si(Pi),Si(ki),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Si($s),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ds()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si($s),null;case 4:return Ys(),null;case 10:return Es(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ia=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Ra=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gs(Xs.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Na=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,Ya=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Za=null;function $a(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ac(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ac(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[gi],delete t[mi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)dl(e,t,n),n=n.sibling}function dl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ya||$a(n,t);case 6:var r=ul,i=hl;ul=null,fl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,fl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ya&&($a(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ac(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,fl(e,t,n),Ya=r):fl(e,t,n);break;default:fl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach(function(t){var r=kc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));dl(o,a,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ac(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){Ac(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Ac(e,e.return,m)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&$a(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&$a(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){Ac(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),be(l,a);var u=be(l,o);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];"style"===h?me(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):b(i,h,f,u)}switch(l){case"input":Z(i,o);break;case"textarea":se(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ac(e,e.return,m)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ac(e,e.return,m)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ac(e,e.return,m)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Je())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(u=Ya)||h,gl(t,e),Ya=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(f=Za=h;null!==Za;){switch(p=(d=Za).child,d.tag){case 0:case 11:case 14:case 15:nl(4,d,d.return);break;case 1:$a(d,d.return);var g=d.stateNode;if("function"===typeof g.componentWillUnmount){r=d,n=d.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Ac(r,n,m)}}break;case 5:$a(d,d.return);break;case 22:if(null!==d.memoizedState){xl(f);continue}}null!==p?(p.return=d,Za=p):xl(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=f.stateNode,a=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Ac(e,e.return,m)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){Ac(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gl(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){Ac(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ya;a=Qa;var c=Ya;if(Qa=o,(Ya=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?Cl(i):null!==l?(l.return=o,Za=l):Cl(i);for(;null!==s;)Za=s,bl(s,t,n),s=s.sibling;Za=i,Qa=a,Ya=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):wl(e)}}function wl(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Hs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&zt(f)}}}break;default:throw Error(s(163))}Ya||512&t.flags&&il(t)}catch(d){Ac(t,t.return,d)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function xl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Cl(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ac(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ac(t,i,l)}}var s=t.return;try{il(t)}catch(l){Ac(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Ac(t,o,l)}}}catch(l){Ac(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var _l,Al=Math.ceil,Sl=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,El=w.ReactCurrentBatchConfig,kl=0,Pl=null,Ol=null,Il=0,Dl=0,Rl=Ai(0),Nl=0,jl=null,Ll=0,Ml=0,Fl=0,Bl=null,Ul=null,Vl=0,zl=1/0,Hl=null,Wl=!1,Xl=null,Kl=null,ql=!1,Gl=null,Ql=0,Yl=0,Jl=null,Zl=-1,$l=0;function ec(){return 0!==(6&kl)?Je():-1!==Zl?Zl:Zl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&kl)&&0!==Il?Il&-Il:null!==gs.transition?(0===$l&&($l=gt()),$l):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(s(185));vt(e,n,r),0!==(2&kl)&&e===Pl||(e===Pl&&(0===(2&kl)&&(Ml|=n),4===Nl&&ac(e,Il)),rc(e,r),1===n&&0===kl&&0===(1&t.mode)&&(zl=Je()+500,Bi&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=dt(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ft(e,e===Pl?Il:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Bi=!0,Vi(e)}(lc.bind(null,e)):Vi(lc.bind(null,e)),oi(function(){0===(6&kl)&&zi()}),n=null;else{switch(wt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zl=-1,$l=0,0!==(6&kl))throw Error(s(327));var n=e.callbackNode;if(Cc()&&e.callbackNode!==n)return null;var r=ft(e,e===Pl?Il:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=kl;kl|=2;var o=pc();for(Pl===e&&Il===t||(Hl=null,zl=Je()+500,fc(e,t));;)try{yc();break}catch(l){dc(e,l)}Ts(),Sl.current=o,kl=i,null!==Ol?t=0:(Pl=null,Il=0,t=Nl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=jl,fc(e,0),ac(e,r),rc(e,Je()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=sc(e,o))),1===t))throw n=jl,fc(e,0),ac(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Ul,Hl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Vl+500-Je())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Ul,Hl),t);break}xc(e,Ul,Hl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Al(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Ul,Hl),r);break}xc(e,Ul,Hl);break;default:throw Error(s(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Ul,Ul=n,null!==t&&oc(t)),e}function oc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function ac(e,t){for(t&=~Fl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&kl))throw Error(s(327));Cc();var t=ft(e,0);if(0===(1&t))return rc(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=jl,fc(e,0),ac(e,t),rc(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ul,Hl),rc(e,Je()),null}function cc(e,t){var n=kl;kl|=1;try{return e(t)}finally{0===(kl=n)&&(zl=Je()+500,Bi&&zi())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&kl)&&Cc();var t=kl;kl|=1;var n=El.transition,r=bt;try{if(El.transition=null,bt=1,e)return e()}finally{bt=r,El.transition=n,0===(6&(kl=t))&&zi()}}function hc(){Dl=Rl.current,Si(Rl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ol)for(n=Ol.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:Ys(),Si(Pi),Si(ki),no();break;case 5:Zs(r);break;case 4:Ys();break;case 13:case 19:Si($s);break;case 10:Es(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Pl=e,Ol=e=Rc(e.current,null),Il=Dl=t,Nl=0,jl=null,Fl=Ml=Ll=0,Ul=Bl=null,null!==Is){for(t=0;t<Is.length;t++)if(null!==(r=(n=Is[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Is=null}return e}function dc(e,t){for(;;){var n=Ol;try{if(Ts(),ro.current=Zo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,Tl.current=null,null===n||null===n.return){Nl=1,jl=t,Ol=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Il,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ma(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ga(o,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=ma(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),ps(ca(c,l));break e}}o=c=ca(c,l),4!==Nl&&(Nl=2),null===Bl?Bl=[o]:Bl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,da(0,c,t));break e;case 1:l=c;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function pc(){var e=Sl.current;return Sl.current=Zo,null===e?Zo:e}function gc(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===Pl||0===(268435455&Ll)&&0===(268435455&Ml)||ac(Pl,Il)}function mc(e,t){var n=kl;kl|=2;var r=pc();for(Pl===e&&Il===t||(Hl=null,fc(e,t));;)try{vc();break}catch(i){dc(e,i)}if(Ts(),kl=n,Sl.current=r,null!==Ol)throw Error(s(261));return Pl=null,Il=0,Nl}function vc(){for(;null!==Ol;)bc(Ol)}function yc(){for(;null!==Ol&&!Qe();)bc(Ol)}function bc(e){var t=_l(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?wc(e):Ol=t,Tl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qa(n,t,Dl)))return void(Ol=n)}else{if(null!==(n=Ga(n,t)))return n.flags&=32767,void(Ol=n);if(null===e)return Nl=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Nl&&(Nl=5)}function xc(e,t,n){var r=bt,i=El.transition;try{El.transition=null,bt=1,function(e,t,n,r){do{Cc()}while(null!==Gl);if(0!==(6&kl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Pl&&(Ol=Pl=null,Il=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Pc(tt,function(){return Cc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=El.transition,El.transition=null;var a=bt;bt=1;var l=kl;kl|=4,Tl.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(l=a+i),f!==o||0!==r&&3!==f.nodeType||(c=a+r),3===f.nodeType&&(a+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++u===i&&(l=a),d===o&&++h===r&&(c=a),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:na(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(x){Ac(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}g=tl,tl=!1}(e,n),ml(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Ye(),kl=l,bt=a,El.transition=o}else e.current=n;if(ql&&(ql=!1,Gl=e,Ql=i),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Xl,Xl=null,e;0!==(1&Ql)&&0!==e.tag&&Cc(),o=e.pendingLanes,0!==(1&o)?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,zi()}(e,t,n,r)}finally{El.transition=i,bt=r}return null}function Cc(){if(null!==Gl){var e=wt(Ql),t=El.transition,n=bt;try{if(El.transition=null,bt=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Ql=0,0!==(6&kl))throw Error(s(331));var i=kl;for(kl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var f=h.child;if(null!==f)f.return=h,Za=f;else for(;null!==Za;){var d=(h=Za).sibling,p=h.return;if(sl(h),h===u){Za=null;break}if(null!==d){d.return=p,Za=d;break}Za=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Za=y;break e}Za=o.return}}var b=e.current;for(Za=b;null!==Za;){var w=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Za=w;else e:for(a=b;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(C){Ac(l,l.return,C)}if(l===a){Za=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Za=x;break e}Za=l.return}}if(kl=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(C){}r=!0}return r}finally{bt=n,El.transition=t}}return!1}function _c(e,t,n){e=Bs(e,t=da(0,t=ca(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Ac(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Bs(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Il&n)===n&&(4===Nl||3===Nl&&(130023424&Il)===Il&&500>Je()-Vl?fc(e,0):Fl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ns(e,t))&&(vt(e,t,n),rc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function kc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tc(e,n)}function Pc(e,t){return qe(e,t)}function Oc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(e,t,n,r){return new Oc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Ic(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Dc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case _:return jc(n.children,i,o,t);case A:a=8,i|=8;break;case S:return(e=Ic(12,n,t,2|i)).elementType=S,e.lanes=o,e;case P:return(e=Ic(13,n,t,i)).elementType=P,e.lanes=o,e;case O:return(e=Ic(19,n,t,i)).elementType=O,e.lanes=o,e;case R:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case E:a=9;break e;case k:a=11;break e;case I:a=14;break e;case D:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ic(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function jc(e,t,n,r){return(e=Ic(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Ic(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Ic(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ic(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,s,o,a,l){return e=new Bc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ic(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function Vc(e){if(!e)return Ei;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Di(n))return ji(e,n,t)}return t}function zc(e,t,n,r,i,s,o,a,l){return(e=Uc(n,r,!0,e,0,s,0,a,l)).context=Vc(null),n=e.current,(s=Fs(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Bs(n,s,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Hc(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Bs(i,t,o))&&(nc(e,i,o,s),Us(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Xc(e,t),(e=e.alternate)&&Xc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pi.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Pa(t),ds();break;case 5:Js(t);break;case 1:Di(t.type)&&Li(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(Cs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti($s,1&$s.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ma(e,t,n):(Ti($s,1&$s.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ti($s,1&$s.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return za(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti($s,$s.current),r)break;return null;case 22:case 23:return t.lanes=0,Aa(e,t,n)}return Wa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&$i(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=Ii(t,ki.current);Ps(t,n),i=mo(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=ka(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===I)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=Ea(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=Ca(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Pa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ms(e,t),zs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Oa(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Oa(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ds(),r===i){t=Wa(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Sa(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ma(e,t,n);case 4:return Qs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(Cs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Pi.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Fs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),ks(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ks(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ps(t,n),r=r(i=Os(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Ca(e,t,r,i=na(r.type,i),n);case 15:return _a(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),Ha(e,t),t.tag=1,Di(r)?(e=!0,Li(t)):e=!1,Ps(t,n),oa(t,r,i),la(t,r,i,n),ka(null,t,r,!0,e,n);case 19:return za(e,t,n);case 22:return Aa(e,t,n)}throw Error(s(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function $c(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Wc(o);a.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wc(o);s.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),uc(function(){Hc(t,l,n,r)}),l}(n,t,e,i,r);return Wc(o)}Qc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hc(e,t,null,null)},Qc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Hc(null,e,null,null)}),t[pi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=At();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Je()),0===(6&kl)&&(zl=Je()+500,zi()))}break;case 13:uc(function(){var t=Ns(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},Ct=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Ns(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},At=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ce=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));q(r),Z(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},ke=cc,Pe=uc;var eu={usingClientEntryPoint:!1,Events:[bi,wi,xi,Te,Ee,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var n=!1,r="",i=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Xe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},748:()=>{},853:(e,t,n)=>{"use strict";e.exports=n(234)},900:e=>{"use strict";e.exports=JSON.parse('{"description":"The iconic font, CSS, and SVG framework","keywords":["font","awesome","fontawesome","icon","svg","bootstrap"],"homepage":"https://fontawesome.com","bugs":{"url":"https://github.com/FortAwesome/Font-Awesome/issues"},"author":"The Font Awesome Team (https://github.com/orgs/FortAwesome/people)","repository":{"type":"git","url":"https://github.com/FortAwesome/Font-Awesome"},"engines":{"node":">=6"},"dependencies":{"@fortawesome/fontawesome-common-types":"6.5.2"},"version":"6.5.2","name":"@fortawesome/fontawesome-svg-core","main":"index.js","module":"index.mjs","jsnext:main":"index.mjs","style":"styles.css","license":"MIT","types":"./index.d.ts","exports":{".":{"types":"./index.d.ts","module":"./index.mjs","import":"./index.mjs","require":"./index.js","style":"./styles.css","default":"./index.js"},"./index":{"types":"./index.d.ts","module":"./index.mjs","import":"./index.mjs","require":"./index.js","default":"./index.js"},"./index.js":{"types":"./index.d.ts","module":"./index.mjs","import":"./index.mjs","require":"./index.js","default":"./index.js"},"./plugins":{"types":"./index.d.ts","module":"./plugins.mjs","import":"./plugins.mjs","default":"./plugins.mjs"},"./import.macro":"./import.macro.js","./import.macro.js":"./import.macro.js","./styles":"./styles.css","./styles.css":"./styles.css","./package.json":"./package.json"},"sideEffects":["./index.js","./index.mjs","./styles.css"],"scripts":{"postinstall":"node attribution.js"}}')},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/editor_projeto/",(()=>{"use strict";var e,t=n(43),r=n.t(t,2),i=n(391),s=n(950),o=n.t(s,2);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(t,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,u=s.history,p=e.Pop,g=null,m=v();function v(){return(u.state||{idx:null}).idx}function y(){p=e.Pop;let t=v(),n=null==t?null:t-m;m=t,g&&g({action:p,location:w.location,delta:n})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:d(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,u.replaceState(a({},u.state,{idx:m}),""));let w={get action(){return p},get location(){return t(s,u)},listen(e){if(g)throw new Error("A history only accepts one active listener");return s.addEventListener(l,y),g=e,()=>{s.removeEventListener(l,y),g=null}},createHref:e=>n(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let i=f(w.location,t,n);r&&r(i,t),m=v()+1;let a=h(i,m),l=w.createHref(i);try{u.pushState(a,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;s.location.assign(l)}o&&g&&g({action:p,location:w.location,delta:1})},replace:function(t,n){p=e.Replace;let i=f(w.location,t,n);r&&r(i,t),m=v();let s=h(i,m),a=w.createHref(i);u.replaceState(s,"",a),o&&g&&g({action:p,location:w.location,delta:0})},go:e=>u.go(e)};return w}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),y(e,t,n,!1)}function y(e,t,n,r){let i=D(("string"===typeof t?p(t):t).pathname||"/",n);if(null==i)return null;let s=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=I(i);o=P(s[a],e,r)}return o}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(c(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=M([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),b(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:k(a,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))i(e,t,r);else i(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=w(r.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),i&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const x=/^:[\w-]+$/,C=3,_=2,A=1,S=10,T=-2,E=e=>"*"===e;function k(e,t){let n=e.split("/"),r=n.length;return n.some(E)&&(r+=T),t&&(r+=_),n.filter(e=>!E(e)).reduce((e,t)=>e+(x.test(t)?C:""===t?A:S),r)}function P(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:M([s,u.pathname]),pathnameBase:F(M([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=M([s,u.pathnameBase]))}return o}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function I(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function N(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function j(e,t){let n=N(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=p(e):(i=a({},e),c(!i.pathname||!i.pathname.includes("?"),R("?","pathname","search",i)),c(!i.pathname||!i.pathname.includes("#"),R("#","pathname","hash",i)),c(!i.search||!i.search.includes("#"),R("#","search","hash",i)));let s,o=""===e||""===i.pathname,l=o?"/":i.pathname;if(null==l)s=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?p(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:B(r),hash:U(i)}}(i,s),h=l&&"/"!==l&&l.endsWith("/"),f=(o||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!f||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const z=["post","put","patch","delete"],H=(new Set(z),["get",...z]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const X=t.createContext(null);const K=t.createContext(null);const q=t.createContext(null);const G=t.createContext(null);const Q=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Y=t.createContext(null);function J(){return null!=t.useContext(G)}function Z(){return J()||c(!1),t.useContext(G).location}function $(e){t.useContext(q).static||t.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=t.useContext(Q);return e?function(){let{router:e}=ce(ae.UseNavigateStable),n=he(le.UseNavigateStable),r=t.useRef(!1);return $(()=>{r.current=!0}),t.useCallback(function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,W({fromRouteId:n},i)))},[e,n])}():function(){J()||c(!1);let e=t.useContext(X),{basename:n,future:r,navigator:i}=t.useContext(q),{matches:s}=t.useContext(Q),{pathname:o}=Z(),a=JSON.stringify(j(s,r.v7_relativeSplatPath)),l=t.useRef(!1);return $(()=>{l.current=!0}),t.useCallback(function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void i.go(t);let s=L(t,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==n&&(s.pathname="/"===s.pathname?n:M([n,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)},[n,i,a,o,e])}()}function te(n,r,i,s){J()||c(!1);let{navigator:o}=t.useContext(q),{matches:a}=t.useContext(Q),l=a[a.length-1],u=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let f,d=Z();if(r){var g;let e="string"===typeof r?p(r):r;"/"===h||(null==(g=e.pathname)?void 0:g.startsWith(h))||c(!1),f=e}else f=d;let m=f.pathname||"/",y=m;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=v(n,{pathname:y});let w=oe(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:M([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:M([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,i,s);return r&&w?t.createElement(G.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:e.Pop}},w):w}function ne(){let e=function(){var e;let n=t.useContext(Y),r=ue(le.UseRouteError),i=he(le.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:s},r):null,null)}const re=t.createElement(ne,null);class ie extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(Q.Provider,{value:this.props.routeContext},t.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:n,match:r,children:i}=e,s=t.useContext(X);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Q.Provider,{value:n},i)}function oe(e,n,r,i){var s;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var o;if(null==(o=r)||!o.errors)return null;e=r.matches}let a=e,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=a.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),a=a.slice(0,Math.min(a.length,e+1))}let u=!1,h=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){u=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight((e,i,s)=>{let o,c=!1,f=null,d=null;var p;r&&(o=l&&i.route.id?l[i.route.id]:void 0,f=i.route.errorElement||re,u&&(h<0&&0===s?(p="route-fallback",!1||fe[p]||(fe[p]=!0),c=!0,d=null):h===s&&(c=!0,d=i.route.hydrateFallbackElement||null)));let g=n.concat(a.slice(0,s+1)),m=()=>{let n;return n=o?f:c?d:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(se,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?t.createElement(ie,{location:r.location,revalidation:r.revalidation,component:f,error:o,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let n=t.useContext(X);return n||c(!1),n}function ue(e){let n=t.useContext(K);return n||c(!1),n}function he(e){let n=function(){let e=t.useContext(Q);return e||c(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||c(!1),r.route.id}const fe={};r.startTransition;function de(e){c(!1)}function pe(n){let{basename:r="/",children:i=null,location:s,navigationType:o=e.Pop,navigator:a,static:l=!1,future:u}=n;J()&&c(!1);let h=r.replace(/^\/*/,"/"),f=t.useMemo(()=>({basename:h,navigator:a,static:l,future:W({v7_relativeSplatPath:!1},u)}),[h,u,a,l]);"string"===typeof s&&(s=p(s));let{pathname:d="/",search:g="",hash:m="",state:v=null,key:y="default"}=s,b=t.useMemo(()=>{let e=D(d,h);return null==e?null:{location:{pathname:e,search:g,hash:m,state:v,key:y},navigationType:o}},[h,d,g,m,v,y,o]);return null==b?null:t.createElement(q.Provider,{value:f},t.createElement(G.Provider,{children:i,value:b}))}function ge(e){let{children:t,location:n}=e;return te(me(t),n)}new Promise(()=>{});t.Component;function me(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,(e,i)=>{if(!t.isValidElement(e))return;let s=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,me(e.props.children,s));e.type!==de&&c(!1),e.props.index&&e.props.children&&c(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=me(e.props.children,s)),r.push(o)}),r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(tx){}new Map;const ve=r.startTransition;o.flushSync,r.useId;function ye(e){let{basename:n,children:r,future:i,window:s}=e,o=t.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),g(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:d(t)},null,a)));let l=o.current,[c,u]=t.useState({action:l.action,location:l.location}),{v7_startTransition:h}=i||{},p=t.useCallback(e=>{h&&ve?ve(()=>u(e)):u(e)},[u,h]);return t.useLayoutEffect(()=>l.listen(p),[l,p]),t.createElement(pe,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var be,we;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(be||(be={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(we||(we={}));const xe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,f=63&l;a||(f=64,s||(h=64)),r.push(n[c],n[u],n[h],n[f])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(xe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new _e;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class _e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ae=function(e){return function(e){const t=xe(e);return Ce.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Se=function(e){try{return Ce.decodeString(e,!0)}catch(tx){console.error("base64Decode failed: ",tx)}return null};function Te(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Ee=()=>{try{return Te().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/editor_projeto",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(tx){return}const t=e&&Se(e[1]);return t&&JSON.parse(t)})()}catch(tx){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${tx}`)}},ke=e=>{var t,n;return null===(n=null===(t=Ee())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Pe=e=>{const t=ke(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Oe=()=>{var e;return null===(e=Ee())||void 0===e?void 0:e.config},Ie=e=>{var t;return null===(t=Ee())||void 0===t?void 0:t[`_${e}`]};class De{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Re(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Ne(e){return(await fetch(e,{credentials:"include"})).ok}function je(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ae(JSON.stringify({alg:"none",type:"JWT"})),Ae(JSON.stringify(s)),""].join(".")}const Le={};let Me=!1;function Fe(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Re(window.location.host)||Le[e]===t||Le[e]||Me)return;function n(e){return`__firebase__banner__${e}`}Le[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Le))Le[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Me=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function Be(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ue(){var e;const t=null===(e=Ee())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(tx){return!1}}function Ve(){return!Ue()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ze(){try{return"object"===typeof indexedDB}catch(tx){return!1}}class He extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,He.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,We.prototype.create)}}class We{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Xe,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new He(n,s,t)}}const Xe=/\{\$([^}]+)}/g;function Ke(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(qe(n)&&qe(s)){if(!Ke(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function qe(e){return null!==e&&"object"===typeof e}function Ge(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Qe(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Ye(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Je{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ze),void 0===r.error&&(r.error=Ze),void 0===r.complete&&(r.complete=Ze);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(tx){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(tx){"undefined"!==typeof console&&console.error&&console.error(tx)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ze(){}function $e(e){return e&&e._delegate?e._delegate:e}class et{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const tt="[DEFAULT]";class nt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new De;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(tx){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(tx){if(r)return null;throw tx}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:tt})}catch(tx){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(tx){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===tt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt;return this.component?this.component.multipleInstances?e:tt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class rt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const it=[];var st;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(st||(st={}));const ot={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},at=st.INFO,lt={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},ct=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=lt[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class ut{constructor(e){this.name=e,this._logLevel=at,this._logHandler=ct,this._userLogHandler=null,it.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ot[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...t),this._logHandler(this,st.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...t),this._logHandler(this,st.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,st.INFO,...t),this._logHandler(this,st.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,st.WARN,...t),this._logHandler(this,st.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,st.ERROR,...t),this._logHandler(this,st.ERROR,...t)}}let ht,ft;const dt=new WeakMap,pt=new WeakMap,gt=new WeakMap,mt=new WeakMap,vt=new WeakMap;let yt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return pt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||gt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function bt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ft||(ft=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ct(this),n),xt(dt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xt(e.apply(Ct(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Ct(this),t,...r);return gt.set(s,t.sort?t.sort():[t]),xt(s)}}function wt(e){return"function"===typeof e?bt(e):(e instanceof IDBTransaction&&function(e){if(pt.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});pt.set(e,t)}(e),t=e,(ht||(ht=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,yt):e);var t}function xt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(xt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&dt.set(t,e)}).catch(()=>{}),vt.set(t,e),t}(e);if(mt.has(e))return mt.get(e);const t=wt(e);return t!==e&&(mt.set(e,t),vt.set(t,e)),t}const Ct=e=>vt.get(e);const _t=["get","getKey","getAll","getAllKeys","count"],At=["put","add","delete","clear"],St=new Map;function Tt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(St.get(t))return St.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=At.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!_t.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return St.set(t,s),s}yt=(e=>({...e,get:(t,n,r)=>Tt(t,n)||e.get(t,n,r),has:(t,n)=>!!Tt(t,n)||e.has(t,n)}))(yt);class Et{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const kt="@firebase/app",Pt="0.13.2",Ot=new ut("@firebase/app"),It="@firebase/app-compat",Dt="@firebase/analytics-compat",Rt="@firebase/analytics",Nt="@firebase/app-check-compat",jt="@firebase/app-check",Lt="@firebase/auth",Mt="@firebase/auth-compat",Ft="@firebase/database",Bt="@firebase/data-connect",Ut="@firebase/database-compat",Vt="@firebase/functions",zt="@firebase/functions-compat",Ht="@firebase/installations",Wt="@firebase/installations-compat",Xt="@firebase/messaging",Kt="@firebase/messaging-compat",qt="@firebase/performance",Gt="@firebase/performance-compat",Qt="@firebase/remote-config",Yt="@firebase/remote-config-compat",Jt="@firebase/storage",Zt="@firebase/storage-compat",$t="@firebase/firestore",en="@firebase/ai",tn="@firebase/firestore-compat",nn="firebase",rn="[DEFAULT]",sn={[kt]:"fire-core",[It]:"fire-core-compat",[Rt]:"fire-analytics",[Dt]:"fire-analytics-compat",[jt]:"fire-app-check",[Nt]:"fire-app-check-compat",[Lt]:"fire-auth",[Mt]:"fire-auth-compat",[Ft]:"fire-rtdb",[Bt]:"fire-data-connect",[Ut]:"fire-rtdb-compat",[Vt]:"fire-fn",[zt]:"fire-fn-compat",[Ht]:"fire-iid",[Wt]:"fire-iid-compat",[Xt]:"fire-fcm",[Kt]:"fire-fcm-compat",[qt]:"fire-perf",[Gt]:"fire-perf-compat",[Qt]:"fire-rc",[Yt]:"fire-rc-compat",[Jt]:"fire-gcs",[Zt]:"fire-gcs-compat",[$t]:"fire-fst",[tn]:"fire-fst-compat",[en]:"fire-vertex","fire-js":"fire-js",[nn]:"fire-js-all"},on=new Map,an=new Map,ln=new Map;function cn(e,t){try{e.container.addComponent(t)}catch(tx){Ot.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,tx)}}function un(e){const t=e.name;if(ln.has(t))return Ot.debug(`There were multiple attempts to register component ${t}.`),!1;ln.set(t,e);for(const n of on.values())cn(n,e);for(const n of an.values())cn(n,e);return!0}function hn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function fn(e){return null!==e&&void 0!==e&&void 0!==e.settings}const dn=new We("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class pn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new et("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dn.create("app-deleted",{appName:this._name})}}const gn="11.10.0";function mn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:rn,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw dn.create("bad-app-name",{appName:String(i)});if(n||(n=Oe()),!n)throw dn.create("no-options");const s=on.get(i);if(s){if(Ke(n,s.options)&&Ke(r,s.config))return s;throw dn.create("duplicate-app",{appName:i})}const o=new rt(i);for(const l of ln.values())o.addComponent(l);const a=new pn(n,r,o);return on.set(i,a),a}function vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn;const t=on.get(e);if(!t&&e===rn&&Oe())return mn();if(!t)throw dn.create("no-app",{appName:e});return t}function yn(e,t,n){var r;let i=null!==(r=sn[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Ot.warn(e.join(" "))}un(new et(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const bn="firebase-heartbeat-store";let wn=null;function xn(){return wn||(wn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=xt(o);return r&&o.addEventListener("upgradeneeded",e=>{r(xt(o.result),e.oldVersion,e.newVersion,xt(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(bn)}catch(tx){console.warn(tx)}}}).catch(e=>{throw dn.create("idb-open",{originalErrorMessage:e.message})})),wn}async function Cn(e,t){try{const n=(await xn()).transaction(bn,"readwrite"),r=n.objectStore(bn);await r.put(t,_n(e)),await n.done}catch(tx){if(tx instanceof He)Ot.warn(tx.message);else{const t=dn.create("idb-set",{originalErrorMessage:null===tx||void 0===tx?void 0:tx.message});Ot.warn(t.message)}}}function _n(e){return`${e.name}!${e.options.appId}`}class An{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Tn(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Sn();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(tx){Ot.warn(tx)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Sn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),En(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),En(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ae(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(tx){return Ot.warn(tx),""}}}function Sn(){return(new Date).toISOString().substring(0,10)}class Tn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ze()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await xn()).transaction(bn),n=await t.objectStore(bn).get(_n(e));return await t.done,n}catch(tx){if(tx instanceof He)Ot.warn(tx.message);else{const t=dn.create("idb-get",{originalErrorMessage:null===tx||void 0===tx?void 0:tx.message});Ot.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Cn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Cn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function En(e){return Ae(JSON.stringify({version:2,heartbeats:e})).length}var kn;kn="",un(new et("platform-logger",e=>new Et(e),"PRIVATE")),un(new et("heartbeat",e=>new An(e),"PRIVATE")),yn(kt,Pt,kn),yn(kt,Pt,"esm2017"),yn("fire-js","");function Pn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function On(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const In=On,Dn=new We("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Rn=new ut("@firebase/auth");function Nn(e){if(Rn.logLevel<=st.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Rn.error(`Auth (${gn}): ${e}`,...n)}}function jn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Bn(e,...n)}function Ln(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Bn(e,...n)}function Mn(e,t,n){const r=Object.assign(Object.assign({},In()),{[t]:n});return new We("auth","Firebase",r).create(t,{appName:e.name})}function Fn(e){return Mn(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Dn.create(e,...n)}function Un(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Bn(t,...r)}}function Vn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Nn(t),new Error(t)}function zn(e,t){e||Vn(t)}function Hn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Wn(){return"http:"===Xn()||"https:"===Xn()}function Xn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Kn(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Wn()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class qn{constructor(e,t){this.shortDelay=e,this.longDelay=t,zn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Kn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Gn(e,t){zn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Qn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Yn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Jn=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Zn=new qn(3e4,6e4);function $n(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function er(e,t,n,r){return tr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Ge(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Re(e.emulatorConfig.host)&&(l.credentials="include"),Qn.fetch()(await rr(e,e.config.apiHost,n,o),l)})}async function tr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Yn),t);try{const t=new sr(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw or(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw or(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw or(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw or(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Mn(e,a,o);jn(e,a)}}catch(tx){if(tx instanceof He)throw tx;jn(e,"network-request-failed",{message:String(tx)})}}async function nr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await er(e,t,n,r,i);return"mfaPendingCredential"in s&&jn(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function rr(e,t,n,r){const i=`${t}${n}?${r}`,s=e,o=s.config.emulator?Gn(e.config,i):`${e.config.apiScheme}://${i}`;if(Jn.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function ir(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sr{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Ln(this.auth,"network-request-failed")),Zn.get())})}}function or(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ln(e,t,r);return i.customData._tokenResponse=n,i}function ar(e){return void 0!==e&&void 0!==e.enterprise}class lr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ir(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cr(e,t){return er(e,"GET","/v2/recaptchaConfig",$n(e,t))}async function ur(e,t){return er(e,"POST","/v1/accounts:lookup",t)}function hr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(tx){}}function fr(e){return 1e3*Number(e)}function dr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Nn("JWT malformed, contained fewer than 3 sections"),null;try{const e=Se(n);return e?JSON.parse(e):(Nn("Failed to decode base64 JWT payload"),null)}catch(tx){return Nn("Caught error parsing JWT payload as JSON",null===tx||void 0===tx?void 0:tx.toString()),null}}function pr(e){const t=dr(e);return Un(t,"internal-error"),Un("undefined"!==typeof t.exp,"internal-error"),Un("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function gr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(tx){throw tx instanceof He&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(tx)&&e.auth.currentUser===e&&await e.auth.signOut(),tx}}class mr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(tx){return void("auth/network-request-failed"===(null===tx||void 0===tx?void 0:tx.code)&&this.schedule(!0))}this.schedule()}}class vr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hr(this.lastLoginAt),this.creationTime=hr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function yr(e){var t;const n=e.auth,r=await e.getIdToken(),i=await gr(e,ur(n,{idToken:r}));Un(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?br(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),f=!!u&&h,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new vr(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(e,d)}function br(e){return e.map(e=>{var{providerId:t}=e,n=Pn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class wr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Un(e.idToken,"internal-error"),Un("undefined"!==typeof e.idToken,"internal-error"),Un("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):pr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Un(0!==e.length,"internal-error");const t=pr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Un(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await tr(e,{},async()=>{const n=Ge({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await rr(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return e.emulatorConfig&&Re(e.emulatorConfig.host)&&(a.credentials="include"),Qn.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new wr;return n&&(Un("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Un("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Un("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wr,this.toJSON())}_performRefresh(){return Vn("not implemented")}}function xr(e,t){Un("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Cr{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Pn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new vr(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await gr(this,this.stsTokenManager.getToken(this.auth,e));return Un(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=$e(e),r=await n.getIdToken(t),i=dr(r);Un(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:hr(fr(i.auth_time)),issuedAtTime:hr(fr(i.iat)),expirationTime:hr(fr(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=$e(e);await yr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Un(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Un(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await yr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fn(this.auth.app))return Promise.reject(Fn(this.auth));const e=await this.getIdToken();return await gr(this,async function(e,t){return er(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,d=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:C}=t;Un(y&&C,e,"internal-error");const _=wr.fromJSON(this.name,C);Un("string"===typeof y,e,"internal-error"),xr(u,e.name),xr(h,e.name),Un("boolean"===typeof b,e,"internal-error"),Un("boolean"===typeof w,e,"internal-error"),xr(f,e.name),xr(d,e.name),xr(p,e.name),xr(g,e.name),xr(m,e.name),xr(v,e.name);const A=new Cr({uid:y,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:w,photoURL:d,phoneNumber:f,tenantId:p,stsTokenManager:_,createdAt:m,lastLoginAt:v});return x&&Array.isArray(x)&&(A.providerData=x.map(e=>Object.assign({},e))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new wr;r.updateFromServerResponse(t);const i=new Cr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await yr(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Un(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?br(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new wr;o.updateFromIdToken(n);const a=new Cr({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new vr(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const _r=new Map;function Ar(e){zn(e instanceof Function,"Expected a class definition");let t=_r.get(e);return t?(zn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,_r.set(e,t),t)}class Sr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Sr.type="NONE";const Tr=Sr;function Er(e,t,n){return`firebase:${e}:${t}:${n}`}class kr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Er(this.userKey,r.apiKey,i),this.fullPersistenceKey=Er("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await ur(this.auth,{idToken:e}).catch(()=>{});return t?Cr._fromGetAccountInfoResponse(this.auth,t,e):null}return Cr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new kr(Ar(Tr),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Ar(Tr);const s=Er(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await ur(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Cr._fromGetAccountInfoResponse(e,r,t)}else n=Cr._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new kr(i,e,n)):new kr(i,e,n)}}function Pr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Rr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Or(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(jr(t))return"Blackberry";if(Lr(t))return"Webos";if(Ir(t))return"Safari";if((t.includes("chrome/")||Dr(t))&&!t.includes("edge/"))return"Chrome";if(Nr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Or(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/firefox\//i.test(e)}function Ir(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/crios\//i.test(e)}function Rr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/iemobile/i.test(e)}function Nr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/android/i.test(e)}function jr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/blackberry/i.test(e)}function Lr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/webos/i.test(e)}function Mr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Fr(){return function(){const e=Be();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Br(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return Mr(e)||Nr(e)||Lr(e)||jr(e)||/windows phone/i.test(e)||Rr(e)}function Ur(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Pr(Be());break;case"Worker":t=`${Pr(Be())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${gn}/${r}`}class Vr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(tx){r(tx)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(tx){t.reverse();for(const n of t)try{n()}catch(ev){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===tx||void 0===tx?void 0:tx.message})}}}class zr{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Hr{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xr(this),this.idTokenSubscription=new Xr(this),this.beforeStateQueue=new Vr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ar(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await kr.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(tx){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ur(this,{idToken:e}),n=await Cr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(fn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(tx){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(tx))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Un(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(tx){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yr(e)}catch(tx){if("auth/network-request-failed"!==(null===tx||void 0===tx?void 0:tx.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fn(this.app))return Promise.reject(Fn(this));const t=e?$e(e):null;return t&&Un(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Un(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fn(this.app)?Promise.reject(Fn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fn(this.app)?Promise.reject(Fn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ar(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return er(e,"GET","/v2/passwordPolicy",$n(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new zr(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new We("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return er(e,"POST","/v2/accounts:revokeToken",$n(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ar(e)||this._popupRedirectResolver;Un(t,this,"argument-error"),this.redirectPersistenceManager=await kr.create(this,[Ar(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Un(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Un(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ur(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Rn.logLevel<=st.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Rn.warn(`Auth (${gn}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Wr(e){return $e(e)}class Xr{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Je(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Un(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Kr={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qr(e){return Kr.loadJS(e)}function Gr(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Qr{constructor(){this.enterprise=new Yr}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Yr{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Jr="NO_RECAPTCHA";class Zr{constructor(e){this.type="recaptcha-enterprise",this.auth=Wr(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ar(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Jr)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Qr).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{cr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new lr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&ar(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Kr.recaptchaEnterpriseScript;0!==t.length&&(t+=i),qr(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function $r(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Zr(e);let o;if(i)o=Jr;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ei(e,t,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await $r(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await $r(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await $r(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await $r(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await $r(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function ti(e){const t=Wr(e),n=await cr(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new lr(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Zr(t).verify()}}function ni(e,t,n){const r=Wr(e);Un(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=ri(t),{host:o,port:a}=function(e){const t=ri(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ii(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ii(t)}}}(t),l=null===a?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Un(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Un(Ke(c,r.config.emulator)&&Ke(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Re(o)?(Ne(`${s}//${o}${l}`),Fe("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ri(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ii(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class si{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,t){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}async function oi(e,t){return er(e,"POST","/v1/accounts:signUp",t)}async function ai(e,t){return nr(e,"POST","/v1/accounts:signInWithPassword",$n(e,t))}class li extends si{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new li(e,t,"password")}static _fromEmailAndCode(e,t){return new li(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ei(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ai,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return nr(e,"POST","/v1/accounts:signInWithEmailLink",$n(e,t))}(e,{email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ei(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oi,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return nr(e,"POST","/v1/accounts:signInWithEmailLink",$n(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ci(e,t){return nr(e,"POST","/v1/accounts:signInWithIdp",$n(e,t))}class ui extends si{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ui(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Pn(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new ui(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return ci(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ci(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ci(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ge(t)}return e}}async function hi(e,t){return er(e,"POST","/v1/accounts:sendVerificationCode",$n(e,t))}const fi={USER_NOT_FOUND:"user-not-found"};class di extends si{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new di({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new di({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return nr(e,"POST","/v1/accounts:signInWithPhoneNumber",$n(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await nr(e,"POST","/v1/accounts:signInWithPhoneNumber",$n(e,t));if(n.temporaryProof)throw or(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return nr(e,"POST","/v1/accounts:signInWithPhoneNumber",$n(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),fi)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new di({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class pi{constructor(e){var t,n,r,i,s,o;const a=Qe(Ye(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Un(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Qe(Ye(e)).link,n=t?Qe(Ye(t)).deep_link_id:null,r=Qe(Ye(e)).deep_link_id;return(r?Qe(Ye(r)).link:null)||r||n||t||e}(e);try{return new pi(t)}catch(n){return null}}}class gi{constructor(){this.providerId=gi.PROVIDER_ID}static credential(e,t){return li._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=pi.parseLink(t);return Un(n,"argument-error"),li._fromEmailAndCode(e,n.code,n.tenantId)}}gi.PROVIDER_ID="password",gi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",gi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class mi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vi extends mi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class yi extends vi{constructor(){super("facebook.com")}static credential(e){return ui._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return yi.credential(t.oauthAccessToken)}catch(n){return null}}}yi.FACEBOOK_SIGN_IN_METHOD="facebook.com",yi.PROVIDER_ID="facebook.com";class bi extends vi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ui._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return bi.credential(n,r)}catch(i){return null}}}bi.GOOGLE_SIGN_IN_METHOD="google.com",bi.PROVIDER_ID="google.com";class wi extends vi{constructor(){super("github.com")}static credential(e){return ui._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return wi.credential(t.oauthAccessToken)}catch(n){return null}}}wi.GITHUB_SIGN_IN_METHOD="github.com",wi.PROVIDER_ID="github.com";class xi extends vi{constructor(){super("twitter.com")}static credential(e,t){return ui._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return xi.credential(n,r)}catch(i){return null}}}async function Ci(e,t){return nr(e,"POST","/v1/accounts:signUp",$n(e,t))}xi.TWITTER_SIGN_IN_METHOD="twitter.com",xi.PROVIDER_ID="twitter.com";class _i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Cr._fromIdTokenResponse(e,n,r),s=Ai(n);return new _i({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ai(n);return new _i({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ai(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Si extends He{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Si.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Si(e,t,n,r)}}function Ti(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Si._fromErrorAndOperation(e,n,t,r);throw n})}async function Ei(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await gr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return _i._forOperation(e,"link",r)}async function ki(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(fn(r.app))return Promise.reject(Fn(r));const i="reauthenticate";try{const s=await gr(e,Ti(r,i,t,e),n);Un(s.idToken,r,"internal-error");const o=dr(s.idToken);Un(o,r,"internal-error");const{sub:a}=o;return Un(e.uid===a,r,"user-mismatch"),_i._forOperation(e,i,s)}catch(tx){throw"auth/user-not-found"===(null===tx||void 0===tx?void 0:tx.code)&&jn(r,"user-mismatch"),tx}}async function Pi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(fn(e.app))return Promise.reject(Fn(e));const r="signIn",i=await Ti(e,r,t),s=await _i._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Oi(e,t){return Pi(Wr(e),t)}async function Ii(e){const t=Wr(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function Di(e,t){return er(e,"POST","/v2/accounts/mfaEnrollment:start",$n(e,t))}new WeakMap;const Ri="__sak";class Ni{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ri,"1"),this.storage.removeItem(Ri),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ji extends Ni{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Br(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Fr()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ji.type="LOCAL";const Li=ji;function Mi(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${r}=([^;]+)`);return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Fi(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class Bi{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Fi(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Mi(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Fi(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Fi(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Mi(n);const i=setInterval(()=>{const e=Mi(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Bi.type="COOKIE";class Ui extends Ni{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ui.type="SESSION";const Vi=Ui;class zi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new zi(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}zi.receivers=[];class Wi{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=Hi("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Xi(){return window}function Ki(){return"undefined"!==typeof Xi().WorkerGlobalScope&&"function"===typeof Xi().importScripts}const qi="firebaseLocalStorageDb",Gi="firebaseLocalStorage",Qi="fbase_key";class Yi{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ji(e,t){return e.transaction([Gi],t?"readwrite":"readonly").objectStore(Gi)}function Zi(){const e=indexedDB.open(qi,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Gi,{keyPath:Qi})}catch(tx){n(tx)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Gi)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(qi);return new Yi(e).toPromise()}(),t(await Zi()))})})}async function $i(e,t,n){const r=Ji(e,!0).put({[Qi]:t,value:n});return new Yi(r).toPromise()}function es(e,t){const n=Ji(e,!0).delete(t);return new Yi(n).toPromise()}class ts{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Zi()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(tx){if(t++>3)throw tx;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ki()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zi._getInstance(Ki()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Wi(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zi();return await $i(e,Ri,"1"),await es(e,Ri),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>$i(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Ji(e,!1).get(t),r=await new Yi(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>es(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Ji(e,!1).getAll();return new Yi(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ts.type="LOCAL";const ns=ts;function rs(e,t){return er(e,"POST","/v2/accounts/mfaSignIn:start",$n(e,t))}Gr("rcb"),new qn(3e4,6e4);const is="recaptcha";async function ss(e,t,n){var r;if(!e._getRecaptchaConfig())try{await ti(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Un("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=ei(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Jr){Un((null===n||void 0===n?void 0:n.type)===is,e,"argument-error");return Di(e,await os(e,t,n))}return Di(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{Un("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Un(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=ei(e,o,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Jr){Un((null===n||void 0===n?void 0:n.type)===is,e,"argument-error");return rs(e,await os(e,t,n))}return rs(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=ei(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Jr){Un((null===n||void 0===n?void 0:n.type)===is,e,"argument-error");return hi(e,await os(e,t,n))}return hi(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function os(e,t,n){Un(n.type===is,e,"argument-error");const r=await n.verify();Un("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class as{constructor(e){this.providerId=as.PROVIDER_ID,this.auth=Wr(e)}verifyPhoneNumber(e,t){return ss(this.auth,e,$e(t))}static credential(e,t){return di._fromVerification(e,t)}static credentialFromResult(e){const t=e;return as.credentialFromTaggedObject(t)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?di._fromTokenResponse(n,r):null}}function ls(e,t){return t?Ar(t):(Un(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}as.PROVIDER_ID="phone",as.PHONE_SIGN_IN_METHOD="phone";class cs extends si{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ci(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ci(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ci(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function us(e){return Pi(e.auth,new cs(e),e.bypassAuthState)}function hs(e){const{auth:t,user:n}=e;return Un(n,t,"internal-error"),ki(n,new cs(e),e.bypassAuthState)}async function fs(e){const{auth:t,user:n}=e;return Un(n,t,"internal-error"),Ei(n,new cs(e),e.bypassAuthState)}class ds{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(tx){this.reject(tx)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(tx){this.reject(tx)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return us;case"linkViaPopup":case"linkViaRedirect":return fs;case"reauthViaPopup":case"reauthViaRedirect":return hs;default:jn(this.auth,"internal-error")}}resolve(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ps=new qn(2e3,1e4);class gs extends ds{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,gs.currentPopupAction&&gs.currentPopupAction.cancel(),gs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Un(e,this.auth,"internal-error"),e}async onExecution(){zn(1===this.filter.length,"Popup operations only handle one event");const e=Hi();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ln(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ps.get())};e()}}gs.currentPopupAction=null;const ms=new Map;class vs extends ds{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ms.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ws(t),r=bs(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(tx){e=()=>Promise.reject(tx)}ms.set(this.auth._key(),e)}return this.bypassAuthState||ms.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ys(e,t){ms.set(e._key(),t)}function bs(e){return Ar(e._redirectPersistence)}function ws(e){return Er("pendingRedirect",e.config.apiKey,e.name)}async function xs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(fn(e.app))return Promise.reject(Fn(e));const r=Wr(e),i=ls(r,t),s=new vs(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Cs{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return As(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!As(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ln(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_s(e))}saveEventToCache(e){this.cachedEventUids.add(_s(e)),this.lastProcessedEventTime=Date.now()}}function _s(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function As(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Ss=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ts=/^https?/;async function Es(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return er(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ks(r))return}catch(n){}jn(e,"unauthorized-domain")}function ks(e){const t=Hn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ts.test(n))return!1;if(Ss.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ps=new qn(3e4,6e4);function Os(){const e=Xi().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Is(e){return new Promise((t,n)=>{var r,i,s;function o(){Os(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Os(),n(Ln(e,"network-request-failed"))},timeout:Ps.get()})}if(null===(i=null===(r=Xi().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Xi().gapi)||void 0===s?void 0:s.load)){const t=Gr("iframefcb");return Xi()[t]=()=>{gapi.load?o():n(Ln(e,"network-request-failed"))},qr(`${Kr.gapiScript}?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw Ds=null,e})}let Ds=null;const Rs=new qn(5e3,15e3),Ns={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},js=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ls(e){const t=e.config;Un(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Gn(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:gn},i=js.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ge(r).slice(1)}`}async function Ms(e){const t=await function(e){return Ds=Ds||Is(e),Ds}(e),n=Xi().gapi;return Un(n,e,"internal-error"),t.open({where:document.body,url:Ls(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ns,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ln(e,"network-request-failed"),s=Xi().setTimeout(()=>{r(i)},Rs.get());function o(){Xi().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const Fs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Bs{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(tx){}}}function Us(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Fs),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Be().toLowerCase();n&&(a=Dr(c)?"_blank":n),Or(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return Mr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Bs(null);const h=window.open(t||"",a,u);Un(h,e,"popup-blocked");try{h.focus()}catch(tx){}return new Bs(h)}const Vs="__/auth/handler",zs="emulator/auth/handler",Hs=encodeURIComponent("fac");async function Ws(e,t,n,r,i,s){Un(e.config.authDomain,e,"auth-domain-config-required"),Un(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:gn,eventId:i};if(t instanceof mi){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof vi){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${Hs}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Vs}`;return Gn(t,zs)}(e)}?${Ge(a).slice(1)}${c}`}const Xs="webStorageSupport";const Ks=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vi,this._completeRedirectFn=xs,this._overrideRedirectResult=ys}async _openPopup(e,t,n,r){var i;zn(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Us(e,await Ws(e,t,n,Hn(),r),Hi())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Xi().location.href=e}(await Ws(e,t,n,Hn(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(zn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Ms(e),n=new Cs(e);return t.register("authEvent",t=>{Un(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xs,{type:Xs},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Xs];void 0!==i&&t(!!i),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Es(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Br()||Ir()||Mr()}};var qs="@firebase/auth",Gs="1.10.8";class Qs{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Un(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ys=Ie("authIdTokenMaxAge")||300;let Js=null;var Zs;!function(e){Kr=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ln("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Zs="Browser",un(new et("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Un(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Zs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ur(Zs)},c=new Hr(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ar);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),un(new et("auth-internal",e=>(e=>new Qs(e))(Wr(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),yn(qs,Gs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Zs)),yn(qs,Gs,"esm2017");yn("firebase","11.10.0","app");var $s,eo,to="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},no={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return f(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function f(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function d(e,t){return e.add(f(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(a,a);if(h(e))return t=m(f(e),t),new g(f(t.g),f(t.h));if(h(t))return t=m(e,f(t)),new g(f(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=y(r,1),n=y(n,1)}return t=d(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=d(e,c)}return new g(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-f(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+f(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=d(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=d(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?f(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?f(this).j(f(e)):f(f(this).j(e));if(h(e))return f(this.j(f(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,d=65535&this.i(i),g=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=d*m,p(n,2*i+2*s),n[2*i+2*s+1]+=l*m,p(n,2*i+2*s+1),n[2*i+2*s+1]+=d*g,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*g,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,eo=no.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return f(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},$s=no.Integer=r}).apply("undefined"!==typeof to?to:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ro,io,so,oo,ao,lo,co,uo,ho="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},fo={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ho&&ho];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function f(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function d(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var v=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function C(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function _(e){i.setTimeout(()=>{throw e},0)}function A(){var e=P;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let E,k=!1,P=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},O=()=>{const e=i.Promise.resolve(void 0);E=()=>{e.then(I)}};var I=()=>{for(var e;e=A();){try{e.h.call(e.g)}catch(Vm){_(Vm)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}k=!1};function D(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(Vm){}return e}();function j(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{m(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&j.aa.h.call(this)}}h(j,R);var L={2:"touch",3:"pen",4:"mouse"};j.prototype.h=function(){j.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function B(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function H(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=H(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new B(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),X={};function K(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,o(r)?!!r.capture:!!r,i):q(e,t,n,!1,r,i)}function q(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=$(e);if(l||(e[W]=l=new V(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Z;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)N||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,o(r)?!!r.capture:!!r,i):q(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=H(s=e.g[t],n,r,i))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=$(e))&&(t=e.g[t.toString()],e=-1,t&&(e=H(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=$(t))?(z(n,e),0==n.h&&(n.src=null,t[W]=null)):U(e)}}}function J(e){return e in X?X[e]:X[e]="on"+e}function Z(e,t){if(e.da)e=!0;else{t=new j(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function $(e){return(e=e[W])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){D.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var i=t;x(t=new R(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&z(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,oe(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,D),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){D.call(this),this.h=e,this.g={}}h(le,D);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,fe=i.JSON.parse,de=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){R.call(this,"d")}function be(){R.call(this,"c")}h(ye,R),h(be,R);var we={},xe=null;function Ce(){return xe=xe||new ne}function _e(e){R.call(this,we.La,e)}function Ae(e){const t=Ce();re(t,new _e(t))}function Se(e,t){R.call(this,we.STAT_EVENT,e),this.stat=t}function Te(e){const t=Ce();re(t,new Se(t,e))}function Ee(e,t){R.call(this,we.Ma,e),this.size=t}function ke(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Pe(){this.g=!0}function Oe(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(Xm){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",h(_e,R),we.STAT_EVENT="statevent",h(Se,R),we.Ma="timingevent",h(Ee,R),Pe.prototype.xa=function(){this.g=!1},Pe.prototype.info=function(){};var Ie,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ne(){}function je(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}h(Ne,pe),Ne.prototype.g=function(){return new XMLHttpRequest},Ne.prototype.i=function(){return{}},Ie=new Ne;var Me={},Fe={};function Be(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),He(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=dn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ae(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function He(e){e.S=Date.now()+e.I,We(e,e.I)}function We(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ke(c(e.ba,e),t)}function Xe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||ln(e.j,e)}function qe(e){Xe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||$e(n.h,e)))if(!e.K&&$e(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}rn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=ke(c(n.Za,n),6e3));if(1>=Ze(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=fn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(Xe(a),He(a)),r.g=o}else nn(r);0<n.i.length&&Zt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ae()}catch(u){}}je.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Xt(e)?t.j():this.Y(e)},je.prototype.Y=function(e){try{if(e==this.g)e:{const f=Xt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>f)&&(3!=f||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=f||7==t||Ae(),Xe(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=Kt(this.g);e="";var s=r.length,o=4==Xt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){qe(this),Ke(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,f,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Te(12),qe(this),Ke(this);break e}Oe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=ze(this,a),e==Fe){4==f&&(this.s=4,Te(14),n=!1),Oe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Te(15),Oe(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Oe(this.i,this.l,e,null),Ge(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=f||0!=a.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Te(11))}}else Oe(this.i,this.l,a,"[Invalid Chunked Response]"),qe(this),Ke(this)}else Oe(this.i,this.l,a,null),Ge(this,a);4==f&&qe(this),this.o&&!this.J&&(4==f?ln(this.j,this):(this.o=!1,He(this)))}else(function(e){const t={};e=(e.g&&2<=Xt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=C(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),qe(this),Ke(this)}}}catch(sv){}},je.prototype.cancel=function(){this.J=!0,qe(this)},je.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ae(),Te(17)),qe(this),this.s=2,Ke(this)):We(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ze(e){return e.h?1:e.g?e.g.size:0}function $e(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return f(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=ft(t[2]||""),this.g=ft(t[3]||"",!0),lt(this,t[4]),this.l=ft(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ft(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?ft(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(Ct(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(_t(this,t),St(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=dt(t,bt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ft(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function dt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(dt(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(dt(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(dt(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",dt(n,wt)),e.join("")};var gt,mt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ct(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function _t(e,t){Ct(e),t=Tt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function At(e,t){return Ct(e),t=Tt(e,t),e.g.has(t)}function St(e,t,n){_t(e,t),0<n.length&&(e.i=null,e.g.set(Tt(e,t),f(n)),e.h+=n.length)}function Tt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function kt(){this.g=new de}function Pt(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(tx){throw t.push(r+"type="+encodeURIComponent("_badmap")),tx}}function Ot(e){this.l=e.Ub||null,this.j=e.eb||!1}function It(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Nt(e)}function Nt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function jt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=jt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){Ct(this),this.i=null,e=Tt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Ct(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Ct(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Ct(this);let t=[];if("string"===typeof e)At(this,e)&&(t=t.concat(this.g.get(Tt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Ct(this),this.i=null,At(this,e=Tt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Ot,pe),Ot.prototype.g=function(){return new It(this.l,this.j)},Ot.prototype.i=(gt={},function(){return gt}),h(It,ne),(e=It.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Nt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Nt(this)),this.g&&(this.readyState=3,Nt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Nt(this),3==this.readyState&&Dt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(It.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Mt,ne);var Ft=/^https?$/i,Bt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),Ht(e)}function Vt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Xt(e)||2!=e.Z()))if(e.u&&4==Xt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Xt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ft.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Xt(e)?e.g.statusText:""}catch(Xm){a=""}e.l=a+" ["+e.Z()+"]",Vt(e)}}finally{Ht(e)}}}function Ht(e,t){if(e.g){Wt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(tx){}}}function Wt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Xt(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Zm){return null}}function qt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Pe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qt("baseRetryDelayMs",5e3,e),this.cb=qt("retryDelaySeedMs",1e4,e),this.Wa=qt("forwardChannelMaxRetries",2,e),this.wa=qt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new kt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Jt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new je(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(zm){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=dn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),He(t)}hn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Jt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Zt(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;E||O(),k||(E(),k=!0),P.add(t,e),e.B=0}}function $t(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new je(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Be(n,r,t)}function en(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Pt(a,e,"req"+n+"_")}catch(sv){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;E||O(),k||(E(),k=!0),P.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=ke(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new je(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ue(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!$e(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ce(),new Ee(r,n)),Zt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Ze(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=ke(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Pe;if(i.Image){const r=new Image;r.onload=u(Et,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Et,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Et,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Et,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Pe;const n=new AbortController,r=setTimeout(()=>{n.abort(),Et(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)}).catch(()=>{clearTimeout(r),Et(0,0,!1,t)})}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),hn(e),Jt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(d(e.ka,t),d(e.ka,e.i),e.h.i.length=0,f(e.i),e.i.length=0),e.l.ra()}}function fn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function dn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new Ot({eb:n})):new Mt(e.pa)).Ha(e.J),t}function pn(){}function gn(){}function mn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ie.g(),this.v=this.o?ge(this.o):ge(Ie),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Ut(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Bt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Ut(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Ht(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ht(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fe(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=fn(this,null,this.W),Zt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new je(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),x(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(jt(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Be(i,n,null)):Be(i,n,t),this.G=2}}else 3==this.G&&(e?$t(this,e):0==this.i.length||Je(this.h)||$t(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=ke(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Yt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},gn.prototype.g=function(e,t){return new mn(e,t)},h(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Qt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Zt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,mn.aa.N.call(this)},h(vn,ye),h(yn,be),h(bn,pn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new vn(e))},bn.prototype.sa=function(e){re(this.g,new yn)},bn.prototype.ra=function(){re(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,uo=fo.createWebChannelTransport=function(){return new gn},co=fo.getStatEventTarget=function(){return Ce()},lo=fo.Event=we,ao=fo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,oo=fo.ErrorCode=De,Re.COMPLETE="complete",so=fo.EventType=Re,me.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,io=fo.WebChannel=me,fo.FetchXmlHttpFactory=Ot,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,ro=fo.XhrIo=Mt}).apply("undefined"!==typeof ho?ho:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const po="@firebase/firestore",go="4.8.0";class mo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mo.UNAUTHENTICATED=new mo(null),mo.GOOGLE_CREDENTIALS=new mo("google-credentials-uid"),mo.FIRST_PARTY=new mo("first-party-uid"),mo.MOCK_USER=new mo("mock-user");let vo="11.10.0";const yo=new ut("@firebase/firestore");function bo(){return yo.logLevel}function wo(e){if(yo.logLevel<=st.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(_o);yo.debug(`Firestore (${vo}): ${e}`,...i)}}function xo(e){if(yo.logLevel<=st.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(_o);yo.error(`Firestore (${vo}): ${e}`,...i)}}function Co(e){if(yo.logLevel<=st.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(_o);yo.warn(`Firestore (${vo}): ${e}`,...i)}}function _o(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ao(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,So(e,r,n)}function So(e,t,n){let r=`FIRESTORE (${vo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw xo(r),new Error(r)}function To(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||So(t,i,r)}function Eo(e,t){return e}const ko={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Po extends He{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Oo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Io{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Do{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mo.UNAUTHENTICATED))}shutdown(){}}class Ro{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class No{constructor(e){this.t=e,this.currentUser=mo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){To(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Oo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Oo,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{wo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(wo("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Oo)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(wo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(To("string"==typeof t.accessToken,31837,{l:t}),new Io(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return To(null===e||"string"==typeof e,2055,{h:e}),new mo(e)}}class jo{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=mo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Lo{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new jo(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(mo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Mo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fo{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){To(void 0===this.o,3512);const n=e=>{null!=e.error&&wo("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,wo("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{wo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):wo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Mo(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(To("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Mo(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Bo(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Uo(){return new TextEncoder}class Vo{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Bo(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function zo(e,t){return e<t?-1:e>t?1:0}function Ho(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return zo(r,i);{const s=Uo(),o=Xo(s.encode(Wo(e,n)),s.encode(Wo(t,n)));return 0!==o?o:zo(r,i)}}n+=r>65535?2:1}return zo(e.length,t.length)}function Wo(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Xo(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return zo(e[n],t[n]);return zo(e.length,t.length)}function Ko(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const qo="__name__";class Go{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ao(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Ao(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Go.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Go?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Go.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return zo(e.length,t.length)}static compareSegments(e,t){const n=Go.isNumericId(e),r=Go.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Go.extractNumericId(e).compare(Go.extractNumericId(t)):Ho(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $s.fromString(e.substring(4,e.length-2))}}class Qo extends Go{construct(e,t,n){return new Qo(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Po(ko.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new Qo(e)}static emptyPath(){return new Qo([])}}const Yo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jo extends Go{construct(e,t,n){return new Jo(e,t,n)}static isValidIdentifier(e){return Yo.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jo.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===qo}static keyField(){return new Jo([qo])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Po(ko.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Po(ko.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Po(ko.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Po(ko.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jo(t)}static emptyPath(){return new Jo([])}}class Zo{constructor(e){this.path=e}static fromPath(e){return new Zo(Qo.fromString(e))}static fromName(e){return new Zo(Qo.fromString(e).popFirst(5))}static empty(){return new Zo(Qo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qo.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Zo(new Qo(e.slice()))}}function $o(e,t,n){if(!n)throw new Po(ko.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ea(e){if(!Zo.isDocumentKey(e))throw new Po(ko.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ta(e){if(Zo.isDocumentKey(e))throw new Po(ko.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function na(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function ra(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Ao(12329,{type:typeof e})}function ia(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Po(ko.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ra(e);throw new Po(ko.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function sa(e,t){const n={typeString:e};return t&&(n.value=t),n}function oa(e,t){if(!na(e))throw new Po(ko.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==s&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Po(ko.INVALID_ARGUMENT,n);return!0}const aa=-62135596800,la=1e6;class ca{static now(){return ca.fromMillis(Date.now())}static fromDate(e){return ca.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*la);return new ca(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Po(ko.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Po(ko.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<aa)throw new Po(ko.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Po(ko.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/la}_compareTo(e){return this.seconds===e.seconds?zo(this.nanoseconds,e.nanoseconds):zo(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ca._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(oa(e,ca._jsonSchema))return new ca(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-aa;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ca._jsonSchemaVersion="firestore/timestamp/1.0",ca._jsonSchema={type:sa("string",ca._jsonSchemaVersion),seconds:sa("number"),nanoseconds:sa("number")};class ua{static fromTimestamp(e){return new ua(e)}static min(){return new ua(new ca(0,0))}static max(){return new ua(new ca(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ha=-1;class fa{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}fa.UNKNOWN_ID=-1;function da(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ua.fromTimestamp(1e9===r?new ca(n+1,0):new ca(n,r));return new ga(i,Zo.empty(),t)}function pa(e){return new ga(e.readTime,e.key,ha)}class ga{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ga(ua.min(),Zo.empty(),ha)}static max(){return new ga(ua.max(),Zo.empty(),ha)}}function ma(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Zo.comparator(e.documentKey,t.documentKey),0!==n?n:zo(e.largestBatchId,t.largestBatchId))}const va="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ya{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ba(e){if(e.code!==ko.FAILED_PRECONDITION||e.message!==va)throw e;wo("LocalStore","Unexpectedly lost primary lease")}class wa{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ao(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new wa((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof wa?t:wa.resolve(t)}catch(e){return wa.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):wa.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):wa.reject(t)}static resolve(e){return new wa((t,n)=>{t(e)})}static reject(e){return new wa((t,n)=>{n(e)})}static waitFor(e){return new wa((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=wa.resolve(!1);for(const n of e)t=t.next(e=>e?wa.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new wa((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new wa((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function xa(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ca(e){return"IndexedDbTransactionError"===e.name}class _a{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}_a.ue=-1;const Aa=-1;function Sa(e){return null==e}function Ta(e){return 0===e&&1/e==-1/0}function Ea(e){return"number"==typeof e&&Number.isInteger(e)&&!Ta(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const ka="\x01";function Pa(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ia(t)),t=Oa(e.get(n),t);return Ia(t)}function Oa(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case ka:n+="\x01\x11";break;default:n+=t}}return n}function Ia(e){return e+ka+"\x01"}const Da="remoteDocuments",Ra="owner",Na="mutationQueues",ja="mutations";const La="documentMutations",Ma="remoteDocumentsV14",Fa="remoteDocumentGlobal",Ba="targets",Ua="targetDocuments",Va="targetGlobal",za="collectionParents",Ha="clientMetadata",Wa="bundles",Xa="namedQueries",Ka="indexConfiguration",qa="indexState",Ga="indexEntries",Qa="documentOverlays",Ya="globals",Ja=[Na,ja,La,Da,Ba,Ra,Va,Ua,Ha,Fa,za,Wa,Xa],Za=[Na,ja,La,Ma,Ba,Ra,Va,Ua,Ha,Fa,za,Wa,Xa,Qa],$a=Za,el=[...$a,Ka,qa,Ga];function tl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function nl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function rl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class il{constructor(e,t){this.comparator=e,this.root=t||ol.EMPTY}insert(e,t){return new il(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ol.BLACK,null,null))}remove(e){return new il(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ol.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sl(this.root,e,this.comparator,!1)}getReverseIterator(){return new sl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sl(this.root,e,this.comparator,!0)}}class sl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ol{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ol.RED,this.left=null!=r?r:ol.EMPTY,this.right=null!=i?i:ol.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ol(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ol.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ol.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ol.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ol.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ao(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ao(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ao(27949);return e+(this.isRed()?0:1)}}ol.EMPTY=null,ol.RED=!0,ol.BLACK=!1,ol.EMPTY=new class{constructor(){this.size=0}get key(){throw Ao(57766)}get value(){throw Ao(16141)}get color(){throw Ao(16727)}get left(){throw Ao(29726)}get right(){throw Ao(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new ol(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class al{constructor(e){this.comparator=e,this.data=new il(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ll(this.data.getIterator())}getIteratorFrom(e){return new ll(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof al))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new al(this.comparator);return t.data=e,t}}class ll{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class cl{constructor(e){this.fields=e,e.sort(Jo.comparator)}static empty(){return new cl([])}unionWith(e){let t=new al(Jo.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new cl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ko(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class ul extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ul("Invalid base64 string: "+e):e}}(e);return new hl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new hl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zo(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hl.EMPTY_BYTE_STRING=new hl("");const fl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dl(e){if(To(!!e,39018),"string"==typeof e){let t=0;const n=fl.exec(e);if(To(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:pl(e.seconds),nanos:pl(e.nanos)}}function pl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function gl(e){return"string"==typeof e?hl.fromBase64String(e):hl.fromUint8Array(e)}const ml="server_timestamp",vl="__type__",yl="__previous_value__",bl="__local_write_time__";function wl(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[vl])||void 0===n?void 0:n.stringValue)===ml}function xl(e){const t=e.mapValue.fields[yl];return wl(t)?xl(t):t}function Cl(e){const t=dl(e.mapValue.fields[bl].timestampValue);return new ca(t.seconds,t.nanos)}class _l{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Al="(default)";class Sl{constructor(e,t){this.projectId=e,this.database=t||Al}static empty(){return new Sl("","")}get isDefaultDatabase(){return this.database===Al}isEqual(e){return e instanceof Sl&&e.projectId===this.projectId&&e.database===this.database}}const Tl="__type__",El="__max__",kl={mapValue:{fields:{__type__:{stringValue:El}}}},Pl="__vector__",Ol="value";function Il(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?wl(e)?4:ql(e)?9007199254740991:Xl(e)?10:11:Ao(28295,{value:e})}function Dl(e,t){if(e===t)return!0;const n=Il(e);if(n!==Il(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Cl(e).isEqual(Cl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=dl(e.timestampValue),r=dl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return gl(e.bytesValue).isEqual(gl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return pl(e.geoPointValue.latitude)===pl(t.geoPointValue.latitude)&&pl(e.geoPointValue.longitude)===pl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return pl(e.integerValue)===pl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=pl(e.doubleValue),r=pl(t.doubleValue);return n===r?Ta(n)===Ta(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ko(e.arrayValue.values||[],t.arrayValue.values||[],Dl);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(tl(n)!==tl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Dl(n[i],r[i])))return!1;return!0}(e,t);default:return Ao(52216,{left:e})}}function Rl(e,t){return void 0!==(e.values||[]).find(e=>Dl(e,t))}function Nl(e,t){if(e===t)return 0;const n=Il(e),r=Il(t);if(n!==r)return zo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return zo(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=pl(e.integerValue||e.doubleValue),r=pl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return jl(e.timestampValue,t.timestampValue);case 4:return jl(Cl(e),Cl(t));case 5:return Ho(e.stringValue,t.stringValue);case 6:return function(e,t){const n=gl(e),r=gl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=zo(n[i],r[i]);if(0!==e)return e}return zo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=zo(pl(e.latitude),pl(t.latitude));return 0!==n?n:zo(pl(e.longitude),pl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ll(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[Ol])||void 0===n?void 0:n.arrayValue,c=null===(r=a[Ol])||void 0===r?void 0:r.arrayValue,u=zo((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Ll(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===kl.mapValue&&t===kl.mapValue)return 0;if(e===kl.mapValue)return 1;if(t===kl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Ho(r[o],s[o]);if(0!==e)return e;const t=Nl(n[r[o]],i[s[o]]);if(0!==t)return t}return zo(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ao(23264,{le:n})}}function jl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return zo(e,t);const n=dl(e),r=dl(t),i=zo(n.seconds,r.seconds);return 0!==i?i:zo(n.nanos,r.nanos)}function Ll(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Nl(n[i],r[i]);if(e)return e}return zo(n.length,r.length)}function Ml(e){return Fl(e)}function Fl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=dl(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return gl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Zo.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Fl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Fl(e.fields[i])}`;return n+"}"}(e.mapValue):Ao(61005,{value:e})}function Bl(e){switch(Il(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=xl(e);return t?16+Bl(t):16;case 5:return 2*e.stringValue.length;case 6:return gl(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Bl(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return nl(e.fields,(e,n)=>{t+=e.length+Bl(n)}),t}(e.mapValue);default:throw Ao(13486,{value:e})}}function Ul(e){return!!e&&"integerValue"in e}function Vl(e){return!!e&&"arrayValue"in e}function zl(e){return!!e&&"nullValue"in e}function Hl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Wl(e){return!!e&&"mapValue"in e}function Xl(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Tl])||void 0===n?void 0:n.stringValue)===Pl}function Kl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return nl(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Kl(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Kl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ql(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===El}class Gl{constructor(e){this.value=e}static empty(){return new Gl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Wl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kl(t)}setAll(e){let t=Jo.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Kl(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Wl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Wl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){nl(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Gl(Kl(this.value))}}function Ql(e){const t=[];return nl(e.fields,(e,n)=>{const r=new Jo([e]);if(Wl(n)){const e=Ql(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new cl(t)}class Yl{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Yl(e,0,ua.min(),ua.min(),ua.min(),Gl.empty(),0)}static newFoundDocument(e,t,n,r){return new Yl(e,1,t,ua.min(),n,r,0)}static newNoDocument(e,t){return new Yl(e,2,t,ua.min(),ua.min(),Gl.empty(),0)}static newUnknownDocument(e,t){return new Yl(e,3,t,ua.min(),ua.min(),Gl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ua.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ua.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Yl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Jl{constructor(e,t){this.position=e,this.inclusive=t}}function Zl(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Zo.comparator(Zo.fromName(o.referenceValue),n.key):Nl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function $l(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Dl(e.position[n],t.position[n]))return!1;return!0}class ec{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function tc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class nc{}class rc extends nc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new hc(e,t,n):"array-contains"===t?new gc(e,n):"in"===t?new mc(e,n):"not-in"===t?new vc(e,n):"array-contains-any"===t?new yc(e,n):new rc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new fc(e,n):new dc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Nl(t,this.value)):null!==t&&Il(this.value)===Il(t)&&this.matchesComparison(Nl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ao(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ic extends nc{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new ic(e,t)}matches(e){return sc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function sc(e){return"and"===e.op}function oc(e){return ac(e)&&sc(e)}function ac(e){for(const t of e.filters)if(t instanceof ic)return!1;return!0}function lc(e){if(e instanceof rc)return e.field.canonicalString()+e.op.toString()+Ml(e.value);if(oc(e))return e.filters.map(e=>lc(e)).join(",");{const t=e.filters.map(e=>lc(e)).join(",");return`${e.op}(${t})`}}function cc(e,t){return e instanceof rc?function(e,t){return t instanceof rc&&e.op===t.op&&e.field.isEqual(t.field)&&Dl(e.value,t.value)}(e,t):e instanceof ic?function(e,t){return t instanceof ic&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&cc(n,t.filters[r]),!0)}(e,t):void Ao(19439)}function uc(e){return e instanceof rc?function(e){return`${e.field.canonicalString()} ${e.op} ${Ml(e.value)}`}(e):e instanceof ic?function(e){return e.op.toString()+" {"+e.getFilters().map(uc).join(" ,")+"}"}(e):"Filter"}class hc extends rc{constructor(e,t,n){super(e,t,n),this.key=Zo.fromName(n.referenceValue)}matches(e){const t=Zo.comparator(e.key,this.key);return this.matchesComparison(t)}}class fc extends rc{constructor(e,t){super(e,"in",t),this.keys=pc("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class dc extends rc{constructor(e,t){super(e,"not-in",t),this.keys=pc("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function pc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Zo.fromName(e.referenceValue))}class gc extends rc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vl(t)&&Rl(t.arrayValue,this.value)}}class mc extends rc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Rl(this.value.arrayValue,t)}}class vc extends rc{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Rl(this.value.arrayValue,t)}}class yc extends rc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Rl(this.value.arrayValue,e))}}class bc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Pe=null}}function wc(e){return new bc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function xc(e){const t=Eo(e);if(null===t.Pe){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>lc(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Sa(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Ml(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Ml(e)).join(",")),t.Pe=e}return t.Pe}function Cc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!tc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!cc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$l(e.startAt,t.startAt)&&$l(e.endAt,t.endAt)}function _c(e){return Zo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ac{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Sc(e,t,n,r,i,s,o,a){return new Ac(e,t,n,r,i,s,o,a)}function Tc(e){return new Ac(e)}function Ec(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function kc(e){return null!==e.collectionGroup}function Pc(e){const t=Eo(e);if(null===t.Te){t.Te=[];const e=new Set;for(const i of t.explicitOrderBy)t.Te.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new al(Jo.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new ec(r,n))}),e.has(Jo.keyField().canonicalString())||t.Te.push(new ec(Jo.keyField(),n))}return t.Te}function Oc(e){const t=Eo(e);return t.Ie||(t.Ie=Ic(t,Pc(e))),t.Ie}function Ic(e,t){if("F"===e.limitType)return wc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new ec(e.field,t)});const n=e.endAt?new Jl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Jl(e.startAt.position,e.startAt.inclusive):null;return wc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Dc(e,t,n){return new Ac(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Rc(e,t){return Cc(Oc(e),Oc(t))&&e.limitType===t.limitType}function Nc(e){return`${xc(Oc(e))}|lt:${e.limitType}`}function jc(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>uc(e)).join(", ")}]`),Sa(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Ml(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Ml(e)).join(",")),`Target(${t})`}(Oc(e))}; limitType=${e.limitType})`}function Lc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Zo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Pc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Zl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Pc(e),t))&&!(e.endAt&&!function(e,t,n){const r=Zl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Pc(e),t))}(e,t)}function Mc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Fc(e){return(t,n)=>{let r=!1;for(const i of Pc(e)){const e=Bc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Bc(e,t,n){const r=e.field.isKeyField()?Zo.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Nl(r,i):Ao(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ao(19790,{direction:e.dir})}}class Uc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){nl(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return rl(this.inner)}size(){return this.innerSize}}const Vc=new il(Zo.comparator);function zc(){return Vc}const Hc=new il(Zo.comparator);function Wc(){let e=Hc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Xc(e){let t=Hc;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Kc(){return Gc()}function qc(){return Gc()}function Gc(){return new Uc(e=>e.toString(),(e,t)=>e.isEqual(t))}const Qc=new il(Zo.comparator),Yc=new al(Zo.comparator);function Jc(){let e=Yc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Zc=new al(zo);function $c(){return Zc}function eu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ta(t)?"-0":t}}function tu(e){return{integerValue:""+e}}function nu(e,t){return Ea(t)?tu(t):eu(e,t)}class ru{constructor(){this._=void 0}}function iu(e,t,n){return e instanceof au?function(e,t){const n={fields:{[vl]:{stringValue:ml},[bl]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&wl(t)&&(t=xl(t)),t&&(n.fields[yl]=t),{mapValue:n}}(n,t):e instanceof lu?cu(e,t):e instanceof uu?hu(e,t):function(e,t){const n=ou(e,t),r=du(n)+du(e.Ee);return Ul(n)&&Ul(e.Ee)?tu(r):eu(e.serializer,r)}(e,t)}function su(e,t,n){return e instanceof lu?cu(e,t):e instanceof uu?hu(e,t):n}function ou(e,t){return e instanceof fu?function(e){return Ul(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class au extends ru{}class lu extends ru{constructor(e){super(),this.elements=e}}function cu(e,t){const n=pu(t);for(const r of e.elements)n.some(e=>Dl(e,r))||n.push(r);return{arrayValue:{values:n}}}class uu extends ru{constructor(e){super(),this.elements=e}}function hu(e,t){let n=pu(t);for(const r of e.elements)n=n.filter(e=>!Dl(e,r));return{arrayValue:{values:n}}}class fu extends ru{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function du(e){return pl(e.integerValue||e.doubleValue)}function pu(e){return Vl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class gu{constructor(e,t){this.version=e,this.transformResults=t}}class mu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mu}static exists(e){return new mu(void 0,e)}static updateTime(e){return new mu(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class yu{}function bu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Pu(e.key,mu.none()):new Au(e.key,e.data,mu.none());{const n=e.data,r=Gl.empty();let i=new al(Jo.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Su(e.key,r,new cl(i.toArray()),mu.none())}}function wu(e,t,n){e instanceof Au?function(e,t,n){const r=e.value.clone(),i=Eu(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Su?function(e,t,n){if(!vu(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Eu(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Tu(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function xu(e,t,n,r){return e instanceof Au?function(e,t,n,r){if(!vu(e.precondition,t))return n;const i=e.value.clone(),s=ku(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Su?function(e,t,n,r){if(!vu(e.precondition,t))return n;const i=ku(e.fieldTransforms,r,t),s=t.data;return s.setAll(Tu(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return vu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Cu(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ou(r.transform,e||null);null!=i&&(null===n&&(n=Gl.empty()),n.set(r.field,i))}return n||null}function _u(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ko(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof lu&&t instanceof lu||e instanceof uu&&t instanceof uu?Ko(e.elements,t.elements,Dl):e instanceof fu&&t instanceof fu?Dl(e.Ee,t.Ee):e instanceof au&&t instanceof au}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Au extends yu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Su extends yu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Tu(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Eu(e,t,n){const r=new Map;To(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,su(o,a,n[i]))}return r}function ku(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,iu(e,s,t))}return r}class Pu extends yu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ou extends yu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Iu{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&wu(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=xu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=xu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=qc();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=bu(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ua.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jc())}isEqual(e){return this.batchId===e.batchId&&Ko(this.mutations,e.mutations,(e,t)=>_u(e,t))&&Ko(this.baseMutations,e.baseMutations,(e,t)=>_u(e,t))}}class Du{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){To(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let r=Qc;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Du(e,t,n,r)}}class Ru{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Nu{constructor(e,t){this.count=e,this.unchangedNames=t}}var ju,Lu;function Mu(e){switch(e){case ko.OK:return Ao(64938);case ko.CANCELLED:case ko.UNKNOWN:case ko.DEADLINE_EXCEEDED:case ko.RESOURCE_EXHAUSTED:case ko.INTERNAL:case ko.UNAVAILABLE:case ko.UNAUTHENTICATED:return!1;case ko.INVALID_ARGUMENT:case ko.NOT_FOUND:case ko.ALREADY_EXISTS:case ko.PERMISSION_DENIED:case ko.FAILED_PRECONDITION:case ko.ABORTED:case ko.OUT_OF_RANGE:case ko.UNIMPLEMENTED:case ko.DATA_LOSS:return!0;default:return Ao(15467,{code:e})}}function Fu(e){if(void 0===e)return xo("GRPC error has no .code"),ko.UNKNOWN;switch(e){case ju.OK:return ko.OK;case ju.CANCELLED:return ko.CANCELLED;case ju.UNKNOWN:return ko.UNKNOWN;case ju.DEADLINE_EXCEEDED:return ko.DEADLINE_EXCEEDED;case ju.RESOURCE_EXHAUSTED:return ko.RESOURCE_EXHAUSTED;case ju.INTERNAL:return ko.INTERNAL;case ju.UNAVAILABLE:return ko.UNAVAILABLE;case ju.UNAUTHENTICATED:return ko.UNAUTHENTICATED;case ju.INVALID_ARGUMENT:return ko.INVALID_ARGUMENT;case ju.NOT_FOUND:return ko.NOT_FOUND;case ju.ALREADY_EXISTS:return ko.ALREADY_EXISTS;case ju.PERMISSION_DENIED:return ko.PERMISSION_DENIED;case ju.FAILED_PRECONDITION:return ko.FAILED_PRECONDITION;case ju.ABORTED:return ko.ABORTED;case ju.OUT_OF_RANGE:return ko.OUT_OF_RANGE;case ju.UNIMPLEMENTED:return ko.UNIMPLEMENTED;case ju.DATA_LOSS:return ko.DATA_LOSS;default:return Ao(39323,{code:e})}}(Lu=ju||(ju={}))[Lu.OK=0]="OK",Lu[Lu.CANCELLED=1]="CANCELLED",Lu[Lu.UNKNOWN=2]="UNKNOWN",Lu[Lu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lu[Lu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lu[Lu.NOT_FOUND=5]="NOT_FOUND",Lu[Lu.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lu[Lu.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lu[Lu.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lu[Lu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lu[Lu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lu[Lu.ABORTED=10]="ABORTED",Lu[Lu.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lu[Lu.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lu[Lu.INTERNAL=13]="INTERNAL",Lu[Lu.UNAVAILABLE=14]="UNAVAILABLE",Lu[Lu.DATA_LOSS=15]="DATA_LOSS";let Bu=null;const Uu=new $s([4294967295,4294967295],0);function Vu(e){const t=Uo().encode(e),n=new eo;return n.update(t),new Uint8Array(n.digest())}function zu(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new $s([n,r],0),new $s([i,s],0)]}class Hu{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Wu(`Invalid padding: ${t}`);if(n<0)throw new Wu(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Wu(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Wu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=$s.fromNumber(this.fe)}pe(e,t,n){let r=e.add(t.multiply($s.fromNumber(n)));return 1===r.compare(Uu)&&(r=new $s([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const t=Vu(e),[n,r]=zu(t);for(let i=0;i<this.hashCount;i++){const e=this.pe(n,r,i);if(!this.ye(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Hu(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.fe)return;const t=Vu(e),[n,r]=zu(t);for(let i=0;i<this.hashCount;i++){const e=this.pe(n,r,i);this.we(e)}}we(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xu{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Ku.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Xu(ua.min(),r,new il(zo),zc(),Jc())}}class Ku{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Ku(n,t,Jc(),Jc(),Jc())}}class qu{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=r}}class Gu{constructor(e,t){this.targetId=e,this.De=t}}class Qu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Yu{constructor(){this.ve=0,this.Ce=$u(),this.Fe=hl.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Jc(),t=Jc(),n=Jc();return this.Ce.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ao(38017,{changeType:i})}}),new Ku(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=$u()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,To(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Ju{constructor(e){this.We=e,this.Ge=new Map,this.ze=zc(),this.je=Zu(),this.Je=Zu(),this.He=new il(zo)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:Ao(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((e,n)=>{this.nt(n)&&t(n)})}it(e){const t=e.targetId,n=e.De.count,r=this.st(t);if(r){const i=r.target;if(_c(i))if(0===n){const e=new Zo(i.path);this.Xe(t,e,Yl.newNoDocument(e,ua.min()))}else To(1===n,20013,{expectedCount:n});else{const r=this.ot(t);if(r!==n){const n=this._t(e),i=n?this.ut(n,e,r):1;if(0!==i){this.rt(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,e)}null==Bu||Bu.ct(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},f=t.unchangedNames;return f&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==f?void 0:f.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==f?void 0:f.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==f?void 0:f.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.De,this.We.lt(),n,i))}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=gl(n).toUint8Array()}catch(e){if(e instanceof ul)return Co("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Hu(s,r,i)}catch(e){return Co(e instanceof Wu?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.fe?null:o}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){const n=this.We.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.We.lt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Xe(t,n,null),r++)}),r}Pt(e){const t=new Map;this.Ge.forEach((n,r)=>{const i=this.st(r);if(i){if(n.current&&_c(i.target)){const t=new Zo(i.target.path);this.Tt(t).has(r)||this.It(r,t)||this.Xe(r,t,Yl.newNoDocument(t,e))}n.Ne&&(t.set(r,n.Le()),n.ke())}});let n=Jc();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.st(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ze.forEach((t,n)=>n.setReadTime(e));const r=new Xu(e,t,this.He,this.ze,n);return this.ze=zc(),this.je=Zu(),this.Je=Zu(),this.He=new il(zo),r}Ze(e,t){if(!this.nt(e))return;const n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;const r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Yu,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new al(zo),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new al(zo),this.je=this.je.insert(e,t)),t}nt(e){const t=null!==this.st(e);return t||wo("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Yu),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Zu(){return new il(Zo.comparator)}function $u(){return new il(Zo.comparator)}const eh={asc:"ASCENDING",desc:"DESCENDING"},th={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nh={and:"AND",or:"OR"};class rh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ih(e,t){return e.useProto3Json||Sa(t)?t:{value:t}}function sh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function oh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ah(e,t){return sh(e,t.toTimestamp())}function lh(e){return To(!!e,49232),ua.fromTimestamp(function(e){const t=dl(e);return new ca(t.seconds,t.nanos)}(e))}function ch(e,t){return uh(e,t).canonicalString()}function uh(e,t){const n=function(e){return new Qo(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function hh(e){const t=Qo.fromString(e);return To(Ih(t),10190,{key:t.toString()}),t}function fh(e,t){return ch(e.databaseId,t.path)}function dh(e,t){const n=hh(t);if(n.get(1)!==e.databaseId.projectId)throw new Po(ko.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Po(ko.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Zo(vh(n))}function ph(e,t){return ch(e.databaseId,t)}function gh(e){const t=hh(e);return 4===t.length?Qo.emptyPath():vh(t)}function mh(e){return new Qo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function vh(e){return To(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function yh(e,t,n){return{name:fh(e,t),fields:n.value.mapValue.fields}}function bh(e,t){let n;if(t instanceof Au)n={update:yh(e,t.key,t.value)};else if(t instanceof Pu)n={delete:fh(e,t.key)};else if(t instanceof Su)n={update:yh(e,t.key,t.data),updateMask:Oh(t.fieldMask)};else{if(!(t instanceof Ou))return Ao(16599,{Rt:t.type});n={verify:fh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof au)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof lu)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof uu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof fu)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw Ao(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ah(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ao(27497)}(e,t.precondition)),n}function wh(e,t){return{documents:[ph(e,t.path)]}}function xh(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ph(e,i);const s=function(e){if(0!==e.length)return Ph(ic.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Eh(e.field),direction:Ah(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ih(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{Vt:n,parent:i}}function Ch(e){let t=gh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){To(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=_h(e);return t instanceof ic&&oc(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new ec(kh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Sa(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Jl(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Jl(n,t)}(n.endAt)),Sc(t,i,o,s,a,"F",l,c)}function _h(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=kh(e.unaryFilter.field);return rc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=kh(e.unaryFilter.field);return rc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=kh(e.unaryFilter.field);return rc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=kh(e.unaryFilter.field);return rc.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ao(61313);default:return Ao(60726)}}(e):void 0!==e.fieldFilter?function(e){return rc.create(kh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ao(58110);default:return Ao(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ic.create(e.compositeFilter.filters.map(e=>_h(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ao(1026)}}(e.compositeFilter.op))}(e):Ao(30097,{filter:e})}function Ah(e){return eh[e]}function Sh(e){return th[e]}function Th(e){return nh[e]}function Eh(e){return{fieldPath:e.canonicalString()}}function kh(e){return Jo.fromServerFormat(e.fieldPath)}function Ph(e){return e instanceof rc?function(e){if("=="===e.op){if(Hl(e.value))return{unaryFilter:{field:Eh(e.field),op:"IS_NAN"}};if(zl(e.value))return{unaryFilter:{field:Eh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Hl(e.value))return{unaryFilter:{field:Eh(e.field),op:"IS_NOT_NAN"}};if(zl(e.value))return{unaryFilter:{field:Eh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eh(e.field),op:Sh(e.op),value:e.value}}}(e):e instanceof ic?function(e){const t=e.getFilters().map(e=>Ph(e));return 1===t.length?t[0]:{compositeFilter:{op:Th(e.op),filters:t}}}(e):Ao(54877,{filter:e})}function Oh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Ih(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Dh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ua.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ua.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:hl.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Dh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Dh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Dh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Dh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Rh{constructor(e){this.gt=e}}function Nh(e){const t=Ch({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Dc(t,t.limit,"L"):t}class jh{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(pl(e.integerValue));else if("doubleValue"in e){const n=pl(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),Ta(n)?t.Ft(0):t.Ft(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ct(t,20),"string"==typeof n&&(n=dl(n)),t.Mt(`${n.seconds||""}`),t.Ft(n.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(gl(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else"mapValue"in e?ql(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Xl(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Ao(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const n=e.fields||{};this.Ct(t,55);for(const r of Object.keys(n))this.xt(r,t),this.Dt(n[r],t)}Lt(e,t){var n,r;const i=e.fields||{};this.Ct(t,53);const s=Ol,o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Ct(t,15),t.Ft(pl(o)),this.xt(s,t),this.Dt(i[s],t)}qt(e,t){const n=e.values||[];this.Ct(t,50);for(const r of n)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),Zo.fromName(e).path.forEach(e=>{this.Ct(t,60),this.$t(e,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}jh.Ut=new jh;class Lh{constructor(){this.Dn=new Mh}addToCollectionParentIndex(e,t){return this.Dn.add(t),wa.resolve()}getCollectionParents(e,t){return wa.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return wa.resolve()}deleteFieldIndex(e,t){return wa.resolve()}deleteAllFieldIndexes(e){return wa.resolve()}createTargetIndexes(e,t){return wa.resolve()}getDocumentsMatchingTarget(e,t){return wa.resolve(null)}getIndexType(e,t){return wa.resolve(0)}getFieldIndexes(e,t){return wa.resolve([])}getNextCollectionGroupToUpdate(e){return wa.resolve(null)}getMinOffset(e,t){return wa.resolve(ga.min())}getMinOffsetFromCollectionGroup(e,t){return wa.resolve(ga.min())}updateCollectionGroup(e,t,n){return wa.resolve()}updateIndexEntries(e,t){return wa.resolve()}}class Mh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new al(Qo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new al(Qo.comparator)).toArray()}}new Uint8Array(0);const Fh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bh=41943040;class Uh{static withCacheSize(e){return new Uh(e,Uh.DEFAULT_COLLECTION_PERCENTILE,Uh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Uh.DEFAULT_COLLECTION_PERCENTILE=10,Uh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Uh.DEFAULT=new Uh(Bh,Uh.DEFAULT_COLLECTION_PERCENTILE,Uh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Uh.DISABLED=new Uh(-1,0,0);class Vh{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Vh(0)}static ur(){return new Vh(-1)}}const zh="LruGarbageCollector",Hh=1048576;function Wh(e,t){let[n,r]=e,[i,s]=t;const o=zo(n,i);return 0===o?zo(r,s):o}class Xh{constructor(e){this.Tr=e,this.buffer=new al(Wh),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Wh(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Kh{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){wo(zh,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ca(e)?wo(zh,"Ignoring IndexedDB error during garbage collection: ",e):await ba(e)}await this.Rr(3e5)})}}class qh{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return wa.resolve(_a.ue);const n=new Xh(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.gr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(wo("LruGarbageCollector","Garbage collection skipped; disabled"),wa.resolve(Fh)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(wo("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fh):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(wo("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),bo()<=st.DEBUG&&wo("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-c}ms`),wa.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Gh(e,t){return new qh(e,t)}class Qh{constructor(){this.changes=new Uc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?wa.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Yh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Jh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&xu(n.mutation,e,cl.empty(),ca.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Jc()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jc();const r=Kc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Wc();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Kc();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Jc()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=zc();const s=Gc(),o=Gc();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Su)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),xu(o.mutation,t,o.mutation.getFieldMask(),ca.now())):s.set(t.key,cl.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new Yh(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=Gc();let r=new il((e,t)=>e-t),i=Jc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||cl.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Jc()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=qc();l.forEach(e=>{if(!i.has(e)){const r=bu(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return wa.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Zo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):wa.resolve(Kc());let o=ha,a=i;return s.next(t=>wa.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?wa.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Jc())).next(e=>({batchId:o,changes:Xc(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Zo(t)).next(e=>{let t=Wc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Wc();return this.indexManager.getCollectionParents(e,i).next(o=>wa.forEach(o,o=>{const a=function(e,t){return new Ac(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Yl.newInvalidDocument(r)))});let n=Wc();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&xu(s.mutation,r,cl.empty(),ca.now()),Lc(t,r)&&(n=n.insert(e,r))}),n})}}class Zh{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return wa.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(e){return{id:e.id,version:e.version,createTime:lh(e.createTime)}}(t)),wa.resolve()}getNamedQuery(e,t){return wa.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(e){return{name:e.name,query:Nh(e.bundledQuery),readTime:lh(e.readTime)}}(t)),wa.resolve()}}class $h{constructor(){this.overlays=new il(Zo.comparator),this.kr=new Map}getOverlay(e,t){return wa.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Kc();return wa.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.wt(e,t,r)}),wa.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.kr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(n)),wa.resolve()}getOverlaysForCollection(e,t,n){const r=Kc(),i=t.length+1,s=new Zo(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return wa.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new il((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Kc(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Kc(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return wa.resolve(o)}wt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ru(t,n));let i=this.kr.get(t);void 0===i&&(i=Jc(),this.kr.set(t,i)),this.kr.set(t,i.add(n.key))}}class ef{constructor(){this.sessionToken=hl.EMPTY_BYTE_STRING}getSessionToken(e){return wa.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,wa.resolve()}}class tf{constructor(){this.qr=new al(nf.Qr),this.$r=new al(nf.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new nf(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new nf(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){const t=new Zo(new Qo([])),n=new nf(t,e),r=new nf(t,e+1),i=[];return this.$r.forEachInRange([n,r],e=>{this.Wr(e),i.push(e.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Zo(new Qo([])),n=new nf(t,e),r=new nf(t,e+1);let i=Jc();return this.$r.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new nf(e,0),n=this.qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class nf{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Zo.comparator(e.key,t.key)||zo(e.Hr,t.Hr)}static Ur(e,t){return zo(e.Hr,t.Hr)||Zo.comparator(e.key,t.key)}}class rf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new al(nf.Qr)}checkEmpty(e){return wa.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Iu(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Yr=this.Yr.add(new nf(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return wa.resolve(s)}lookupMutationBatch(e,t){return wa.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),i=r<0?0:r;return wa.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return wa.resolve(0===this.mutationQueue.length?Aa:this.er-1)}getAllMutationBatches(e){return wa.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new nf(t,0),r=new nf(t,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);i.push(t)}),wa.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new al(zo);return t.forEach(e=>{const t=new nf(e,0),r=new nf(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),wa.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Zo.isDocumentKey(i)||(i=i.child(""));const s=new nf(new Zo(i),0);let o=new al(zo);return this.Yr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Hr)),!0)},s),wa.resolve(this.ei(o))}ei(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){To(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Yr;return wa.forEach(t.mutations,r=>{const i=new nf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new nf(t,0),r=this.Yr.firstAfterOrEqual(n);return wa.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,wa.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class sf{constructor(e){this.ni=e,this.docs=new il(Zo.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return wa.resolve(n?n.document.mutableCopy():Yl.newInvalidDocument(t))}getEntries(e,t){let n=zc();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Yl.newInvalidDocument(e))}),wa.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=zc();const s=t.path,o=new Zo(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ma(pa(o),n)<=0||(r.has(o.key)||Lc(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return wa.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ao(9500)}ri(e,t){return wa.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new of(this)}getSize(e){return wa.resolve(this.size)}}class of extends Qh{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)}),wa.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class af{constructor(e){this.persistence=e,this.ii=new Uc(e=>xc(e),Cc),this.lastRemoteSnapshotVersion=ua.min(),this.highestTargetId=0,this.si=0,this.oi=new tf,this.targetCount=0,this._i=Vh.ar()}forEachTarget(e,t){return this.ii.forEach((e,n)=>t(n)),wa.resolve()}getLastRemoteSnapshotVersion(e){return wa.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return wa.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),wa.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),wa.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Vh(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,wa.resolve()}updateTargetData(e,t){return this.hr(t),wa.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,wa.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ii.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.ii.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),wa.waitFor(i).next(()=>r)}getTargetCount(e){return wa.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return wa.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),wa.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),wa.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),wa.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return wa.resolve(n)}containsKey(e,t){return wa.resolve(this.oi.containsKey(t))}}class lf{constructor(e,t){this.ai={},this.overlays={},this.ui=new _a(0),this.ci=!1,this.ci=!0,this.li=new ef,this.referenceDelegate=e(this),this.hi=new af(this),this.indexManager=new Lh,this.remoteDocumentCache=function(e){return new sf(e)}(e=>this.referenceDelegate.Pi(e)),this.serializer=new Rh(t),this.Ti=new Zh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $h,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new rf(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){wo("MemoryPersistence","Starting transaction:",e);const r=new cf(this.ui.next());return this.referenceDelegate.Ii(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return wa.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class cf extends ya{constructor(e){super(),this.currentSequenceNumber=e}}class uf{constructor(e){this.persistence=e,this.Ai=new tf,this.Ri=null}static Vi(e){return new uf(e)}get mi(){if(this.Ri)return this.Ri;throw Ao(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),wa.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),wa.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),wa.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wa.forEach(this.mi,n=>{const r=Zo.fromPath(n);return this.fi(e,r).next(e=>{e||t.removeEntry(r,ua.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return wa.or([()=>wa.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class hf{constructor(e,t){this.persistence=e,this.gi=new Uc(e=>Pa(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Gh(this,t)}static Vi(e,t){return new hf(e,t)}Ii(){}di(e){return wa.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}gr(e,t){return wa.forEach(this.gi,(n,r)=>this.Sr(e,n,r).next(e=>e?wa.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ri(e,r=>this.Sr(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ua.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),wa.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),wa.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),wa.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),wa.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Bl(e.data.value)),t}Sr(e,t,n){return wa.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.gi.get(t);return wa.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ff{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(e,t){let n=Jc(),r=Jc();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ff(e,t.fromCache,n,r)}}class df{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class pf{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=Ve()?8:xa(Be())>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ps(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ys(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new df;return this.ws(e,t,n).next(r=>{if(i.result=r,this.Rs)return this.Ss(e,t,n,r.size)})}).next(()=>i.result)}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(bo()<=st.DEBUG&&wo("QueryEngine","SDK will not create cache indexes for query:",jc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),wa.resolve()):(bo()<=st.DEBUG&&wo("QueryEngine","Query:",jc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.fs*r?(bo()<=st.DEBUG&&wo("QueryEngine","The SDK decides to create cache indexes for query:",jc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Oc(t))):wa.resolve())}ps(e,t){if(Ec(t))return wa.resolve(null);let n=Oc(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Dc(t,null,"F"),n=Oc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Jc(...r);return this.gs.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.bs(t,r);return this.Ds(t,s,i,n.readTime)?this.ps(e,Dc(t,null,"F")):this.vs(e,s,t,n)}))})))}ys(e,t,n,r){return Ec(t)||r.isEqual(ua.min())?wa.resolve(null):this.gs.getDocuments(e,n).next(i=>{const s=this.bs(t,i);return this.Ds(t,s,n,r)?wa.resolve(null):(bo()<=st.DEBUG&&wo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),jc(t)),this.vs(e,s,t,da(r,ha)).next(e=>e))})}bs(e,t){let n=new al(Fc(e));return t.forEach((t,r)=>{Lc(e,r)&&(n=n.add(r))}),n}Ds(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ws(e,t,n){return bo()<=st.DEBUG&&wo("QueryEngine","Using full collection scan to execute query:",jc(t)),this.gs.getDocumentsMatchingQuery(e,t,ga.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const gf="LocalStore";class mf{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new il(zo),this.Ms=new Uc(e=>xc(e),Cc),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jh(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function vf(e,t,n,r){return new mf(e,t,n,r)}async function yf(e,t){const n=Eo(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Ns(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=Jc();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Bs:e,removedBatchIds:i,addedBatchIds:s}))})})}function bf(e){const t=Eo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function wf(e,t,n){let r=Jc(),i=Jc();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=zc();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ua.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):wo(gf,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{Ls:r,ks:i}})}function xf(e,t){const n=Eo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Aa),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Cf(e,t){const n=Eo(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.hi.getTargetData(e,t).next(i=>i?(r=i,wa.resolve(r)):n.hi.allocateTargetId(e).next(i=>(r=new Dh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.hi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Fs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(e.targetId,e),n.Ms.set(t,e.targetId)),e})}async function _f(e,t,n){const r=Eo(e),i=r.Fs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Ca(e))throw e;wo(gf,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(i.target)}function Af(e,t,n){const r=Eo(e);let i=ua.min(),s=Jc();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Eo(e),i=r.Ms.get(n);return void 0!==i?wa.resolve(r.Fs.get(i)):r.hi.getTargetData(t,n)}(r,e,Oc(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:ua.min(),n?s:Jc())).next(e=>(Sf(r,Mc(t),e),{documents:e,qs:s})))}function Sf(e,t,n){let r=e.xs.get(t)||ua.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.xs.set(t,r)}class Tf{constructor(){this.activeTargetIds=$c()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ef{constructor(){this.Fo=new Tf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Tf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class kf{xo(e){}shutdown(){}}const Pf="ConnectivityMonitor";class Of{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){wo(Pf,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){wo(Pf,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let If=null;function Df(){return null===If?If=268435456+Math.round(2147483648*Math.random()):If++,"0x"+If.toString(16)}const Rf="RestConnection",Nf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jf{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${n}/databases/${r}`,this.Ko=this.databaseId.database===Al?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){const s=Df(),o=this.Go(e,t.toUriEncodedString());wo(Rf,`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(a,r,i);const{host:l}=new URL(o),c=Re(l);return this.jo(e,o,a,n,c).then(t=>(wo(Rf,`Received RPC '${e}' ${s}: `,t),t),t=>{throw Co(Rf,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t})}Jo(e,t,n,r,i,s){return this.Wo(e,t,n,r,i)}zo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+vo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Go(e,t){const n=Nf[e];return`${this.$o}/v1/${t}:${n}`}terminate(){}}class Lf{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const Mf="WebChannelConnection";class Ff extends jf{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,i){const s=Df();return new Promise((i,o)=>{const a=new ro;a.setWithCredentials(!0),a.listenOnce(so.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case oo.NO_ERROR:const t=a.getResponseJson();wo(Mf,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case oo.TIMEOUT:wo(Mf,`RPC '${e}' ${s} timed out`),o(new Po(ko.DEADLINE_EXCEEDED,"Request time out"));break;case oo.HTTP_ERROR:const n=a.getStatus();if(wo(Mf,`RPC '${e}' ${s} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ko).indexOf(t)>=0?t:ko.UNKNOWN}(t.status);o(new Po(e,t.message))}else o(new Po(ko.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Po(ko.UNAVAILABLE,"Connection failed."));break;default:Ao(9055,{c_:e,streamId:s,l_:a.getLastErrorCode(),h_:a.getLastError()})}}finally{wo(Mf,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);wo(Mf,`RPC '${e}' ${s} sending request:`,r),a.send(t,"POST",l,n,15)})}P_(e,t,n){const r=Df(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=uo(),o=co(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.zo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");wo(Mf,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);this.T_(u);let h=!1,f=!1;const d=new Lf({Ho:t=>{f?wo(Mf,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(wo(Mf,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),wo(Mf,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Yo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,io.EventType.OPEN,()=>{f||(wo(Mf,`RPC '${e}' stream ${r} transport opened.`),d.s_())}),p(u,io.EventType.CLOSE,()=>{f||(f=!0,wo(Mf,`RPC '${e}' stream ${r} transport closed`),d.__(),this.I_(u))}),p(u,io.EventType.ERROR,t=>{f||(f=!0,Co(Mf,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),d.__(new Po(ko.UNAVAILABLE,"The operation could not be completed")))}),p(u,io.EventType.MESSAGE,t=>{var n;if(!f){const i=t.data[0];To(!!i,16349);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){wo(Mf,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=ju[e];if(void 0!==t)return Fu(t)}(t),i=o.message;void 0===n&&(n=ko.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),f=!0,d.__(new Po(n,i)),u.close()}else wo(Mf,`RPC '${e}' stream ${r} received:`,i),d.a_(i)}}),p(o,lo.STAT_EVENT,t=>{t.stat===ao.PROXY?wo(Mf,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===ao.NOPROXY&&wo(Mf,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{d.o_()},0),d}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Bf(){return"undefined"!=typeof document?document:null}function Uf(e){return new rh(e,!0)}class Vf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&wo("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const zf="PersistentStream";class Hf{constructor(e,t,n,r,i,s,o,a){this.Fi=e,this.w_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Vf(e,t)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,4!==e?this.F_.reset():t&&t.code===ko.RESOURCE_EXHAUSTED?(xo(t.toString()),xo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ko.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.b_===t&&this.W_(n,r)},t=>{e(()=>{const e=new Po(ko.UNKNOWN,"Fetching auth token failed: "+t.message);return this.G_(e)})})}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(e=>{n(()=>this.G_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.C_?this.j_(e):this.onNext(e))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return wo(zf,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(wo(zf,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wf extends Hf{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ao(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(To(void 0===t||"string"==typeof t,58123),hl.fromBase64String(t||"")):(To(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),hl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?ko.UNKNOWN:Fu(e.code);return new Po(t,e.message||"")}(o);n=new Qu(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=dh(e,r.document.name),s=lh(r.document.updateTime),o=r.document.createTime?lh(r.document.createTime):ua.min(),a=new Gl({mapValue:{fields:r.document.fields}}),l=Yl.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new qu(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=dh(e,r.document),s=r.readTime?lh(r.readTime):ua.min(),o=Yl.newNoDocument(i,s),a=r.removedTargetIds||[];n=new qu([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=dh(e,r.document),s=r.removedTargetIds||[];n=new qu([],s,i,null)}else{if(!("filter"in t))return Ao(11601,{At:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Nu(r,i),o=e.targetId;n=new Gu(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ua.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ua.min():t.readTime?lh(t.readTime):ua.min()}(e);return this.listener.J_(t,n)}H_(e){const t={};t.database=mh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=_c(r)?{documents:wh(e,r)}:{query:xh(e,r).Vt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=oh(e,t.resumeToken);const r=ih(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ua.min())>0){n.readTime=sh(e,t.snapshotVersion.toTimestamp());const r=ih(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ao(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){const t={};t.database=mh(this.serializer),t.removeTarget=e,this.k_(t)}}class Xf extends Hf{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return To(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,To(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){To(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=function(e,t){return e&&e.length>0?(To(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?lh(e.updateTime):lh(t);return n.isEqual(ua.min())&&(n=lh(t)),new gu(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=lh(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=mh(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>bh(this.serializer,e))};this.k_(t)}}class Kf{}class qf extends Kf{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new Po(ko.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Wo(e,uh(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ko.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Po(ko.UNKNOWN,e.toString())})}Jo(e,t,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Jo(e,uh(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ko.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Po(ko.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Gf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xo(t),this._a=!1):wo("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const Qf="RemoteStore";class Yf{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(e=>{n.enqueueAndForget(async()=>{sd(this)&&(wo(Qf,"Restarting streams for network reachability change."),await async function(e){const t=Eo(e);t.Ia.add(4),await Zf(t),t.Aa.set("Unknown"),t.Ia.delete(4),await Jf(t)}(this))})}),this.Aa=new Gf(n,r)}}async function Jf(e){if(sd(e))for(const t of e.da)await t(!0)}async function Zf(e){for(const t of e.da)await t(!1)}function $f(e,t){const n=Eo(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),id(n)?rd(n):Ad(n).x_()&&td(n,t))}function ed(e,t){const n=Eo(e),r=Ad(n);n.Ta.delete(t),r.x_()&&nd(n,t),0===n.Ta.size&&(r.x_()?r.B_():sd(n)&&n.Aa.set("Unknown"))}function td(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ua.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ad(e).H_(t)}function nd(e,t){e.Ra.$e(t),Ad(e).Y_(t)}function rd(e){e.Ra=new Ju({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),Ad(e).start(),e.Aa.aa()}function id(e){return sd(e)&&!Ad(e).M_()&&e.Ta.size>0}function sd(e){return 0===Eo(e).Ia.size}function od(e){e.Ra=void 0}async function ad(e){e.Aa.set("Online")}async function ld(e){e.Ta.forEach((t,n)=>{td(e,t)})}async function cd(e,t){od(e),id(e)?(e.Aa.la(t),rd(e)):e.Aa.set("Unknown")}async function ud(e,t,n){if(e.Aa.set("Online"),t instanceof Qu&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ta.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ta.delete(r),e.Ra.removeTarget(r))}(e,t)}catch(n){wo(Qf,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await hd(e,n)}else if(t instanceof qu?e.Ra.Ye(t):t instanceof Gu?e.Ra.it(t):e.Ra.et(t),!n.isEqual(ua.min()))try{const t=await bf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Ra.Pt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ta.get(r);i&&e.Ta.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ta.get(t);if(!r)return;e.Ta.set(t,r.withResumeToken(hl.EMPTY_BYTE_STRING,r.snapshotVersion)),nd(e,t);const i=new Dh(r.target,t,n,r.sequenceNumber);td(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){wo(Qf,"Failed to raise snapshot:",t),await hd(e,t)}}async function hd(e,t,n){if(!Ca(t))throw t;e.Ia.add(1),await Zf(e),e.Aa.set("Offline"),n||(n=()=>bf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{wo(Qf,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await Jf(e)})}function fd(e,t){return t().catch(n=>hd(e,n,t))}async function dd(e){const t=Eo(e),n=Sd(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Aa;for(;pd(t);)try{const e=await xf(t.localStore,r);if(null===e){0===t.Pa.length&&n.B_();break}r=e.batchId,gd(t,e)}catch(e){await hd(t,e)}md(t)&&vd(t)}function pd(e){return sd(e)&&e.Pa.length<10}function gd(e,t){e.Pa.push(t);const n=Sd(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function md(e){return sd(e)&&!Sd(e).M_()&&e.Pa.length>0}function vd(e){Sd(e).start()}async function yd(e){Sd(e).na()}async function bd(e){const t=Sd(e);for(const n of e.Pa)t.X_(n.mutations)}async function wd(e,t,n){const r=e.Pa.shift(),i=Du.from(r,t,n);await fd(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await dd(e)}async function xd(e,t){t&&Sd(e).Z_&&await async function(e,t){if(function(e){return Mu(e)&&e!==ko.ABORTED}(t.code)){const n=e.Pa.shift();Sd(e).N_(),await fd(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await dd(e)}}(e,t),md(e)&&vd(e)}async function Cd(e,t){const n=Eo(e);n.asyncQueue.verifyOperationInProgress(),wo(Qf,"RemoteStore received new credentials");const r=sd(n);n.Ia.add(3),await Zf(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await Jf(n)}async function _d(e,t){const n=Eo(e);t?(n.Ia.delete(2),await Jf(n)):t||(n.Ia.add(2),await Zf(n),n.Aa.set("Unknown"))}function Ad(e){return e.Va||(e.Va=function(e,t,n){const r=Eo(e);return r.ia(),new Wf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:ad.bind(null,e),e_:ld.bind(null,e),n_:cd.bind(null,e),J_:ud.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),id(e)?rd(e):e.Aa.set("Unknown")):(await e.Va.stop(),od(e))})),e.Va}function Sd(e){return e.ma||(e.ma=function(e,t,n){const r=Eo(e);return r.ia(),new Xf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:yd.bind(null,e),n_:xd.bind(null,e),ea:bd.bind(null,e),ta:wd.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await dd(e)):(await e.ma.stop(),e.Pa.length>0&&(wo(Qf,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))})),e.ma}class Td{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Oo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Td(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Po(ko.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ed(e,t){if(xo("AsyncQueue",`${t}: ${e}`),Ca(e))return new Po(ko.UNAVAILABLE,`${t}: ${e}`);throw e}class kd{static emptySet(e){return new kd(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Zo.comparator(t.key,n.key):(e,t)=>Zo.comparator(e.key,t.key),this.keyedMap=Wc(),this.sortedSet=new il(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof kd))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new kd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Pd{constructor(){this.fa=new il(Zo.comparator)}track(e){const t=e.doc.key,n=this.fa.get(t);n?0!==e.type&&3===n.type?this.fa=this.fa.insert(t,e):3===e.type&&1!==n.type?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.fa=this.fa.remove(t):1===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ao(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,n)=>{e.push(n)}),e}}class Od{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Od(e,t,kd.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Id{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Dd{constructor(){this.queries=Rd(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){const n=Eo(e),r=n.queries;n.queries=Rd(),r.forEach((e,n)=>{for(const r of n.wa)r.onError(t)})}(this,new Po(ko.ABORTED,"Firestore shutting down"))}}function Rd(){return new Uc(e=>Nc(e),Rc)}async function Nd(e,t){const n=Eo(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Sa()&&t.ba()&&(r=2):(s=new Id,r=t.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Ed(e,`Initialization of query '${jc(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.wa.push(t),t.va(n.onlineState),s.ya&&t.Ca(s.ya)&&Fd(n)}async function jd(e,t){const n=Eo(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.wa.indexOf(t);e>=0&&(s.wa.splice(e,1),0===s.wa.length?i=t.ba()?0:1:!s.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ld(e,t){const n=Eo(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.wa)e.Ca(i)&&(r=!0);t.ya=i}}r&&Fd(n)}function Md(e,t,n){const r=Eo(e),i=r.queries.get(t);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(t)}function Fd(e){e.Da.forEach(e=>{e.next()})}var Bd,Ud;(Ud=Bd||(Bd={})).Fa="default",Ud.Cache="cache";class Vd{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Od(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache)return!0;if(!this.ba())return!0;const n="Offline"!==t;return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}La(e){e=Od.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Bd.Cache}}class zd{constructor(e){this.key=e}}class Hd{constructor(e){this.key=e}}class Wd{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Jc(),this.mutatedKeys=Jc(),this.Xa=Fc(e),this.eu=new kd(this.Xa)}get tu(){return this.Ha}nu(e,t){const n=t?t.ru:new Pd,r=t?t.eu:this.eu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Lc(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let d=!1;c&&u?c.data.isEqual(u.data)?h!==f&&(n.track({type:3,doc:u}),d=!0):this.iu(c,u)||(n.track({type:2,doc:u}),d=!0,(a&&this.Xa(u,a)>0||l&&this.Xa(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),d=!0):c&&!u&&(n.track({type:1,doc:c}),d=!0,(a||l)&&(o=!0)),d&&(u?(s=s.add(u),i=f?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{eu:s,ru:n,Ds:o,mutatedKeys:i}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ao(20277,{At:e})}};return n(e)-n(t)}(e.type,t.type)||this.Xa(e.doc,t.doc)),this.su(n),r=null!=r&&r;const o=t&&!r?this.ou():[],a=0===this.Za.size&&this.current&&!r?1:0,l=a!==this.Ya;return this.Ya=a,0!==s.length||l?{snapshot:new Od(this.query,e.eu,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Pd,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Jc(),this.eu.forEach(e=>{this.au(e.key)&&(this.Za=this.Za.add(e.key))});const t=[];return e.forEach(e=>{this.Za.has(e)||t.push(new Hd(e))}),this.Za.forEach(n=>{e.has(n)||t.push(new zd(n))}),t}uu(e){this.Ha=e.qs,this.Za=Jc();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Od.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const Xd="SyncEngine";class Kd{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class qd{constructor(e){this.key=e,this.lu=!1}}class Gd{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Uc(e=>Nc(e),Rc),this.Tu=new Map,this.Iu=new Set,this.du=new il(Zo.comparator),this.Eu=new Map,this.Au=new tf,this.Ru={},this.Vu=new Map,this.mu=Vh.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}async function Qd(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=mp(e);let i;const s=r.Pu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await Jd(r,t,n,!0),i}async function Yd(e,t){const n=mp(e);await Jd(n,t,!0,!1)}async function Jd(e,t,n,r){const i=await Cf(e.localStore,Oc(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Zd(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&$f(e.remoteStore,i),a}async function Zd(e,t,n,r,i){e.gu=(t,n,r)=>async function(e,t,n,r){let i=t.view.nu(n);i.Ds&&(i=await Af(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.nu(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return up(e,t.targetId,a._u),a.snapshot}(e,t,n,r);const s=await Af(e.localStore,t,!0),o=new Wd(t,s.qs),a=o.nu(s.documents),l=Ku.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);up(e,n,c._u);const u=new Kd(t,n,o);return e.Pu.set(t,u),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),c.snapshot}async function $d(e,t,n){const r=Eo(e),i=r.Pu.get(t),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(e=>!Rc(e,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _f(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ed(r.remoteStore,i.targetId),lp(r,i.targetId)}).catch(ba)):(lp(r,i.targetId),await _f(r.localStore,i.targetId,!0))}async function ep(e,t){const n=Eo(e),r=n.Pu.get(t),i=n.Tu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ed(n.remoteStore,r.targetId))}async function tp(e,t){const n=Eo(e);try{const e=await function(e,t){const n=Eo(e),r=t.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.hi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.hi.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(hl.EMPTY_BYTE_STRING,ua.min()).withLastLimboFreeSnapshotVersion(ua.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.hi.updateTargetData(e,c))});let a=zc(),l=Jc();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(wf(e,s,t.documentUpdates).next(e=>{a=e.Ls,l=e.ks})),!r.isEqual(ua.min())){const t=n.hi.getLastRemoteSnapshotVersion(e).next(t=>n.hi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return wa.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Fs=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Eu.get(t);r&&(To(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.lu=!0:e.modifiedDocuments.size>0?To(r.lu,14607):e.removedDocuments.size>0&&(To(r.lu,42227),r.lu=!1))}),await dp(n,e,t)}catch(e){await ba(e)}}function np(e,t,n){const r=Eo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Pu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Eo(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.wa)i.va(t)&&(r=!0)}),r&&Fd(n)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function rp(e,t,n){const r=Eo(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Eu.get(t),s=i&&i.key;if(s){let e=new il(Zo.comparator);e=e.insert(s,Yl.newNoDocument(s,ua.min()));const n=Jc().add(s),i=new Xu(ua.min(),new Map,new il(zo),e,n);await tp(r,i),r.du=r.du.remove(s),r.Eu.delete(t),fp(r)}else await _f(r.localStore,t,!1).then(()=>lp(r,t,n)).catch(ba)}async function ip(e,t){const n=Eo(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Eo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=wa.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);To(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Jc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);ap(n,r,null),op(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await dp(n,e)}catch(e){await ba(e)}}async function sp(e,t,n){const r=Eo(e);try{const e=await function(e,t){const n=Eo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(To(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);ap(r,t,n),op(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await dp(r,e)}catch(n){await ba(n)}}function op(e,t){(e.Vu.get(t)||[]).forEach(e=>{e.resolve()}),e.Vu.delete(t)}function ap(e,t,n){const r=Eo(e);let i=r.Ru[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ru[r.currentUser.toKey()]=i}}function lp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(t=>{e.Au.containsKey(t)||cp(e,t)})}function cp(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(ed(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),fp(e))}function up(e,t,n){for(const r of n)r instanceof zd?(e.Au.addReference(r.key,t),hp(e,r)):r instanceof Hd?(wo(Xd,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||cp(e,r.key)):Ao(19791,{yu:r})}function hp(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(wo(Xd,"New document in limbo: "+n),e.Iu.add(r),fp(e))}function fp(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new Zo(Qo.fromString(t)),r=e.mu.next();e.Eu.set(r,new qd(n)),e.du=e.du.insert(n,r),$f(e.remoteStore,new Dh(Oc(Tc(n.path)),r,"TargetPurposeLimboResolution",_a.ue))}}async function dp(e,t,n){const r=Eo(e),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((e,a)=>{o.push(r.gu(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=ff.Es(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.hu.J_(i),await async function(e,t){const n=Eo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>wa.forEach(t,t=>wa.forEach(t.Is,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>wa.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ca(e))throw e;wo(gf,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Fs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Fs=n.Fs.insert(e,i)}}}(r.localStore,s))}async function pp(e,t){const n=Eo(e);if(!n.currentUser.isEqual(t)){wo(Xd,"User change. New user:",t.toKey());const e=await yf(n.localStore,t);n.currentUser=t,function(e,t){e.Vu.forEach(e=>{e.forEach(e=>{e.reject(new Po(ko.CANCELLED,t))})}),e.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await dp(n,e.Bs)}}function gp(e,t){const n=Eo(e),r=n.Eu.get(t);if(r&&r.lu)return Jc().add(r.key);{let e=Jc();const r=n.Tu.get(t);if(!r)return e;for(const t of r){const r=n.Pu.get(t);e=e.unionWith(r.view.tu)}return e}}function mp(e){const t=Eo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=tp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rp.bind(null,t),t.hu.J_=Ld.bind(null,t.eventManager),t.hu.pu=Md.bind(null,t.eventManager),t}function vp(e){const t=Eo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ip.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=sp.bind(null,t),t}class yp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return vf(this.persistence,new pf,e.initialUser,this.serializer)}Du(e){return new lf(uf.Vi,this.serializer)}bu(e){return new Ef}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yp.provider={build:()=>new yp};class bp extends yp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){To(this.persistence.referenceDelegate instanceof hf,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Kh(n,e.asyncQueue,t)}Du(e){const t=void 0!==this.cacheSizeBytes?Uh.withCacheSize(this.cacheSizeBytes):Uh.DEFAULT;return new lf(e=>hf.Vi(e,t),this.serializer)}}class wp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>np(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=pp.bind(null,this.syncEngine),await _d(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Dd}createDatastore(e){const t=Uf(e.databaseInfo.databaseId),n=function(e){return new Ff(e)}(e.databaseInfo);return function(e,t,n,r){return new qf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Yf(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>np(this.syncEngine,e,0),Of.C()?new Of:new kf)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Gd(e,t,n,r,i,s);return o&&(a.fu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Eo(e);wo(Qf,"RemoteStore shutting down."),t.Ia.add(5),await Zf(t),t.Ea.shutdown(),t.Aa.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}wp.provider={build:()=>new wp};class xp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Cp="FirestoreClient";class _p{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=mo.UNAUTHENTICATED,this.clientId=Vo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{wo(Cp,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(wo(Cp,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ed(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ap(e,t){e.asyncQueue.verifyOperationInProgress(),wo(Cp,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await yf(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>{Co("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{wo("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(e=>{Co("Terminating Firestore due to IndexedDb database deletion failed",e)})}),e._offlineComponents=t}async function Sp(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Tp(e);wo(Cp,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Cd(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Cd(t.remoteStore,n)),e._onlineComponents=t}async function Tp(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){wo(Cp,"Using user provided OfflineComponentProvider");try{await Ap(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===ko.FAILED_PRECONDITION||e.code===ko.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Co("Error using user provided cache. Falling back to memory cache: "+n),await Ap(e,new yp)}}else wo(Cp,"Using default OfflineComponentProvider"),await Ap(e,new bp(void 0));return e._offlineComponents}async function Ep(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(wo(Cp,"Using user provided OnlineComponentProvider"),await Sp(e,e._uninitializedComponentsProvider._online)):(wo(Cp,"Using default OnlineComponentProvider"),await Sp(e,new wp))),e._onlineComponents}function kp(e){return Ep(e).then(e=>e.syncEngine)}async function Pp(e){const t=await Ep(e),n=t.eventManager;return n.onListen=Qd.bind(null,t.syncEngine),n.onUnlisten=$d.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Yd.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ep.bind(null,t.syncEngine),n}function Op(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Oo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new xp({next:n=>{s.Ou(),t.enqueueAndForget(()=>jd(e,o)),n.fromCache&&"server"===r.source?i.reject(new Po(ko.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Vd(n,s,{includeMetadataChanges:!0,ka:!0});return Nd(e,o)}(await Pp(e),e.asyncQueue,t,n,r)),r.promise}function Ip(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Dp=new Map,Rp="firestore.googleapis.com",Np=!0;class jp{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Po(ko.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Rp,this.ssl=Np}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Np;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Bh;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Hh)throw new Po(ko.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Po(ko.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ip(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Po(ko.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Po(ko.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Po(ko.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lp{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Po(ko.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Po(ko.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jp(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Do;switch(e.type){case"firstParty":return new Lo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Po(ko.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Dp.get(e);t&&(wo("ComponentProvider","Removing Datastore"),Dp.delete(e),t.terminate())}(this),Promise.resolve()}}class Mp{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Mp(this.firestore,e,this._query)}}class Fp{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fp(this.firestore,e,this._key)}toJSON(){return{type:Fp._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(oa(t,Fp._jsonSchema))return new Fp(e,n||null,new Zo(Qo.fromString(t.referencePath)))}}Fp._jsonSchemaVersion="firestore/documentReference/1.0",Fp._jsonSchema={type:sa("string",Fp._jsonSchemaVersion),referencePath:sa("string")};class Bp extends Mp{constructor(e,t,n){super(e,t,Tc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fp(this.firestore,null,new Zo(e))}withConverter(e){return new Bp(this.firestore,e,this._path)}}function Up(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$e(e),1===arguments.length&&(t=Vo.newId()),$o("doc","path",t),e instanceof Lp){const n=Qo.fromString(t,...r);return ea(n),new Fp(e,null,new Zo(n))}{if(!(e instanceof Fp||e instanceof Bp))throw new Po(ko.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Qo.fromString(t,...r));return ea(n),new Fp(e.firestore,e instanceof Bp?e.converter:null,new Zo(n))}}const Vp="AsyncQueue";class zp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Vf(this,"async_queue_retry"),this.oc=()=>{const e=Bf();e&&wo(Vp,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;const t=Bf();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Bf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Oo;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(tx){if(!Ca(tx))throw tx;wo(Vp,"Operation failed with retryable error: "+tx)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,xo("INTERNAL UNHANDLED ERROR: ",Hp(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=Td.createAndSchedule(this,e,t,n,e=>this.lc(e));return this.ec.push(r),r}ac(){this.tc&&Ao(47125,{hc:Hp(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do{e=this._c,await e}while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Hp(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Wp extends Lp{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new zp,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zp(e),this._firestoreClient=void 0,await e}}}function Xp(e){if(e._terminated)throw new Po(ko.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Kp(e),e._firestoreClient}function Kp(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new _l(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ip(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new _p(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class qp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qp(hl.fromBase64String(e))}catch(e){throw new Po(ko.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new qp(hl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qp._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(oa(e,qp._jsonSchema))return qp.fromBase64String(e.bytes)}}qp._jsonSchemaVersion="firestore/bytes/1.0",qp._jsonSchema={type:sa("string",qp._jsonSchemaVersion),bytes:sa("string")};class Gp{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Po(ko.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jo(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qp{constructor(e){this._methodName=e}}class Yp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Po(ko.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Po(ko.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return zo(this._lat,e._lat)||zo(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yp._jsonSchemaVersion}}static fromJSON(e){if(oa(e,Yp._jsonSchema))return new Yp(e.latitude,e.longitude)}}Yp._jsonSchemaVersion="firestore/geoPoint/1.0",Yp._jsonSchema={type:sa("string",Yp._jsonSchemaVersion),latitude:sa("number"),longitude:sa("number")};class Jp{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Jp._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(oa(e,Jp._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Jp(e.vectorValues);throw new Po(ko.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jp._jsonSchemaVersion="firestore/vectorValue/1.0",Jp._jsonSchema={type:sa("string",Jp._jsonSchemaVersion),vectorValues:sa("object")};const Zp=/^__.*__$/;class $p{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Su(e,this.data,this.fieldMask,t,this.fieldTransforms):new Au(e,this.data,t,this.fieldTransforms)}}function eg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ao(40011,{Ec:e})}}class tg{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new tg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.fc(e),r}gc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return fg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(eg(this.Ec)&&Zp.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class ng{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Uf(e)}Dc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new tg({Ec:e,methodName:t,bc:n,path:Jo.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rg(e){const t=e._freezeSettings(),n=Uf(e._databaseId);return new ng(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ig(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Dc(s.merge||s.mergeFields?2:0,t,n,i);lg("Data must be an object, but it was:",o,r);const a=og(r,o);let l,c;if(s.merge)l=new cl(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=cg(t,r,n);if(!o.contains(i))throw new Po(ko.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);dg(e,i)||e.push(i)}l=new cl(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new $p(new Gl(a),l,c)}function sg(e,t){if(ag(e=$e(e)))return lg("Unsupported field value:",t,e),og(e,t);if(e instanceof Qp)return function(e,t){if(!eg(t.Ec))throw t.wc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.wc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&4!==t.Ec)throw t.wc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=sg(i,t.yc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=$e(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return nu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ca.fromDate(e);return{timestampValue:sh(t.serializer,n)}}if(e instanceof ca){const n=new ca(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:sh(t.serializer,n)}}if(e instanceof Yp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof qp)return{bytesValue:oh(t.serializer,e._byteString)};if(e instanceof Fp){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.wc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ch(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Jp)return function(e,t){return{mapValue:{fields:{[Tl]:{stringValue:Pl},[Ol]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.wc("VectorValues must only contain numeric values.");return eu(t.serializer,e)})}}}}}}(e,t);throw t.wc(`Unsupported field value: ${ra(e)}`)}(e,t)}function og(e,t){const n={};return rl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):nl(e,(e,r)=>{const i=sg(r,t.Vc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function ag(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ca||e instanceof Yp||e instanceof qp||e instanceof Fp||e instanceof Qp||e instanceof Jp)}function lg(e,t,n){if(!ag(n)||!na(n)){const r=ra(n);throw"an object"===r?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function cg(e,t,n){if((t=$e(t))instanceof Gp)return t._internalPath;if("string"==typeof t)return hg(e,t);throw fg("Field path arguments must be of type string or ",e,!1,void 0,n)}const ug=new RegExp("[~\\*/\\[\\]]");function hg(e,t,n){if(t.search(ug)>=0)throw fg(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Gp(...t.split("."))._internalPath}catch(Bm){throw fg(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function fg(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Po(ko.INVALID_ARGUMENT,a+e+l)}function dg(e,t){return e.some(e=>e.isEqual(t))}class pg{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Fp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new gg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class gg extends pg{data(){return super.data()}}function mg(e,t){return"string"==typeof t?hg(e,t):t instanceof Gp?t._internalPath:t._delegate._internalPath}function vg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Po(ko.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yg{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Il(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ao(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return nl(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Ol].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>pl(e.doubleValue));return new Jp(i)}convertGeoPoint(e){return new Yp(pl(e.latitude),pl(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=xl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Cl(e));default:return null}}convertTimestamp(e){const t=dl(e);return new ca(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Qo.fromString(e);To(Ih(n),9688,{name:e});const r=new Sl(n.get(1),n.get(3)),i=new Zo(n.popFirst(5));return r.isEqual(t)||xo(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function bg(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class wg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xg extends pg{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Cg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(mg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Po(ko.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=xg._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}xg._jsonSchemaVersion="firestore/documentSnapshot/1.0",xg._jsonSchema={type:sa("string",xg._jsonSchemaVersion),bundleSource:sa("string","DocumentSnapshot"),bundleName:sa("string"),bundle:sa("string")};class Cg extends xg{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class _g{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new wg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Cg(this._firestore,this._userDataWriter,n.key,n,new wg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Po(ko.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Cg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new wg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Cg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new wg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Ag(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Po(ko.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_g._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vo.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ag(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ao(61501,{type:e})}}_g._jsonSchemaVersion="firestore/querySnapshot/1.0",_g._jsonSchema={type:sa("string",_g._jsonSchemaVersion),bundleSource:sa("string","QuerySnapshot"),bundleName:sa("string"),bundle:sa("string")};class Sg extends yg{constructor(e){super(),this.firestore=e}convertBytes(e){return new qp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fp(this.firestore,null,t)}}function Tg(e,t){return function(e,t){const n=new Oo;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=vp(e);try{const e=await function(e,t){const n=Eo(e),r=ca.now(),i=t.reduce((e,t)=>e.add(t.key),Jc());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=zc(),l=Jc();return n.Os.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=Cu(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Su(e.key,t,Ql(t.value.mapValue),mu.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:Xc(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ru[e.currentUser.toKey()];r||(r=new il(zo)),r=r.insert(t,n),e.Ru[e.currentUser.toKey()]=r}(r,e.batchId,n),await dp(r,e.changes),await dd(r.remoteStore)}catch(e){const t=Ed(e,"Failed to persist write");n.reject(t)}}(await kp(e),t,n)),n.promise}(Xp(e),t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){vo=e}(gn),un(new et("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Wp(new No(e.getProvider("auth-internal")),new Fo(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Po(ko.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sl(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),yn(po,go,e),yn(po,go,"esm2017")}();const Eg="firebasestorage.googleapis.com",kg="storageBucket";class Pg extends He{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Dg(e),`Firebase Storage: ${t} (${Dg(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pg.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Dg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Og,Ig;function Dg(e){return"storage/"+e}function Rg(){return new Pg(Og.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Ng(){return new Pg(Og.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jg(){return new Pg(Og.CANCELED,"User canceled the upload/download.")}function Lg(e){return new Pg(Og.INVALID_ARGUMENT,e)}function Mg(){return new Pg(Og.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Og||(Og={}));class Fg{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Fg.makeFromUrl(e,t)}catch(tx){return new Fg(e,"")}if(""===n.path)return n;throw r=e,new Pg(Og.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===Eg?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Fg(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Pg(Og.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Bg{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Ug(e,t,n,r){if(r<t)throw Lg(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Lg(`Invalid value for '${e}'. Expected ${n} or less.`)}function Vg(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function zg(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Ig||(Ig={}));class Hg{constructor(e,t,n,r,i,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],f=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.isUsingEmulator=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Wg(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Ig.NO_ERROR,i=n.getStatus();if(!t||zg(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Ig.ABORT;return void e(!1,new Wg(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Wg(s,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(tx){r(tx)}else if(null!==i){const e=Rg();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Mg():jg())}else{r(Ng())}};this.canceled_?t(0,new Wg(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout(()=>{i=null,e(d,l())},t)}function f(){s&&clearTimeout(s)}function d(e){if(c)return void f();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return f(),void u.call(null,e,...n);if(l()||o)return f(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function g(e){p||(p=!0,f(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Wg{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Xg(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class Kg{constructor(e,t){this._service=e,this._location=t instanceof Fg?t:Fg.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Kg(e,t)}get root(){const e=new Fg(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Xg(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Fg(this._location.bucket,e);return new Kg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Pg(Og.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function qg(e,t){const n=null===t||void 0===t?void 0:t[kg];return null==n?null:Fg.makeFromBucketSpec(n,e)}class Gg{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=s,this._bucket=null,this._host=Eg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Fg.makeFromBucketSpec(r,this._host):qg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Fg.makeFromBucketSpec(this._url,e):this._bucket=qg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ug("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ug("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Kg(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Bg(Mg());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=Vg(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Hg(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o,a)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Qg="@firebase/storage",Yg="0.13.14",Jg="storage";function Zg(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Gg(r,i,s,n,gn)}un(new et(Jg,Zg,"PUBLIC").setMultipleInstances(!0)),yn(Qg,Yg,""),yn(Qg,Yg,"esm2017");const $g=mn({apiKey:"AIzaSyBzdhbvbukDyEEso893c7L95BTZ5jFC13I",authDomain:"plantasapp.firebaseapp.com",projectId:"plantasapp",storageBucket:"plantasapp.firebasestorage.app",messagingSenderId:"67287939165",appId:"1:67287939165:web:8bdeb8a3acd5d18144b5b4",measurementId:"G-WKCSY96CXL"}),em=function(e,t){const n="object"==typeof e?e:vn(),r="string"==typeof e?e:t||Al,i=hn(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=Pe("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;e=ia(e,Lp);const s=Re(t),o=e._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${n}`;s&&(Ne(`https://${l}`),Fe("Firestore",!0)),o.host!==Rp&&o.host!==l&&Co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!Ke(c,a)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=mo.MOCK_USER;else{t=je(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Po(ko.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new mo(s)}e._authCredentials=new Ro(new Io(t,n))}}(i,...e)}return i}($g),tm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn();const t=hn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=hn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Ke(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;jn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ks,persistence:[ns,Li,Vi]}),r=Ie("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ys)return;const r=null===t||void 0===t?void 0:t.token;Js!==r&&(Js=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){$e(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){$e(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=ke("auth");return s&&ni(n,`http://${s}`),n}($g);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn(),t=arguments.length>1?arguments[1]:void 0;e=$e(e);const n=hn(e,Jg).getImmediate({identifier:t}),r=Pe("storage");r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`;const i=Re(t);i&&(Ne(`https://${e.host}/b`),Fe("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:je(s,e.app.options.projectId))}(e,t,n,r)}(n,...r)}($g);var nm=n(579);function rm(){const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[s,o]=(0,t.useState)(""),a=ee();return(0,nm.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"#f4f4f4",fontFamily:"Arial, sans-serif"},children:(0,nm.jsxs)("div",{style:{backgroundColor:"#fff",padding:"30px",borderRadius:"8px",boxShadow:"0 4px 10px rgba(0,0,0,0.1)",width:"100%",maxWidth:"400px",textAlign:"center"},children:[(0,nm.jsx)("h2",{children:"Acessar Editor de Plantas"}),s&&(0,nm.jsx)("p",{style:{color:"red",marginBottom:"15px"},children:s}),(0,nm.jsxs)("form",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[(0,nm.jsx)("input",{type:"email",placeholder:"E-mail",value:e,onChange:e=>n(e.target.value),style:{padding:"10px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"},required:!0}),(0,nm.jsx)("input",{type:"password",placeholder:"Senha",value:r,onChange:e=>i(e.target.value),style:{padding:"10px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"},required:!0}),(0,nm.jsx)("button",{type:"button",onClick:async t=>{t.preventDefault(),o("");try{await function(e,t,n){return fn(e.app)?Promise.reject(Fn(e)):Oi($e(e),gi.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ii(e),t})}(tm,e,r),a("/editor")}catch(n){o("Erro ao fazer login: "+n.message),console.error("Erro de Login:",n)}},style:{padding:"10px 15px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",fontWeight:"bold"},children:"Entrar"}),(0,nm.jsx)("button",{type:"button",onClick:async t=>{t.preventDefault(),o("");try{await async function(e,t,n){if(fn(e.app))return Promise.reject(Fn(e));const r=Wr(e),i=ei(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ci,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ii(e),t}),o=await _i._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(tm,e,r),a("/editor")}catch(n){o("Erro ao registrar: "+n.message),console.error("Erro de Registro:",n)}},style:{padding:"10px 15px",backgroundColor:"#008CBA",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",fontWeight:"bold"},children:"Registrar"})]})]})})}const im=n.p+"static/media/porta.b4e44fe5272ce7944aaa.png",sm=n.p+"static/media/bed.732f07062ddb97f1f5c6.png",om=n.p+"static/media/mesa_jantar.971894e6486069efc999.png",am=n.p+"static/media/pia.9dda696118496a91c40c.png",lm=n.p+"static/media/piscina.84f6f2979ea398d37ace.png",cm={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M135.2 17.7C140.6 6.8 151.7 0 163.8 0L284.2 0c12.1 0 23.2 6.8 28.6 17.7L320 32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l96 0 7.2-14.3zM32 128l384 0 0 320c0 35.3-28.7 64-64 64L96 512c-35.3 0-64-28.7-64-64l0-320zm96 64c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16z"]},um=cm,hm={prefix:"fas",iconName:"file-lines",icon:[384,512,[128441,128462,61686,"file-alt","file-text"],"f15c","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM112 256l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},fm=hm,dm={prefix:"fas",iconName:"door-open",icon:[576,512,[],"f52b","M320 32c0-9.9-4.5-19.2-12.3-25.2S289.8-1.4 280.2 1l-179.9 45C79 51.3 64 70.5 64 92.5L64 448l-32 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 192 0 32 0 0-32 0-448zM256 256c0 17.7-10.7 32-24 32s-24-14.3-24-32s10.7-32 24-32s24 14.3 24 32zm96-128l96 0 0 352c0 17.7 14.3 32 32 32l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-32 0 0-320c0-35.3-28.7-64-64-64l-96 0 0 64z"]},pm={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},gm=pm,mm={prefix:"fas",iconName:"sink",icon:[512,512,[],"e06d","M288 96c0-17.7 14.3-32 32-32s32 14.3 32 32s14.3 32 32 32s32-14.3 32-32c0-53-43-96-96-96s-96 43-96 96l0 192-64 0 0-24c0-30.9-25.1-56-56-56l-48 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l48 0c4.4 0 8 3.6 8 8l0 24-80 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l224 0 224 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-80 0 0-24c0-4.4 3.6-8 8-8l56 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-56 0c-30.9 0-56 25.1-56 56l0 24-64 0 0-192zM480 416l0-32L32 384l0 32c0 53 43 96 96 96l256 0c53 0 96-43 96-96z"]},vm={prefix:"fas",iconName:"chevron-up",icon:[512,512,[],"f077","M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"]},ym={prefix:"fas",iconName:"folder-open",icon:[576,512,[128194,128449,61717],"f07c","M88.7 223.8L0 375.8 0 96C0 60.7 28.7 32 64 32l117.5 0c17 0 33.3 6.7 45.3 18.7l26.5 26.5c12 12 28.3 18.7 45.3 18.7L416 96c35.3 0 64 28.7 64 64l0 32-336 0c-22.8 0-43.8 12.1-55.3 31.8zm27.6 16.1C122.1 230 132.6 224 144 224l400 0c11.5 0 22 6.1 27.7 16.1s5.7 22.2-.1 32.1l-112 192C453.9 474 443.4 480 432 480L32 480c-11.5 0-22-6.1-27.7-16.1s-5.7-22.2 .1-32.1l112-192z"]},bm={prefix:"fas",iconName:"bath",icon:[512,512,[128705,"bathtub"],"f2cd","M96 77.3c0-7.3 5.9-13.3 13.3-13.3c3.5 0 6.9 1.4 9.4 3.9l14.9 14.9C130 91.8 128 101.7 128 112c0 19.9 7.2 38 19.2 52c-5.3 9.2-4 21.1 3.8 29c9.4 9.4 24.6 9.4 33.9 0L289 89c9.4-9.4 9.4-24.6 0-33.9c-7.9-7.9-19.8-9.1-29-3.8C246 39.2 227.9 32 208 32c-10.3 0-20.2 2-29.2 5.5L163.9 22.6C149.4 8.1 129.7 0 109.3 0C66.6 0 32 34.6 32 77.3L32 256c-17.7 0-32 14.3-32 32s14.3 32 32 32l448 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 256 96 77.3zM32 352l0 16c0 28.4 12.4 54 32 71.6L64 480c0 17.7 14.3 32 32 32s32-14.3 32-32l0-16 256 0 0 16c0 17.7 14.3 32 32 32s32-14.3 32-32l0-40.4c19.6-17.6 32-43.1 32-71.6l0-16L32 352z"]},wm={prefix:"fas",iconName:"hands-bubbles",icon:[576,512,["hands-wash"],"e05e","M416 64a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm96 128a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM160 464a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM32 160l.1 72.6c.1 52.2 24 101 64 133.1c-.1-1.9-.1-3.8-.1-5.7l0-8c0-71.8 37-138.6 97.9-176.7l60.2-37.6c8.6-5.4 17.9-8.4 27.3-9.4l45.9-79.5c6.6-11.5 2.7-26.2-8.8-32.8s-26.2-2.7-32.8 8.8l-78 135.1c-3.3 5.7-10.7 7.7-16.4 4.4s-7.7-10.7-4.4-16.4l62-107.4c6.6-11.5 2.7-26.2-8.8-32.8S214 5 207.4 16.5l-68 117.8s0 0 0 0s0 0 0 0l-43.3 75L96 160c0-17.7-14.4-32-32-32s-32 14.4-32 32zM332.1 88.5L307.5 131c13.9 4.5 26.4 13.7 34.7 27c.9 1.5 1.8 2.9 2.5 4.4l28.9-50c6.6-11.5 2.7-26.2-8.8-32.8s-26.2-2.7-32.8 8.8zm46.4 63.7l-26.8 46.4c-.6 6-2.1 11.8-4.3 17.4l4.7 0 13.3 0s0 0 0 0l31.8 0 23-39.8c6.6-11.5 2.7-26.2-8.8-32.8s-26.2-2.7-32.8 8.8zM315.1 175c-9.4-15-29.1-19.5-44.1-10.2l-60.2 37.6C159.3 234.7 128 291.2 128 352l0 8c0 8.9 .8 17.6 2.2 26.1c35.4 8.2 61.8 40 61.8 77.9c0 6.3-.7 12.5-2.1 18.4C215.1 501 246.3 512 280 512l176 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-92 0c-6.6 0-12-5.4-12-12s5.4-12 12-12l124 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-124 0c-6.6 0-12-5.4-12-12s5.4-12 12-12l156 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-156 0c-6.6 0-12-5.4-12-12s5.4-12 12-12l124 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-136 0s0 0 0 0s0 0 0 0l-93.2 0L305 219.1c15-9.4 19.5-29.1 10.2-44.1z"]},xm=wm,Cm={prefix:"fas",iconName:"image",icon:[512,512,[],"f03e","M0 96C0 60.7 28.7 32 64 32l384 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM323.8 202.5c-4.5-6.6-11.9-10.5-19.8-10.5s-15.4 3.9-19.8 10.5l-87 127.6L170.7 297c-4.6-5.7-11.5-9-18.7-9s-14.2 3.3-18.7 9l-64 80c-5.8 7.2-6.9 17.1-2.9 25.4s12.4 13.6 21.6 13.6l96 0 32 0 208 0c8.9 0 17.1-4.9 21.2-12.8s3.6-17.4-1.4-24.7l-120-176zM112 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"]},_m={prefix:"fas",iconName:"chair",icon:[448,512,[129681],"f6c0","M248 48l0 208 48 0 0-197.3c23.9 13.8 40 39.7 40 69.3l0 128 48 0 0-128C384 57.3 326.7 0 256 0L192 0C121.3 0 64 57.3 64 128l0 128 48 0 0-128c0-29.6 16.1-55.5 40-69.3L152 256l48 0 0-208 48 0zM48 288c-12.1 0-23.2 6.8-28.6 17.7l-16 32c-5 9.9-4.4 21.7 1.4 31.1S20.9 384 32 384l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96 256 0 0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c11.1 0 21.4-5.7 27.2-15.2s6.4-21.2 1.4-31.1l-16-32C423.2 294.8 412.1 288 400 288L48 288z"]},Am={prefix:"fas",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M0 96C0 60.7 28.7 32 64 32H384c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96z"]},Sm={prefix:"fas",iconName:"couch",icon:[640,512,[],"f4b8","M64 160C64 89.3 121.3 32 192 32l256 0c70.7 0 128 57.3 128 128l0 33.6c-36.5 7.4-64 39.7-64 78.4l0 48-384 0 0-48c0-38.7-27.5-71-64-78.4L64 160zM544 272c0-20.9 13.4-38.7 32-45.3c5-1.8 10.4-2.7 16-2.7c26.5 0 48 21.5 48 48l0 176c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32L96 448c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32L0 272c0-26.5 21.5-48 48-48c5.6 0 11 1 16 2.7c18.6 6.6 32 24.4 32 45.3l0 48 0 32 32 0 384 0 32 0 0-32 0-48z"]},Tm={prefix:"fas",iconName:"circle",icon:[512,512,[128308,128309,128992,128993,128994,128995,128996,9679,9898,9899,11044,61708,61915],"f111","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"]},Em={prefix:"fas",iconName:"window-maximize",icon:[512,512,[128470],"f2d0","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM96 96l320 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L96 160c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},km={prefix:"fas",iconName:"floppy-disk",icon:[448,512,[128190,128426,"save"],"f0c7","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-242.7c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32L64 32zm0 96c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32L96 224c-17.7 0-32-14.3-32-32l0-64zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},Pm=km,Om={prefix:"fas",iconName:"water",icon:[576,512,[],"f773","M269.5 69.9c11.1-7.9 25.9-7.9 37 0C329 85.4 356.5 96 384 96c26.9 0 55.4-10.8 77.4-26.1c0 0 0 0 0 0c11.9-8.5 28.1-7.8 39.2 1.7c14.4 11.9 32.5 21 50.6 25.2c17.2 4 27.9 21.2 23.9 38.4s-21.2 27.9-38.4 23.9c-24.5-5.7-44.9-16.5-58.2-25C449.5 149.7 417 160 384 160c-31.9 0-60.6-9.9-80.4-18.9c-5.8-2.7-11.1-5.3-15.6-7.7c-4.5 2.4-9.7 5.1-15.6 7.7c-19.8 9-48.5 18.9-80.4 18.9c-33 0-65.5-10.3-94.5-25.8c-13.4 8.4-33.7 19.3-58.2 25c-17.2 4-34.4-6.7-38.4-23.9s6.7-34.4 23.9-38.4C42.8 92.6 61 83.5 75.3 71.6c11.1-9.5 27.3-10.1 39.2-1.7c0 0 0 0 0 0C136.7 85.2 165.1 96 192 96c27.5 0 55-10.6 77.5-26.1zm37 288C329 373.4 356.5 384 384 384c26.9 0 55.4-10.8 77.4-26.1c0 0 0 0 0 0c11.9-8.5 28.1-7.8 39.2 1.7c14.4 11.9 32.5 21 50.6 25.2c17.2 4 27.9 21.2 23.9 38.4s-21.2 27.9-38.4 23.9c-24.5-5.7-44.9-16.5-58.2-25C449.5 437.7 417 448 384 448c-31.9 0-60.6-9.9-80.4-18.9c-5.8-2.7-11.1-5.3-15.6-7.7c-4.5 2.4-9.7 5.1-15.6 7.7c-19.8 9-48.5 18.9-80.4 18.9c-33 0-65.5-10.3-94.5-25.8c-13.4 8.4-33.7 19.3-58.2 25c-17.2 4-34.4-6.7-38.4-23.9s6.7-34.4 23.9-38.4c18.1-4.2 36.2-13.3 50.6-25.2c11.1-9.4 27.3-10.1 39.2-1.7c0 0 0 0 0 0C136.7 373.2 165.1 384 192 384c27.5 0 55-10.6 77.5-26.1c11.1-7.9 25.9-7.9 37 0zm0-144C329 229.4 356.5 240 384 240c26.9 0 55.4-10.8 77.4-26.1c0 0 0 0 0 0c11.9-8.5 28.1-7.8 39.2 1.7c14.4 11.9 32.5 21 50.6 25.2c17.2 4 27.9 21.2 23.9 38.4s-21.2 27.9-38.4 23.9c-24.5-5.7-44.9-16.5-58.2-25C449.5 293.7 417 304 384 304c-31.9 0-60.6-9.9-80.4-18.9c-5.8-2.7-11.1-5.3-15.6-7.7c-4.5 2.4-9.7 5.1-15.6 7.7c-19.8 9-48.5 18.9-80.4 18.9c-33 0-65.5-10.3-94.5-25.8c-13.4 8.4-33.7 19.3-58.2 25c-17.2 4-34.4-6.7-38.4-23.9s6.7-34.4 23.9-38.4c18.1-4.2 36.2-13.3 50.6-25.2c11.1-9.5 27.3-10.1 39.2-1.7c0 0 0 0 0 0C136.7 229.2 165.1 240 192 240c27.5 0 55-10.6 77.5-26.1c11.1-7.9 25.9-7.9 37 0z"]},Im={prefix:"fas",iconName:"calculator",icon:[384,512,[128425],"f1ec","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zM96 64l192 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L96 160c-17.7 0-32-14.3-32-32l0-32c0-17.7 14.3-32 32-32zm32 160a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM96 352a32 32 0 1 1 0-64 32 32 0 1 1 0 64zM64 416c0-17.7 14.3-32 32-32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-96 0c-17.7 0-32-14.3-32-32zM192 256a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zm64-64a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM288 448a32 32 0 1 1 0-64 32 32 0 1 1 0 64z"]},Dm={prefix:"fas",iconName:"toilet",icon:[448,512,[128701],"f7d8","M24 0C10.7 0 0 10.7 0 24S10.7 48 24 48l8 0 0 148.9c-1.9 1.4-3.8 2.9-5.6 4.4C10.9 214.5 0 232.9 0 256c0 46.9 14.3 84.1 37 112.5c14.2 17.7 31.1 31.3 48.5 41.8L65.6 469.9c-3.3 9.8-1.6 20.5 4.4 28.8s15.7 13.3 26 13.3l256 0c10.3 0 19.9-4.9 26-13.3s7.7-19.1 4.4-28.8l-19.8-59.5c17.4-10.5 34.3-24.1 48.5-41.8c22.7-28.4 37-65.5 37-112.5c0-23.1-10.9-41.5-26.4-54.6c-1.8-1.5-3.7-3-5.6-4.4L416 48l8 0c13.3 0 24-10.7 24-24s-10.7-24-24-24L24 0zM384 256.3c0 1-.3 2.6-3.8 5.6c-4.8 4.1-14 9-29.3 13.4C320.5 284 276.1 288 224 288s-96.5-4-126.9-12.8c-15.3-4.4-24.5-9.3-29.3-13.4c-3.5-3-3.8-4.6-3.8-5.6l0-.3c0 0 0-.1 0-.1c0-1 0-2.5 3.8-5.8c4.8-4.1 14-9 29.3-13.4C127.5 228 171.9 224 224 224s96.5 4 126.9 12.8c15.3 4.4 24.5 9.3 29.3 13.4c3.8 3.2 3.8 4.8 3.8 5.8c0 0 0 .1 0 .1l0 .3zM328.2 384l-.2 .5 0-.5 .2 0zM112 64l32 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},Rm={prefix:"fas",iconName:"bed",icon:[640,512,[128716],"f236","M32 32c17.7 0 32 14.3 32 32l0 256 224 0 0-160c0-17.7 14.3-32 32-32l224 0c53 0 96 43 96 96l0 224c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-32-224 0-32 0L64 416l0 32c0 17.7-14.3 32-32 32s-32-14.3-32-32L0 64C0 46.3 14.3 32 32 32zm144 96a80 80 0 1 1 0 160 80 80 0 1 1 0-160z"]},Nm={prefix:"fas",iconName:"font",icon:[448,512,[],"f031","M254 52.8C249.3 40.3 237.3 32 224 32s-25.3 8.3-30 20.8L57.8 416 32 416c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-1.8 0 18-48 159.6 0 18 48-1.8 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-25.8 0L254 52.8zM279.8 304l-111.6 0L224 155.1 279.8 304z"]},jm={prefix:"fas",iconName:"chevron-down",icon:[512,512,[],"f078","M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"]},Lm={prefix:"fas",iconName:"file-export",icon:[576,512,["arrow-right-from-file"],"f56e","M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 128-168 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l168 0 0 112c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zM384 336l0-48 110.1 0-39-39c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l80 80c9.4 9.4 9.4 24.6 0 33.9l-80 80c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l39-39L384 336zm0-208l-128 0L256 0 384 128z"]},Mm={prefix:"fas",iconName:"draw-polygon",icon:[448,512,[],"f5ee","M96 151.4l0 209.1c9.7 5.6 17.8 13.7 23.4 23.4l209.1 0c0-.1 .1-.2 .1-.3l-4.5-7.9-32-56s0 0 0 0c-1.4 .1-2.8 .1-4.2 .1c-35.3 0-64-28.7-64-64s28.7-64 64-64c1.4 0 2.8 0 4.2 .1c0 0 0 0 0 0l32-56 4.5-7.9-.1-.3-209.1 0c-5.6 9.7-13.7 17.8-23.4 23.4zM384.3 352c35.2 .2 63.7 28.7 63.7 64c0 35.3-28.7 64-64 64c-23.7 0-44.4-12.9-55.4-32l-209.1 0c-11.1 19.1-31.7 32-55.4 32c-35.3 0-64-28.7-64-64c0-23.7 12.9-44.4 32-55.4l0-209.1C12.9 140.4 0 119.7 0 96C0 60.7 28.7 32 64 32c23.7 0 44.4 12.9 55.4 32l209.1 0c11.1-19.1 31.7-32 55.4-32c35.3 0 64 28.7 64 64c0 35.3-28.5 63.8-63.7 64l-4.5 7.9-32 56-2.3 4c4.2 8.5 6.5 18 6.5 28.1s-2.3 19.6-6.5 28.1l2.3 4 32 56 4.5 7.9z"]};var Fm=n(661);function Bm(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Bm(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const Um=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Bm(e))&&(r&&(r+=" "),r+=t);return r},Vm=e=>"number"==typeof e&&!isNaN(e),zm=e=>"string"==typeof e,Hm=e=>"function"==typeof e,Wm=e=>zm(e)||Hm(e)?e:null,Xm=e=>(0,t.isValidElement)(e)||zm(e)||Hm(e)||Vm(e);function Km(e){let{enter:n,exit:r,appendPosition:i=!1,collapse:s=!0,collapseDuration:o=300}=e;return function(e){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:h,isIn:f,playToast:d}=e;const p=i?`${n}--${l}`:n,g=i?`${r}--${l}`:r,m=(0,t.useRef)(0);return(0,t.useLayoutEffect)(()=>{const e=h.current,t=p.split(" "),n=r=>{r.target===h.current&&(d(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===m.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)},[]),(0,t.useEffect)(()=>{const e=h.current,t=()=>{e.removeEventListener("animationend",t),s?function(e,t,n){void 0===n&&(n=300);const{scrollHeight:r,style:i}=e;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)})})}(e,u,o):u()};f||(c?t():(m.current=1,e.className+=` ${g}`,e.addEventListener("animationend",t)))},[f]),t.createElement(t.Fragment,null,a)}}function qm(e,t){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const Gm=new Map;let Qm=[];const Ym=new Set,Jm=e=>Ym.forEach(t=>t(e)),Zm=()=>Gm.size>0;function $m(e,t){var n;if(t)return!(null==(n=Gm.get(t))||!n.isToastActive(e));let r=!1;return Gm.forEach(t=>{t.isToastActive(e)&&(r=!0)}),r}function ev(e,t){Xm(e)&&(Zm()||Qm.push({content:e,options:t}),Gm.forEach(n=>{n.buildToast(e,t)}))}function tv(e,t){Gm.forEach(n=>{null!=t&&null!=t&&t.containerId?(null==t?void 0:t.containerId)===n.id&&n.toggle(e,null==t?void 0:t.id):n.toggle(e,null==t?void 0:t.id)})}function nv(e){const{subscribe:n,getSnapshot:r,setProps:i}=(0,t.useRef)(function(e){const n=e.containerId||1;return{subscribe(r){const i=function(e,n,r){let i=1,s=0,o=[],a=[],l=[],c=n;const u=new Map,h=new Set,f=()=>{l=Array.from(u.values()),h.forEach(e=>e())},d=e=>{a=null==e?[]:a.filter(t=>t!==e),f()},p=e=>{const{toastId:n,onOpen:i,updateId:s,children:o}=e.props,l=null==s;e.staleId&&u.delete(e.staleId),u.set(n,e),a=[...a,e.props.toastId].filter(t=>t!==e.staleId),f(),r(qm(e,l?"added":"updated")),l&&Hm(i)&&i((0,t.isValidElement)(o)&&o.props)};return{id:e,props:c,observe:e=>(h.add(e),()=>h.delete(e)),toggle:(e,t)=>{u.forEach(n=>{null!=t&&t!==n.props.toastId||Hm(n.toggle)&&n.toggle(e)})},removeToast:d,toasts:u,clearQueue:()=>{s-=o.length,o=[]},buildToast:(n,a)=>{if((t=>{let{containerId:n,toastId:r,updateId:i}=t;const s=n?n!==e:1!==e,o=u.has(r)&&null==i;return s||o})(a))return;const{toastId:l,updateId:h,data:g,staleId:m,delay:v}=a,y=()=>{d(l)},b=null==h;b&&s++;const w={...c,style:c.toastStyle,key:i++,...Object.fromEntries(Object.entries(a).filter(e=>{let[t,n]=e;return null!=n})),toastId:l,updateId:h,data:g,closeToast:y,isIn:!1,className:Wm(a.className||c.toastClassName),bodyClassName:Wm(a.bodyClassName||c.bodyClassName),progressClassName:Wm(a.progressClassName||c.progressClassName),autoClose:!a.isLoading&&(x=a.autoClose,C=c.autoClose,!1===x||Vm(x)&&x>0?x:C),deleteToast(){const e=u.get(l),{onClose:n,children:i}=e.props;Hm(n)&&n((0,t.isValidElement)(i)&&i.props),r(qm(e,"removed")),u.delete(l),s--,s<0&&(s=0),o.length>0?p(o.shift()):f()}};var x,C;w.closeButton=c.closeButton,!1===a.closeButton||Xm(a.closeButton)?w.closeButton=a.closeButton:!0===a.closeButton&&(w.closeButton=!Xm(c.closeButton)||c.closeButton);let _=n;(0,t.isValidElement)(n)&&!zm(n.type)?_=(0,t.cloneElement)(n,{closeToast:y,toastProps:w,data:g}):Hm(n)&&(_=n({closeToast:y,toastProps:w,data:g}));const A={content:_,props:w,staleId:m};c.limit&&c.limit>0&&s>c.limit&&b?o.push(A):Vm(v)?setTimeout(()=>{p(A)},v):p(A)},setProps(e){c=e},setToggle:(e,t)=>{u.get(e).toggle=t},isToastActive:e=>a.some(t=>t===e),getSnapshot:()=>c.newestOnTop?l.reverse():l}}(n,e,Jm);Gm.set(n,i);const s=i.observe(r);return Qm.forEach(e=>ev(e.content,e.options)),Qm=[],()=>{s(),Gm.delete(n)}},setProps(e){var t;null==(t=Gm.get(n))||t.setProps(e)},getSnapshot(){var e;return null==(e=Gm.get(n))?void 0:e.getSnapshot()}}}(e)).current;i(e);const s=(0,t.useSyncExternalStore)(n,r,r);return{getToastToRender:function(e){if(!s)return[];const t=new Map;return s.forEach(e=>{const{position:n}=e.props;t.has(n)||t.set(n,[]),t.get(n).push(e)}),Array.from(t,t=>e(t[0],t[1]))},isToastActive:$m,count:null==s?void 0:s.length}}function rv(e){const[n,r]=(0,t.useState)(!1),[i,s]=(0,t.useState)(!1),o=(0,t.useRef)(null),a=(0,t.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:u,onClick:h,closeOnClick:f}=e;var d,p;function g(){r(!0)}function m(){r(!1)}function v(t){const r=o.current;a.canDrag&&r&&(a.didMove=!0,n&&m(),a.delta="x"===e.draggableDirection?t.clientX-a.start:t.clientY-a.start,a.start!==t.clientX&&(a.canCloseOnClick=!1),r.style.transform=`translate3d(${"x"===e.draggableDirection?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`},0)`,r.style.opacity=""+(1-Math.abs(a.delta/a.removalDistance)))}function y(){document.removeEventListener("pointermove",v),document.removeEventListener("pointerup",y);const t=o.current;if(a.canDrag&&a.didMove&&t){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return s(!0),e.closeToast(),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}null==(p=Gm.get((d={id:e.toastId,containerId:e.containerId,fn:r}).containerId||1))||p.setToggle(d.id,d.fn),(0,t.useEffect)(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||m(),window.addEventListener("focus",g),window.addEventListener("blur",m),()=>{window.removeEventListener("focus",g),window.removeEventListener("blur",m)}},[e.pauseOnFocusLoss]);const b={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){a.didMove=!1,document.addEventListener("pointermove",v),document.addEventListener("pointerup",y);const n=o.current;a.canCloseOnClick=!0,a.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(a.start=t.clientX,a.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(a.start=t.clientY,a.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){const{top:n,bottom:r,left:i,right:s}=o.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=i&&t.clientX<=s&&t.clientY>=n&&t.clientY<=r?m():g()}};return l&&c&&(b.onMouseEnter=m,e.stacked||(b.onMouseLeave=g)),f&&(b.onClick=e=>{h&&h(e),a.canCloseOnClick&&u()}),{playToast:g,pauseToast:m,isRunning:n,preventExitTransition:i,toastRef:o,eventHandlers:b}}function iv(e){let{delay:n,isRunning:r,closeToast:i,type:s="default",hide:o,className:a,style:l,controlledProgress:c,progress:u,rtl:h,isIn:f,theme:d}=e;const p=o||c&&0===u,g={...l,animationDuration:`${n}ms`,animationPlayState:r?"running":"paused"};c&&(g.transform=`scaleX(${u})`);const m=Um("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":h}),v=Hm(a)?a({rtl:h,type:s,defaultClassName:m}):Um(m,a),y={[c&&u>=1?"onTransitionEnd":"onAnimationEnd"]:c&&u<1?null:()=>{f&&i()}};return t.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},t.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${s}`}),t.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:v,style:g,...y}))}let sv=1;const ov=()=>""+sv++;function av(e){return e&&(zm(e.toastId)||Vm(e.toastId))?e.toastId:ov()}function lv(e,t){return ev(e,t),t.toastId}function cv(e,t){return{...t,type:t&&t.type||e,toastId:av(t)}}function uv(e){return(t,n)=>lv(t,cv(e,n))}function hv(e,t){return lv(e,cv("default",t))}hv.loading=(e,t)=>lv(e,cv("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),hv.promise=function(e,t,n){let r,{pending:i,error:s,success:o}=t;i&&(r=zm(i)?hv.loading(i,n):hv.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,i)=>{if(null==t)return void hv.dismiss(r);const s={type:e,...a,...n,data:i},o=zm(t)?{render:t}:t;return r?hv.update(r,{...s,...o}):hv(o.render,{...s,...o}),i},c=Hm(e)?e():e;return c.then(e=>l("success",o,e)).catch(e=>l("error",s,e)),c},hv.success=uv("success"),hv.info=uv("info"),hv.error=uv("error"),hv.warning=uv("warning"),hv.warn=hv.warning,hv.dark=(e,t)=>lv(e,cv("default",{theme:"dark",...t})),hv.dismiss=function(e){!function(e){var t;if(Zm()){if(null==e||zm(t=e)||Vm(t))Gm.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const t=Gm.get(e.containerId);t?t.removeToast(e.id):Gm.forEach(t=>{t.removeToast(e.id)})}}else Qm=Qm.filter(t=>null!=e&&t.options.toastId!==e)}(e)},hv.clearWaitingQueue=function(e){void 0===e&&(e={}),Gm.forEach(t=>{!t.props.limit||e.containerId&&t.id!==e.containerId||t.clearQueue()})},hv.isActive=$m,hv.update=function(e,t){void 0===t&&(t={});const n=((e,t)=>{var n;let{containerId:r}=t;return null==(n=Gm.get(r||1))?void 0:n.toasts.get(e)})(e,t);if(n){const{props:r,content:i}=n,s={delay:100,...r,...t,toastId:t.toastId||e,updateId:ov()};s.toastId!==e&&(s.staleId=e);const o=s.render||i;delete s.render,lv(o,s)}},hv.done=e=>{hv.update(e,{progress:1})},hv.onChange=function(e){return Ym.add(e),()=>{Ym.delete(e)}},hv.play=e=>tv(!0,e),hv.pause=e=>tv(!1,e);const fv="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,dv=e=>{let{theme:n,type:r,isLoading:i,...s}=e;return t.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===n?"currentColor":`var(--toastify-icon-color-${r})`,...s})},pv={info:function(e){return t.createElement(dv,{...e},t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return t.createElement(dv,{...e},t.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return t.createElement(dv,{...e},t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return t.createElement(dv,{...e},t.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return t.createElement("div",{className:"Toastify__spinner"})}},gv=e=>{const{isRunning:n,preventExitTransition:r,toastRef:i,eventHandlers:s,playToast:o}=rv(e),{closeButton:a,children:l,autoClose:c,onClick:u,type:h,hideProgressBar:f,closeToast:d,transition:p,position:g,className:m,style:v,bodyClassName:y,bodyStyle:b,progressClassName:w,progressStyle:x,updateId:C,role:_,progress:A,rtl:S,toastId:T,deleteToast:E,isIn:k,isLoading:P,closeOnClick:O,theme:I}=e,D=Um("Toastify__toast",`Toastify__toast-theme--${I}`,`Toastify__toast--${h}`,{"Toastify__toast--rtl":S},{"Toastify__toast--close-on-click":O}),R=Hm(m)?m({rtl:S,position:g,type:h,defaultClassName:D}):Um(D,m),N=function(e){let{theme:n,type:r,isLoading:i,icon:s}=e,o=null;const a={theme:n,type:r};return!1===s||(Hm(s)?o=s({...a,isLoading:i}):(0,t.isValidElement)(s)?o=(0,t.cloneElement)(s,a):i?o=pv.spinner():(e=>e in pv)(r)&&(o=pv[r](a))),o}(e),j=!!A||!c,L={closeToast:d,type:h,theme:I};let M=null;return!1===a||(M=Hm(a)?a(L):(0,t.isValidElement)(a)?(0,t.cloneElement)(a,L):function(e){let{closeToast:n,theme:r,ariaLabel:i="close"}=e;return t.createElement("button",{className:`Toastify__close-button Toastify__close-button--${r}`,type:"button",onClick:e=>{e.stopPropagation(),n(e)},"aria-label":i},t.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},t.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(L)),t.createElement(p,{isIn:k,done:E,position:g,preventExitTransition:r,nodeRef:i,playToast:o},t.createElement("div",{id:T,onClick:u,"data-in":k,className:R,...s,style:v,ref:i},t.createElement("div",{...k&&{role:_},className:Hm(y)?y({type:h}):Um("Toastify__toast-body",y),style:b},null!=N&&t.createElement("div",{className:Um("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!P})},N),t.createElement("div",null,l)),M,t.createElement(iv,{...C&&!j?{key:`pb-${C}`}:{},rtl:S,theme:I,delay:c,isRunning:n,isIn:k,closeToast:d,hide:f,type:h,style:x,className:w,controlledProgress:j,progress:A||0})))},mv=function(e,t){return void 0===t&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},vv=Km(mv("bounce",!0)),yv=(Km(mv("slide",!0)),Km(mv("zoom")),Km(mv("flip")),{position:"top-right",transition:vv,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"});function bv(e){let n={...yv,...e};const r=e.stacked,[i,s]=(0,t.useState)(!0),o=(0,t.useRef)(null),{getToastToRender:a,isToastActive:l,count:c}=nv(n),{className:u,style:h,rtl:f,containerId:d}=n;function p(e){const t=Um("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":f});return Hm(u)?u({position:e,rtl:f,defaultClassName:t}):Um(t,Wm(u))}function g(){r&&(s(!0),hv.play())}return fv(()=>{if(r){var e;const t=o.current.querySelectorAll('[data-in="true"]'),r=12,s=null==(e=n.position)?void 0:e.includes("top");let a=0,l=0;Array.from(t).reverse().forEach((e,t)=>{const n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed=`${i}`),n.dataset.pos||(n.dataset.pos=s?"top":"bot");const o=a*(i?.2:1)+(i?0:r*t);n.style.setProperty("--y",`${s?o:-1*o}px`),n.style.setProperty("--g",`${r}`),n.style.setProperty("--s",""+(1-(i?l:0))),a+=n.offsetHeight,l+=.025})}},[i,c,r]),t.createElement("div",{ref:o,className:"Toastify",id:d,onMouseEnter:()=>{r&&(s(!1),hv.pause())},onMouseLeave:g},a((e,n)=>{const i=n.length?{...h}:{...h,pointerEvents:"none"};return t.createElement("div",{className:p(e),style:i,key:`container-${e}`},n.map(e=>{let{content:n,props:i}=e;return t.createElement(gv,{...i,stacked:r,collapseAll:g,isIn:l(i.toastId,i.containerId),style:i.style,key:`toast-${i.key}`},n)}))}))}function wv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wv(Object(n),!0).forEach(function(t){Av(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Cv(e){return Cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cv(e)}function _v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Av(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(l){a=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}(e,t)||Ev(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tv(e){return function(e){if(Array.isArray(e))return kv(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ev(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ev(e,t){if(e){if("string"===typeof e)return kv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kv(e,t):void 0}}function kv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pv=function(){},Ov={},Iv={},Dv=null,Rv={mark:Pv,measure:Pv};try{"undefined"!==typeof window&&(Ov=window),"undefined"!==typeof document&&(Iv=document),"undefined"!==typeof MutationObserver&&(Dv=MutationObserver),"undefined"!==typeof performance&&(Rv=performance)}catch(tx){}var Nv,jv,Lv,Mv,Fv,Bv=(Ov.navigator||{}).userAgent,Uv=void 0===Bv?"":Bv,Vv=Ov,zv=Iv,Hv=Dv,Wv=Rv,Xv=(Vv.document,!!zv.documentElement&&!!zv.head&&"function"===typeof zv.addEventListener&&"function"===typeof zv.createElement),Kv=~Uv.indexOf("MSIE")||~Uv.indexOf("Trident/"),qv="___FONT_AWESOME___",Gv="svg-inline--fa",Qv="data-fa-i2svg",Yv="data-fa-pseudo-element",Jv="data-prefix",Zv="data-icon",$v="fontawesome-i2svg",ey=["HTML","HEAD","STYLE","SCRIPT"],ty=function(){try{return!0}catch(tx){return!1}}(),ny="classic",ry="sharp",iy=[ny,ry];function sy(e){return new Proxy(e,{get:function(e,t){return t in e?e[t]:e[ny]}})}var oy=sy((Av(Nv={},ny,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),Av(Nv,ry,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),Nv)),ay=sy((Av(jv={},ny,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Av(jv,ry,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),jv)),ly=sy((Av(Lv={},ny,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Av(Lv,ry,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),Lv)),cy=sy((Av(Mv={},ny,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Av(Mv,ry,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),Mv)),uy=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,hy="fa-layers-text",fy=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,dy=sy((Av(Fv={},ny,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Av(Fv,ry,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),Fv)),py=[1,2,3,4,5,6,7,8,9,10],gy=py.concat([11,12,13,14,15,16,17,18,19,20]),my=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],vy="duotone-group",yy="swap-opacity",by="primary",wy="secondary",xy=new Set;Object.keys(ay[ny]).map(xy.add.bind(xy)),Object.keys(ay[ry]).map(xy.add.bind(xy));var Cy=[].concat(iy,Tv(xy),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",vy,yy,by,wy]).concat(py.map(function(e){return"".concat(e,"x")})).concat(gy.map(function(e){return"w-".concat(e)})),_y=Vv.FontAwesomeConfig||{};if(zv&&"function"===typeof zv.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(e){var t=Sv(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=zv.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(_y[r]=i)})}var Ay={styleDefault:"solid",familyDefault:"classic",cssPrefix:"fa",replacementClass:Gv,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};_y.familyPrefix&&(_y.cssPrefix=_y.familyPrefix);var Sy=xv(xv({},Ay),_y);Sy.autoReplaceSvg||(Sy.observeMutations=!1);var Ty={};Object.keys(Ay).forEach(function(e){Object.defineProperty(Ty,e,{enumerable:!0,set:function(t){Sy[e]=t,Ey.forEach(function(e){return e(Ty)})},get:function(){return Sy[e]}})}),Object.defineProperty(Ty,"familyPrefix",{enumerable:!0,set:function(e){Sy.cssPrefix=e,Ey.forEach(function(e){return e(Ty)})},get:function(){return Sy.cssPrefix}}),Vv.FontAwesomeConfig=Ty;var Ey=[];var ky=16,Py={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Oy(){for(var e=12,t="";e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function Iy(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function Dy(e){return e.classList?Iy(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(e){return e})}function Ry(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ny(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")},"")}function jy(e){return e.size!==Py.size||e.x!==Py.x||e.y!==Py.y||e.rotate!==Py.rotate||e.flipX||e.flipY}function Ly(){var e="fa",t=Gv,n=Ty.cssPrefix,r=Ty.replacementClass,i=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, 0));\n          transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(n!==e||r!==t){var s=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var My=!1;function Fy(){Ty.autoAddCss&&!My&&(!function(e){if(e&&Xv){var t=zv.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=zv.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}zv.head.insertBefore(t,r)}}(Ly()),My=!0)}var By={mixout:function(){return{dom:{css:Ly,insertCss:Fy}}},hooks:function(){return{beforeDOMElementCreation:function(){Fy()},beforeI2svg:function(){Fy()}}}},Uy=Vv||{};Uy[qv]||(Uy[qv]={}),Uy[qv].styles||(Uy[qv].styles={}),Uy[qv].hooks||(Uy[qv].hooks={}),Uy[qv].shims||(Uy[qv].shims=[]);var Vy=Uy[qv],zy=[],Hy=!1;function Wy(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,s=void 0===i?[]:i;return"string"===typeof e?Ry(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,'="').concat(Ry(e[n]),'" ')},"").trim()}(r),">").concat(s.map(Wy).join(""),"</").concat(t,">")}function Xy(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}Xv&&((Hy=(zv.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(zv.readyState))||zv.addEventListener("DOMContentLoaded",function e(){zv.removeEventListener("DOMContentLoaded",e),Hy=1,zy.map(function(e){return e()})}));var Ky=function(e,t,n,r){var i,s,o,a=Object.keys(e),l=a.length,c=void 0!==r?function(e,t){return function(n,r,i,s){return e.call(t,n,r,i,s)}}(t,r):t;for(void 0===n?(i=1,o=e[a[0]]):(i=0,o=n);i<l;i++)o=c(o,e[s=a[i]],s,e);return o};function qy(e){var t=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=e.charCodeAt(n++);56320==(64512&s)?t.push(((1023&i)<<10)+(1023&s)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);return 1===t.length?t[0].toString(16):null}function Gy(e){return Object.keys(e).reduce(function(t,n){var r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t},{})}function Qy(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,i=Gy(t);"function"!==typeof Vy.hooks.addPack||r?Vy.styles[e]=xv(xv({},Vy.styles[e]||{}),i):Vy.hooks.addPack(e,Gy(t)),"fas"===e&&Qy("fa",t)}var Yy,Jy,Zy,$y=Vy.styles,eb=Vy.shims,tb=(Av(Yy={},ny,Object.values(ly[ny])),Av(Yy,ry,Object.values(ly[ry])),Yy),nb=null,rb={},ib={},sb={},ob={},ab={},lb=(Av(Jy={},ny,Object.keys(oy[ny])),Av(Jy,ry,Object.keys(oy[ry])),Jy);function cb(e,t){var n,r=t.split("-"),i=r[0],s=r.slice(1).join("-");return i!==e||""===s||(n=s,~Cy.indexOf(n))?null:s}var ub,hb=function(){var e=function(e){return Ky($y,function(t,n,r){return t[r]=Ky(n,e,{}),t},{})};rb=e(function(e,t,n){(t[3]&&(e[t[3]]=n),t[2])&&t[2].filter(function(e){return"number"===typeof e}).forEach(function(t){e[t.toString(16)]=n});return e}),ib=e(function(e,t,n){(e[n]=n,t[2])&&t[2].filter(function(e){return"string"===typeof e}).forEach(function(t){e[t]=n});return e}),ab=e(function(e,t,n){var r=t[2];return e[n]=n,r.forEach(function(t){e[t]=n}),e});var t="far"in $y||Ty.autoFetchSvg,n=Ky(eb,function(e,n){var r=n[0],i=n[1],s=n[2];return"far"!==i||t||(i="fas"),"string"===typeof r&&(e.names[r]={prefix:i,iconName:s}),"number"===typeof r&&(e.unicodes[r.toString(16)]={prefix:i,iconName:s}),e},{names:{},unicodes:{}});sb=n.names,ob=n.unicodes,nb=mb(Ty.styleDefault,{family:Ty.familyDefault})};function fb(e,t){return(rb[e]||{})[t]}function db(e,t){return(ab[e]||{})[t]}function pb(e){return sb[e]||{prefix:null,iconName:null}}function gb(){return nb}ub=function(e){nb=mb(e.styleDefault,{family:Ty.familyDefault})},Ey.push(ub),hb();function mb(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,n=void 0===t?ny:t,r=oy[n][e],i=ay[n][e]||ay[n][r],s=e in Vy.styles?e:null;return i||s||null}var vb=(Av(Zy={},ny,Object.keys(ly[ny])),Av(Zy,ry,Object.keys(ly[ry])),Zy);function yb(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,r=void 0!==n&&n,i=(Av(t={},ny,"".concat(Ty.cssPrefix,"-").concat(ny)),Av(t,ry,"".concat(Ty.cssPrefix,"-").concat(ry)),t),s=null,o=ny;(e.includes(i[ny])||e.some(function(e){return vb[ny].includes(e)}))&&(o=ny),(e.includes(i[ry])||e.some(function(e){return vb[ry].includes(e)}))&&(o=ry);var a=e.reduce(function(e,t){var n=cb(Ty.cssPrefix,t);if($y[t]?(t=tb[o].includes(t)?cy[o][t]:t,s=t,e.prefix=t):lb[o].indexOf(t)>-1?(s=t,e.prefix=mb(t,{family:o})):n?e.iconName=n:t!==Ty.replacementClass&&t!==i[ny]&&t!==i[ry]&&e.rest.push(t),!r&&e.prefix&&e.iconName){var a="fa"===s?pb(e.iconName):{},l=db(e.prefix,e.iconName);a.prefix&&(s=null),e.iconName=a.iconName||l||e.iconName,e.prefix=a.prefix||e.prefix,"far"!==e.prefix||$y.far||!$y.fas||Ty.autoFetchSvg||(e.prefix="fas")}return e},{prefix:null,iconName:null,rest:[]});return(e.includes("fa-brands")||e.includes("fab"))&&(a.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(a.prefix="fad"),a.prefix||o!==ry||!$y.fass&&!Ty.autoFetchSvg||(a.prefix="fass",a.iconName=db(a.prefix,a.iconName)||a.iconName),"fa"!==a.prefix&&"fa"!==s||(a.prefix=gb()||"fas"),a}var bb=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach(function(t){e.definitions[t]=xv(xv({},e.definitions[t]||{}),i[t]),Qy(t,i[t]);var n=ly[ny][t];n&&Qy(n,i[t]),hb()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map(function(t){var r=n[t],i=r.prefix,s=r.iconName,o=r.icon,a=o[2];e[i]||(e[i]={}),a.length>0&&a.forEach(function(t){"string"===typeof t&&(e[i][t]=o)}),e[i][s]=o}),e}}],n&&_v(t.prototype,n),r&&_v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),wb=[],xb={},Cb={},_b=Object.keys(Cb);function Ab(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(xb[e]||[]).forEach(function(e){t=e.apply(null,[t].concat(r))}),t}function Sb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(xb[e]||[]).forEach(function(e){e.apply(null,n)})}function Tb(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Cb[e]?Cb[e].apply(null,t):void 0}function Eb(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||gb();if(t)return t=db(n,t)||t,Xy(kb.definitions,n,t)||Xy(Vy.styles,n,t)}var kb=new bb,Pb={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Xv?(Sb("beforeI2svg",e),Tb("pseudoElements2svg",e),Tb("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.autoReplaceSvgRoot;!1===Ty.autoReplaceSvg&&(Ty.autoReplaceSvg=!0),Ty.observeMutations=!0,e=function(){Db({autoReplaceSvgRoot:n}),Sb("watch",t)},Xv&&(Hy?setTimeout(e,0):zy.push(e))}},Ob={icon:function(e){if(null===e)return null;if("object"===Cv(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:db(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=mb(e[0]);return{prefix:n,iconName:db(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(Ty.cssPrefix,"-"))>-1||e.match(uy))){var r=yb(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||gb(),iconName:db(r.prefix,r.iconName)||r.iconName}}if("string"===typeof e){var i=gb();return{prefix:i,iconName:db(i,e)||e}}}},Ib={noAuto:function(){Ty.autoReplaceSvg=!1,Ty.observeMutations=!1,Sb("noAuto")},config:Ty,dom:Pb,parse:Ob,library:kb,findIconDefinition:Eb,toHtml:Wy},Db=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,t=void 0===e?zv:e;(Object.keys(Vy.styles).length>0||Ty.autoFetchSvg)&&Xv&&Ty.autoReplaceSvg&&Ib.dom.i2svg({node:t})};function Rb(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(e){return Wy(e)})}}),Object.defineProperty(e,"node",{get:function(){if(Xv){var t=zv.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function Nb(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,s=e.iconName,o=e.transform,a=e.symbol,l=e.title,c=e.maskId,u=e.titleId,h=e.extra,f=e.watchable,d=void 0!==f&&f,p=r.found?r:n,g=p.width,m=p.height,v="fak"===i,y=[Ty.replacementClass,s?"".concat(Ty.cssPrefix,"-").concat(s):""].filter(function(e){return-1===h.classes.indexOf(e)}).filter(function(e){return""!==e||!!e}).concat(h.classes).join(" "),b={children:[],attributes:xv(xv({},h.attributes),{},{"data-prefix":i,"data-icon":s,class:y,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(g," ").concat(m)})},w=v&&!~h.classes.indexOf("fa-fw")?{width:"".concat(g/m*16*.0625,"em")}:{};d&&(b.attributes[Qv]=""),l&&(b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(u||Oy())},children:[l]}),delete b.attributes.title);var x=xv(xv({},b),{},{prefix:i,iconName:s,main:n,mask:r,maskId:c,transform:o,symbol:a,styles:xv(xv({},w),h.styles)}),C=r.found&&n.found?Tb("generateAbstractMask",x)||{children:[],attributes:{}}:Tb("generateAbstractIcon",x)||{children:[],attributes:{}},_=C.children,A=C.attributes;return x.children=_,x.attributes=A,a?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,s=e.symbol,o=!0===s?"".concat(t,"-").concat(Ty.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:xv(xv({},i),{},{id:o}),children:r}]}]}(x):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,s=e.styles,o=e.transform;if(jy(o)&&n.found&&!r.found){var a={x:n.width/n.height/2,y:.5};i.style=Ny(xv(xv({},s),{},{"transform-origin":"".concat(a.x+o.x/16,"em ").concat(a.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(x)}function jb(e){var t=e.content,n=e.width,r=e.height,i=e.transform,s=e.title,o=e.extra,a=e.watchable,l=void 0!==a&&a,c=xv(xv(xv({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});l&&(c[Qv]="");var u=xv({},o.styles);jy(i)&&(u.transform=function(e){var t=e.transform,n=e.width,r=void 0===n?16:n,i=e.height,s=void 0===i?16:i,o=e.startCentered,a=void 0!==o&&o,l="";return l+=a&&Kv?"translate(".concat(t.x/ky-r/2,"em, ").concat(t.y/ky-s/2,"em) "):a?"translate(calc(-50% + ".concat(t.x/ky,"em), calc(-50% + ").concat(t.y/ky,"em)) "):"translate(".concat(t.x/ky,"em, ").concat(t.y/ky,"em) "),l+="scale(".concat(t.size/ky*(t.flipX?-1:1),", ").concat(t.size/ky*(t.flipY?-1:1),") "),l+"rotate(".concat(t.rotate,"deg) ")}({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var h=Ny(u);h.length>0&&(c.style=h);var f=[];return f.push({tag:"span",attributes:c,children:[t]}),s&&f.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),f}var Lb=Vy.styles;function Mb(e){var t=e[0],n=e[1],r=Sv(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(Ty.cssPrefix,"-").concat(vy)},children:[{tag:"path",attributes:{class:"".concat(Ty.cssPrefix,"-").concat(wy),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Ty.cssPrefix,"-").concat(by),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}var Fb={found:!1,width:512,height:512};function Bb(e,t){var n=t;return"fa"===t&&null!==Ty.styleDefault&&(t=gb()),new Promise(function(r,i){Tb("missingIconAbstract");if("fa"===n){var s=pb(e)||{};e=s.iconName||e,t=s.prefix||t}if(e&&t&&Lb[t]&&Lb[t][e])return r(Mb(Lb[t][e]));!function(e,t){ty||Ty.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(xv(xv({},Fb),{},{icon:Ty.showMissingIcons&&e&&Tb("missingIconAbstract")||{}}))})}var Ub=function(){},Vb=Ty.measurePerformance&&Wv&&Wv.mark&&Wv.measure?Wv:{mark:Ub,measure:Ub},zb='FA "6.5.2"',Hb=function(e){Vb.mark("".concat(zb," ").concat(e," ends")),Vb.measure("".concat(zb," ").concat(e),"".concat(zb," ").concat(e," begins"),"".concat(zb," ").concat(e," ends"))},Wb=function(e){return Vb.mark("".concat(zb," ").concat(e," begins")),function(){return Hb(e)}},Xb=function(){};function Kb(e){return"string"===typeof(e.getAttribute?e.getAttribute(Qv):null)}function qb(e){return zv.createElementNS("http://www.w3.org/2000/svg",e)}function Gb(e){return zv.createElement(e)}function Qb(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,n=void 0===t?"svg"===e.tag?qb:Gb:t;if("string"===typeof e)return zv.createTextNode(e);var r=n(e.tag);return Object.keys(e.attributes||[]).forEach(function(t){r.setAttribute(t,e.attributes[t])}),(e.children||[]).forEach(function(e){r.appendChild(Qb(e,{ceFn:n}))}),r}var Yb={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(e){t.parentNode.insertBefore(Qb(e),t)}),null===t.getAttribute(Qv)&&Ty.keepOriginalSource){var n=zv.createComment(function(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~Dy(t).indexOf(Ty.replacementClass))return Yb.replace(e);var r=new RegExp("".concat(Ty.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var i=n[0].attributes.class.split(" ").reduce(function(e,t){return t===Ty.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e},{toNode:[],toSvg:[]});n[0].attributes.class=i.toSvg.join(" "),0===i.toNode.length?t.removeAttribute("class"):t.setAttribute("class",i.toNode.join(" "))}var s=n.map(function(e){return Wy(e)}).join("\n");t.setAttribute(Qv,""),t.innerHTML=s}};function Jb(e){e()}function Zb(e,t){var n="function"===typeof t?t:Xb;if(0===e.length)n();else{var r=Jb;"async"===Ty.mutateApproach&&(r=Vv.requestAnimationFrame||Jb),r(function(){var t=!0===Ty.autoReplaceSvg?Yb.replace:Yb[Ty.autoReplaceSvg]||Yb.replace,r=Wb("mutate");e.map(t),r(),n()})}}var $b=!1;function ew(){$b=!0}function tw(){$b=!1}var nw=null;function rw(e){if(Hv&&Ty.observeMutations){var t=e.treeCallback,n=void 0===t?Xb:t,r=e.nodeCallback,i=void 0===r?Xb:r,s=e.pseudoElementsCallback,o=void 0===s?Xb:s,a=e.observeMutationsRoot,l=void 0===a?zv:a;nw=new Hv(function(e){if(!$b){var t=gb();Iy(e).forEach(function(e){if("childList"===e.type&&e.addedNodes.length>0&&!Kb(e.addedNodes[0])&&(Ty.searchPseudoElements&&o(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&Ty.searchPseudoElements&&o(e.target.parentNode),"attributes"===e.type&&Kb(e.target)&&~my.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){var t=e.getAttribute?e.getAttribute(Jv):null,n=e.getAttribute?e.getAttribute(Zv):null;return t&&n}(e.target)){var r=yb(Dy(e.target)),s=r.prefix,a=r.iconName;e.target.setAttribute(Jv,s||t),a&&e.target.setAttribute(Zv,a)}else(l=e.target)&&l.classList&&l.classList.contains&&l.classList.contains(Ty.replacementClass)&&i(e.target);var l})}}),Xv&&nw.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function iw(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",i=yb(Dy(e));return i.prefix||(i.prefix=gb()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=function(e,t){return(ib[e]||{})[t]}(i.prefix,e.innerText)||fb(i.prefix,qy(e.innerText))),!i.iconName&&Ty.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function sw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=iw(e),r=n.iconName,i=n.prefix,s=n.rest,o=function(e){var t=Iy(e.attributes).reduce(function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e},{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return Ty.autoA11y&&(n?t["aria-labelledby"]="".concat(Ty.replacementClass,"-title-").concat(r||Oy()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),a=Ab("parseNodeAttributes",{},e),l=t.styleParser?function(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce(function(e,t){var n=t.split(":"),r=n[0],i=n.slice(1);return r&&i.length>0&&(e[r]=i.join(":").trim()),e},{})),n}(e):[];return xv({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:Py,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:o}},a)}var ow=Vy.styles;function aw(e){var t="nest"===Ty.autoReplaceSvg?sw(e,{styleParser:!1}):sw(e);return~t.extra.classes.indexOf(hy)?Tb("generateLayersText",e,t):Tb("generateSvgReplacementMutation",e,t)}var lw=new Set;function cw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Xv)return Promise.resolve();var n=zv.documentElement.classList,r=function(e){return n.add("".concat($v,"-").concat(e))},i=function(e){return n.remove("".concat($v,"-").concat(e))},s=Ty.autoFetchSvg?lw:iy.map(function(e){return"fa-".concat(e)}).concat(Object.keys(ow));s.includes("fa")||s.push("fa");var o=[".".concat(hy,":not([").concat(Qv,"])")].concat(s.map(function(e){return".".concat(e,":not([").concat(Qv,"])")})).join(", ");if(0===o.length)return Promise.resolve();var a=[];try{a=Iy(e.querySelectorAll(o))}catch(tx){}if(!(a.length>0))return Promise.resolve();r("pending"),i("complete");var l=Wb("onTree"),c=a.reduce(function(e,t){try{var n=aw(t);n&&e.push(n)}catch(tx){ty||"MissingIcon"===tx.name&&console.error(tx)}return e},[]);return new Promise(function(e,n){Promise.all(c).then(function(n){Zb(n,function(){r("active"),r("complete"),i("pending"),"function"===typeof t&&t(),l(),e()})}).catch(function(e){l(),n(e)})})}function uw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;aw(e).then(function(e){e&&Zb([e],t)})}iy.map(function(e){lw.add("fa-".concat(e))}),Object.keys(oy[ny]).map(lw.add.bind(lw)),Object.keys(oy[ry]).map(lw.add.bind(lw)),lw=Tv(lw);var hw=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Py:n,i=t.symbol,s=void 0!==i&&i,o=t.mask,a=void 0===o?null:o,l=t.maskId,c=void 0===l?null:l,u=t.title,h=void 0===u?null:u,f=t.titleId,d=void 0===f?null:f,p=t.classes,g=void 0===p?[]:p,m=t.attributes,v=void 0===m?{}:m,y=t.styles,b=void 0===y?{}:y;if(e){var w=e.prefix,x=e.iconName,C=e.icon;return Rb(xv({type:"icon"},e),function(){return Sb("beforeDOMElementCreation",{iconDefinition:e,params:t}),Ty.autoA11y&&(h?v["aria-labelledby"]="".concat(Ty.replacementClass,"-title-").concat(d||Oy()):(v["aria-hidden"]="true",v.focusable="false")),Nb({icons:{main:Mb(C),mask:a?Mb(a.icon):{found:!1,width:null,height:null,icon:{}}},prefix:w,iconName:x,transform:xv(xv({},Py),r),symbol:s,title:h,maskId:c,titleId:d,extra:{attributes:v,styles:b,classes:g}})})}},fw={mixout:function(){return{icon:(e=hw,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:Eb(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:Eb(i||{})),e(r,xv(xv({},n),{},{mask:i}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=cw,e.nodeCallback=uw,e}}},provides:function(e){e.i2svg=function(e){var t=e.node,n=void 0===t?zv:t,r=e.callback;return cw(n,void 0===r?function(){}:r)},e.generateSvgReplacementMutation=function(e,t){var n=t.iconName,r=t.title,i=t.titleId,s=t.prefix,o=t.transform,a=t.symbol,l=t.mask,c=t.maskId,u=t.extra;return new Promise(function(t,h){Promise.all([Bb(n,s),l.iconName?Bb(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(l){var h=Sv(l,2),f=h[0],d=h[1];t([e,Nb({icons:{main:f,mask:d},prefix:s,iconName:n,transform:o,symbol:a,maskId:c,title:r,titleId:i,extra:u,watchable:!0})])}).catch(h)})},e.generateAbstractIcon=function(e){var t,n=e.children,r=e.attributes,i=e.main,s=e.transform,o=Ny(e.styles);return o.length>0&&(r.style=o),jy(s)&&(t=Tb("generateAbstractTransformGrouping",{main:i,transform:s,containerWidth:i.width,iconWidth:i.width})),n.push(t||i.icon),{children:n,attributes:r}}}},dw={mixout:function(){return{layer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,r=void 0===n?[]:n;return Rb({type:"layer"},function(){Sb("beforeDOMElementCreation",{assembler:e,params:t});var n=[];return e(function(e){Array.isArray(e)?e.map(function(e){n=n.concat(e.abstract)}):n=n.concat(e.abstract)}),[{tag:"span",attributes:{class:["".concat(Ty.cssPrefix,"-layers")].concat(Tv(r)).join(" ")},children:n}]})}}}},pw={mixout:function(){return{counter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=void 0===n?null:n,i=t.classes,s=void 0===i?[]:i,o=t.attributes,a=void 0===o?{}:o,l=t.styles,c=void 0===l?{}:l;return Rb({type:"counter",content:e},function(){return Sb("beforeDOMElementCreation",{content:e,params:t}),function(e){var t=e.content,n=e.title,r=e.extra,i=xv(xv(xv({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=Ny(r.styles);s.length>0&&(i.style=s);var o=[];return o.push({tag:"span",attributes:i,children:[t]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}({content:e.toString(),title:r,extra:{attributes:a,styles:c,classes:["".concat(Ty.cssPrefix,"-layers-counter")].concat(Tv(s))}})})}}}},gw={mixout:function(){return{text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Py:n,i=t.title,s=void 0===i?null:i,o=t.classes,a=void 0===o?[]:o,l=t.attributes,c=void 0===l?{}:l,u=t.styles,h=void 0===u?{}:u;return Rb({type:"text",content:e},function(){return Sb("beforeDOMElementCreation",{content:e,params:t}),jb({content:e,transform:xv(xv({},Py),r),title:s,extra:{attributes:c,styles:h,classes:["".concat(Ty.cssPrefix,"-layers-text")].concat(Tv(a))}})})}}},provides:function(e){e.generateLayersText=function(e,t){var n=t.title,r=t.transform,i=t.extra,s=null,o=null;if(Kv){var a=parseInt(getComputedStyle(e).fontSize,10),l=e.getBoundingClientRect();s=l.width/a,o=l.height/a}return Ty.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,jb({content:e.innerHTML,width:s,height:o,transform:r,title:n,extra:i,watchable:!0})])}}},mw=new RegExp('"',"ug"),vw=[1105920,1112319];function yw(e,t){var n="".concat("data-fa-pseudo-element-pending").concat(t.replace(":","-"));return new Promise(function(r,i){if(null!==e.getAttribute(n))return r();var s=Iy(e.children).filter(function(e){return e.getAttribute(Yv)===t})[0],o=Vv.getComputedStyle(e,t),a=o.getPropertyValue("font-family").match(fy),l=o.getPropertyValue("font-weight"),c=o.getPropertyValue("content");if(s&&!a)return e.removeChild(s),r();if(a&&"none"!==c&&""!==c){var u=o.getPropertyValue("content"),h=~["Sharp"].indexOf(a[2])?ry:ny,f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(a[2])?ay[h][a[2].toLowerCase()]:dy[h][l],d=function(e){var t=e.replace(mw,""),n=function(e,t){var n,r=e.length,i=e.charCodeAt(t);return i>=55296&&i<=56319&&r>t+1&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}(t,0),r=n>=vw[0]&&n<=vw[1],i=2===t.length&&t[0]===t[1];return{value:qy(i?t[0]:t),isSecondary:r||i}}(u),p=d.value,g=d.isSecondary,m=a[0].startsWith("FontAwesome"),v=fb(f,p),y=v;if(m){var b=function(e){var t=ob[e],n=fb("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(p);b.iconName&&b.prefix&&(v=b.iconName,f=b.prefix)}if(!v||g||s&&s.getAttribute(Jv)===f&&s.getAttribute(Zv)===y)r();else{e.setAttribute(n,y),s&&e.removeChild(s);var w={iconName:null,title:null,titleId:null,prefix:null,transform:Py,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},x=w.extra;x.attributes[Yv]=t,Bb(v,f).then(function(i){var s=Nb(xv(xv({},w),{},{icons:{main:i,mask:{prefix:null,iconName:null,rest:[]}},prefix:f,iconName:y,extra:x,watchable:!0})),o=zv.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===t?e.insertBefore(o,e.firstChild):e.appendChild(o),o.outerHTML=s.map(function(e){return Wy(e)}).join("\n"),e.removeAttribute(n),r()}).catch(i)}}else r()})}function bw(e){return Promise.all([yw(e,"::before"),yw(e,"::after")])}function ww(e){return e.parentNode!==document.head&&!~ey.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Yv)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function xw(e){if(Xv)return new Promise(function(t,n){var r=Iy(e.querySelectorAll("*")).filter(ww).map(bw),i=Wb("searchPseudoElements");ew(),Promise.all(r).then(function(){i(),tw(),t()}).catch(function(){i(),tw(),n()})})}var Cw=!1,_w=function(e){return e.toLowerCase().split(" ").reduce(function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},Aw={mixout:function(){return{parse:{transform:function(e){return _w(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-transform");return n&&(e.transform=_w(n)),e}}},provides:function(e){e.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,r=e.containerWidth,i=e.iconWidth,s={transform:"translate(".concat(r/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),a="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),l="rotate(".concat(n.rotate," 0 0)"),c={outer:s,inner:{transform:"".concat(o," ").concat(a," ").concat(l)},path:{transform:"translate(".concat(i/2*-1," -256)")}};return{tag:"g",attributes:xv({},c.outer),children:[{tag:"g",attributes:xv({},c.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:xv(xv({},t.icon.attributes),c.path)}]}]}}}},Sw={x:0,y:0,width:"100%",height:"100%"};function Tw(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var Ew={hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-mask"),r=n?yb(n.split(" ").map(function(e){return e.trim()})):{prefix:null,iconName:null,rest:[]};return r.prefix||(r.prefix=gb()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides:function(e){e.generateAbstractMask=function(e){var t,n=e.children,r=e.attributes,i=e.main,s=e.mask,o=e.maskId,a=e.transform,l=i.width,c=i.icon,u=s.width,h=s.icon,f=function(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(s," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:a,containerWidth:u,iconWidth:l}),d={tag:"rect",attributes:xv(xv({},Sw),{},{fill:"white"})},p=c.children?{children:c.children.map(Tw)}:{},g={tag:"g",attributes:xv({},f.inner),children:[Tw(xv({tag:c.tag,attributes:xv(xv({},c.attributes),f.path)},p))]},m={tag:"g",attributes:xv({},f.outer),children:[g]},v="mask-".concat(o||Oy()),y="clip-".concat(o||Oy()),b={tag:"mask",attributes:xv(xv({},Sw),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,m]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(t=h,"g"===t.tag?t.children:[t])},b]};return n.push(w,{tag:"rect",attributes:xv({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(v,")")},Sw)}),{children:n,attributes:r}}}},kw={provides:function(e){var t=!1;Vv.matchMedia&&(t=Vv.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:xv(xv({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var i=xv(xv({},r),{},{attributeName:"opacity"}),s={tag:"circle",attributes:xv(xv({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||s.children.push({tag:"animate",attributes:xv(xv({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:xv(xv({},i),{},{values:"1;0;1;1;0;1;"})}),e.push(s),e.push({tag:"path",attributes:xv(xv({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:xv(xv({},i),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:xv(xv({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:xv(xv({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){var n=t.mixoutsTo;wb=e,xb={},Object.keys(Cb).forEach(function(e){-1===_b.indexOf(e)&&delete Cb[e]}),wb.forEach(function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach(function(e){"function"===typeof t[e]&&(n[e]=t[e]),"object"===Cv(t[e])&&Object.keys(t[e]).forEach(function(r){n[e]||(n[e]={}),n[e][r]=t[e][r]})}),e.hooks){var r=e.hooks();Object.keys(r).forEach(function(e){xb[e]||(xb[e]=[]),xb[e].push(r[e])})}e.provides&&e.provides(Cb)})}([By,fw,dw,pw,gw,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=xw,e}}},provides:function(e){e.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?zv:t;Ty.searchPseudoElements&&xw(n)}}},{mixout:function(){return{dom:{unwatch:function(){ew(),Cw=!0}}}},hooks:function(){return{bootstrap:function(){rw(Ab("mutationObserverCallbacks",{}))},noAuto:function(){nw&&nw.disconnect()},watch:function(e){var t=e.observeMutationsRoot;Cw?tw():rw(Ab("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},Aw,Ew,kw,{hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}}}}],{mixoutsTo:Ib});var Pw=Ib.parse,Ow=Ib.icon,Iw=n(173),Dw=n.n(Iw);function Rw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Nw(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Lw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jw(Object(n),!0).forEach(function(t){Nw(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Mw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||Uw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fw(e){return function(e){if(Array.isArray(e))return Rw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Uw(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bw(e){return Bw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bw(e)}function Uw(e,t){if(e){if("string"==typeof e)return Rw(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rw(e,t):void 0}}var Vw;try{var zw=n(900);Vw=zw.version}catch(tx){Vw={NODE_ENV:"production",PUBLIC_URL:"/editor_projeto",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FA_VERSION||"7.0.0-alpha8"}function Hw(e){var t=e.beat,n=e.fade,r=e.beatFade,i=e.bounce,s=e.shake,o=e.flash,a=e.spin,l=e.spinPulse,c=e.spinReverse,u=e.pulse,h=e.fixedWidth,f=e.inverse,d=e.border,p=e.listItem,g=e.flip,m=e.size,v=e.rotation,y=e.pull,b=e.swapOpacity,w=e.rotateBy,x=e.widthAuto,C=function(e,t){for(var n=Mw(e.split("-"),2),r=n[0],i=n[1],s=Mw(t.split("-"),2),o=s[0],a=s[1],l=r.split("."),c=o.split("."),u=0;u<Math.max(l.length,c.length);u++){var h=l[u]||"0",f=c[u]||"0",d=parseInt(h,10),p=parseInt(f,10);if(d!==p)return d>p}for(var g=0;g<Math.max(l.length,c.length);g++){var m=l[g]||"0",v=c[g]||"0";if(m!==v&&m.length!==v.length)return m.length<v.length}return!(i&&!a)}(Vw,"7.0.0-alpha1"),_=Nw(Nw(Nw(Nw(Nw(Nw({"fa-beat":t,"fa-fade":n,"fa-beat-fade":r,"fa-bounce":i,"fa-shake":s,"fa-flash":o,"fa-spin":a,"fa-spin-reverse":c,"fa-spin-pulse":l,"fa-pulse":u,"fa-fw":h,"fa-inverse":f,"fa-border":d,"fa-li":p,"fa-flip":!0===g,"fa-flip-horizontal":"horizontal"===g||"both"===g,"fa-flip-vertical":"vertical"===g||"both"===g},"fa-".concat(m),"undefined"!==typeof m&&null!==m),"fa-rotate-".concat(v),"undefined"!==typeof v&&null!==v&&0!==v),"fa-pull-".concat(y),"undefined"!==typeof y&&null!==y),"fa-swap-opacity",b),"fa-rotate-by",C&&w),"fa-width-auto",C&&x);return Object.keys(_).map(function(e){return _[e]?e:null}).filter(function(e){return e})}function Ww(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""})).substr(0,1).toLowerCase()+e.substr(1);var t}var Xw=["style"];var Kw=!1;try{Kw=!0}catch(tx){}function qw(e){return e&&"object"===Bw(e)&&e.prefix&&e.iconName&&e.icon?e:Pw.icon?Pw.icon(e):null===e?null:e&&"object"===Bw(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function Gw(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Nw({},e,t):{}}var Qw={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,rotateBy:!1,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1,widthAuto:!1},Yw=t.forwardRef(function(e,t){var n=Lw(Lw({},Qw),e),r=n.icon,i=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=qw(r),h=Gw("classes",[].concat(Fw(Hw(n)),Fw((o||"").split(" ")))),f=Gw("transform","string"===typeof n.transform?Pw.transform(n.transform):n.transform),d=Gw("mask",qw(i)),p=Ow(u,Lw(Lw(Lw(Lw({},h),f),d),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!p)return function(){var e;!Kw&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",u),null;var g=p.abstract,m={ref:t};return Object.keys(n).forEach(function(e){Qw.hasOwnProperty(e)||(m[e]=n[e])}),Jw(g[0],m)});Yw.displayName="FontAwesomeIcon",Yw.propTypes={beat:Dw().bool,border:Dw().bool,beatFade:Dw().bool,bounce:Dw().bool,className:Dw().string,fade:Dw().bool,flash:Dw().bool,mask:Dw().oneOfType([Dw().object,Dw().array,Dw().string]),maskId:Dw().string,fixedWidth:Dw().bool,inverse:Dw().bool,flip:Dw().oneOf([!0,!1,"horizontal","vertical","both"]),icon:Dw().oneOfType([Dw().object,Dw().array,Dw().string]),listItem:Dw().bool,pull:Dw().oneOf(["right","left"]),pulse:Dw().bool,rotation:Dw().oneOf([0,90,180,270]),rotateBy:Dw().bool,shake:Dw().bool,size:Dw().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Dw().bool,spinPulse:Dw().bool,spinReverse:Dw().bool,symbol:Dw().oneOfType([Dw().bool,Dw().string]),title:Dw().string,titleId:Dw().string,transform:Dw().oneOfType([Dw().string,Dw().object]),swapOpacity:Dw().bool,widthAuto:Dw().bool};var Jw=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map(function(n){return e(t,n)}),s=Object.keys(n.attributes||{}).reduce(function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=r.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var n,r=t.indexOf(":"),i=Ww(t.slice(0,r)),s=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=s:e[i]=s,e},{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[Ww(t)]=r}return e},{attrs:{}}),o=r.style,a=void 0===o?{}:o,l=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(r,Xw);return s.attrs.style=Lw(Lw({},s.attrs.style),a),t.apply(void 0,[n.tag,Lw(Lw({},s.attrs),l)].concat(Fw(i)))}.bind(null,t.createElement);function Zw(e,t,n,r){const i=t%r/2,s=n%r/2,o=[];e.forEachObject(t=>{t.isGrid&&e.remove(t)});for(let a=0;a<=Math.floor(t/r);a++){const t=new Fm.fabric.Line([a*r+i,0,a*r+i,n],{stroke:"#eee",selectable:!1,evented:!1,isGrid:!0});e.add(t),o.push(t)}for(let a=0;a<=Math.floor(n/r);a++){const n=new Fm.fabric.Line([0,a*r+s,t,a*r+s],{stroke:"#eee",selectable:!1,evented:!1,isGrid:!0});e.add(n),o.push(n)}return o.forEach(t=>e.sendToBack(t)),e.requestRenderAll(),o}function $w(){const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)("#D3D3D3"),[s,o]=(0,t.useState)(!1),a=(0,t.useRef)(null),l=(0,t.useRef)(null),[c,u]=(0,t.useState)([]),[h,f]=(0,t.useState)(!1),[d,p]=(0,t.useState)([]),[g,m]=(0,t.useState)("m"),[v,y]=(0,t.useState)(!1),b=(0,t.useRef)(null),w=(0,t.useRef)(null),x=(0,t.useRef)(null),C=(0,t.useRef)(null),_=(0,t.useRef)(null),[A,S]=(0,t.useState)(!0),T=ee(),[E,k]=(0,t.useState)(null);(0,t.useEffect)(()=>{const e=tm.onAuthStateChanged(e=>{k(e),e||T("/")});return()=>e()},[T]);const P=(0,t.useRef)(s),O=(0,t.useRef)(g);(0,t.useEffect)(()=>{P.current=s},[s]),(0,t.useEffect)(()=>{O.current=g},[g]);const I=(0,t.useCallback)(()=>{var e,t,n;const r=((null===(e=b.current)||void 0===e?void 0:e.offsetHeight)||0)+((null===(t=w.current)||void 0===t?void 0:t.offsetHeight)||0)+((null===(n=x.current)||void 0===n?void 0:n.offsetHeight)||0),i=window.innerHeight-r-40,s=window.innerWidth-40;return{width:Math.max(s,300),height:Math.max(i,300)}},[]);(0,t.useEffect)(()=>{const e=I(),t=C.current;if(!t)return void console.error("CRITICAL ERROR: The <canvas id='canvas'> element was not found.");const r=new Fm.fabric.Canvas(t,{width:e.width,height:e.height,backgroundColor:"transparent",selection:!0});n(r);const i=Zw(r,e.width,e.height,20);var s;u(i),Fm.fabric.Object.prototype.toObject=(s=Fm.fabric.Object.prototype.toObject,function(e){return s.call(this,["objectType","label"].concat(e||[]))});const o={current:null},l={current:null},c=e=>{if(!P.current)return;const t=r.getPointer(e.e);a.current={x:t.x,y:t.y}},h=e=>{if(!P.current||!a.current)return;const t=r.getPointer(e.e);let{x:n,y:i}=a.current,s=t.x,c=t.y;Math.abs(s-n)>Math.abs(c-i)?c=i:s=n,o.current&&(r.remove(o.current),o.current=null),l.current&&(r.remove(l.current),l.current=null);const u=new Fm.fabric.Line([n,i,s,c],{stroke:"orange",strokeWidth:2,selectable:!1,evented:!1,strokeDashArray:[5,5]});o.current=u,r.add(u);let h,f,d=Math.sqrt(Math.pow(s-n,2)+Math.pow(c-i,2));"m"===O.current?(h=(d/40).toFixed(2),f="m"):(h=(d/.4).toFixed(0),f="cm");const p=new Fm.fabric.Text(`${h} ${f}`,{fontSize:14,fill:"black",originX:"center",originY:"center",backgroundColor:"rgba(245,247,241,0.93)",selectable:!1,evented:!1,left:(n+s)/2,top:(i+c)/2});l.current=p,r.add(p),r.requestRenderAll()},f=e=>{if(!P.current||!a.current)return;o.current&&r.remove(o.current),l.current&&r.remove(l.current);const t=r.getPointer(e.e),n=a.current.x,i=a.current.y;let s=t.x,c=t.y;Math.abs(s-n)>Math.abs(c-i)?c=i:s=n;let u=Math.sqrt(Math.pow(s-n,2)+Math.pow(c-i,2));u=Math.max(1,Math.round(u));const h=new Fm.fabric.Line([n,i,s,c],{stroke:"black",strokeWidth:3,selectable:!0,evented:!0,objectType:"wall",label:`Parede (${"m"===O.current?(u/40).toFixed(2):(u/.4).toFixed(0)}${O.current})`});r.add(h),a.current=null,r.requestRenderAll(),hv.success("Parede adicionada!")},d=e=>{if("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)return;const t=r.getActiveObject();if(!t||"i-text"!==t.type||!t.isEditing){if("Delete"===e.key||"Backspace"===e.key){const t=r.getActiveObjects();t&&t.length>0&&(t.forEach(e=>{r.remove(e)}),r.discardActiveObject(),r.requestRenderAll(),hv.success("Objeto(s) deletado(s)!")),e.preventDefault()}(e.ctrlKey||e.metaKey)&&"c"===e.key&&(t&&"i-text"!==t.type&&!t.isEditing?t.clone(e=>{_.current=e,hv.success("Objeto copiado!")}):t||hv.info("Nenhum objeto selecionado para copiar."),e.preventDefault()),(e.ctrlKey||e.metaKey)&&"v"===e.key&&(_.current?(_.current.clone(e=>{e.set({left:e.left+10,top:e.top+10,evented:!0,selectable:!0}),r.add(e),r.setActiveObject(e),r.requestRenderAll()}),hv.success("Objeto colado!")):hv.info("Nenhum objeto para colar."),e.preventDefault())}};r.on("mouse:down",c),r.on("mouse:move",h),r.on("mouse:up",f),document.addEventListener("keydown",d);const p=new ResizeObserver(()=>{const e=I();r.setWidth(e.width),r.setHeight(e.height);const t=Zw(r,e.width,e.height,20);u(t),r.requestRenderAll()});return t.parentElement&&p.observe(t.parentElement),()=>{r.off("mouse:down",c),r.off("mouse:move",h),r.off("mouse:up",f),document.removeEventListener("keydown",d),t.parentElement&&p.unobserve(t.parentElement),r&&r.dispose&&r.dispose()}},[I]),(0,t.useEffect)(()=>{if(e){const t=I();e.setWidth(t.width),e.setHeight(t.height);const n=Zw(e,t.width,t.height,20);u(n),e.requestRenderAll()}},[A,e,I]);const D=async e=>{if(v||!E)return;const t=e.id;if(window.confirm("Are you sure you want to delete this project?")){y(!0);try{await(n=Up(em,"projetos",E.uid,"userProjects",t),Tg(ia(n.firestore,Wp),[new Pu(n._key,mu.none())])),p(e=>e.filter(e=>e.id!==t)),hv.success("Project deleted successfully!")}catch(r){hv.error(`Error deleting project: ${r.message}`),console.error("Error deleting project:",r)}finally{y(!1)}}var n},R=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!e)return void hv.error("Canvas is not ready. Cannot add item.");o(!1),"crosshair"===e.defaultCursor&&(e.defaultCursor="default");const a={...{left:100,top:100,fill:r,selectable:!0,evented:!0,objectType:t,label:s||t},...n};if(i){(new Date).getTime();return void Fm.fabric.Image.fromURL(i,n=>{if(n){const r=.15;n.set({left:a.left,top:a.top,scaleX:r,scaleY:r,selectable:!0,evented:!0,objectType:a.objectType,label:a.label,crossOrigin:"anonymous"}),e.add(n),e.setActiveObject(n),e.requestRenderAll(),hv.success(`${s||t} adicionado!`)}else console.warn(`Erro ao carregar a imagem: ${i}.`),hv.error(`Erro ao carregar a imagem: ${s||t}.`)},{crossOrigin:"anonymous"})}let l=null;switch(t){case"rectangle":l=new Fm.fabric.Rect({...a,width:80,height:85});break;case"circle":l=new Fm.fabric.Circle({...a,radius:40});break;case"text":l=new Fm.fabric.IText("Type here",{...a,fontSize:20,fill:"black"});break;default:return console.warn("Unrecognized or unsupported component type without an image:",t),void hv.error(`Unrecognized component type: ${t}`)}l&&(e.add(l),e.setActiveObject(l),e.requestRenderAll(),hv.success(`${s||t} added!`))};return(0,nm.jsxs)("div",{className:"editor-container",children:[(0,nm.jsx)(bv,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),v&&(0,nm.jsx)("div",{className:"loading-overlay",children:"Carregando..."}),(0,nm.jsxs)("div",{ref:b,className:"header-bar",children:[(0,nm.jsx)("h1",{children:"Editor de Plantas Online"}),(0,nm.jsxs)("div",{className:"user-info",children:[E?(0,nm.jsxs)("span",{children:["Bem-vindo, ",E.email,"!"]}):(0,nm.jsx)("span",{children:"Carregando..."}),(0,nm.jsxs)("button",{onClick:async()=>{y(!0);try{await function(e){return $e(e).signOut()}(tm),hv.info("You have been disconnected."),e&&(e.clear(),e.requestRenderAll())}catch(t){hv.error(`Error logging out: ${t.message}`),console.error("Logout Error:",t)}finally{y(!1)}},disabled:v,title:"Sair da Conta",children:[(0,nm.jsx)(Yw,{icon:gm})," Sair"]}),(0,nm.jsxs)("button",{onClick:()=>{if(!v&&window.confirm("Do you want to start a new project? Unsaved changes will be lost.")){if(e){e.clear();const t=e.getWidth(),n=e.getHeight(),r=Zw(e,t,n,20);u(r),e.requestRenderAll()}hv.info("New project started.")}},disabled:v,title:"Iniciar Novo Projeto",children:[(0,nm.jsx)(Yw,{icon:fm})," Novo Projeto"]}),(0,nm.jsx)("a",{href:"https://akira2018.github.io/calc_construtor/",target:"_blank",rel:"noopener noreferrer",title:"Abrir Calculadora de Constru\xe7\xe3o",children:(0,nm.jsxs)("button",{children:[(0,nm.jsx)(Yw,{icon:Im})," C\xe1lculo de Previs\xe3o de Custos"]})})]})]}),(0,nm.jsxs)("div",{ref:w,className:"controls-bar",children:[(0,nm.jsxs)("div",{className:"tool-group",children:[(0,nm.jsx)("label",{htmlFor:"colorPicker",children:"Cor Padr\xe3o:"}),(0,nm.jsx)("input",{type:"color",id:"colorPicker",value:r,onChange:e=>i(e.target.value),disabled:v,title:"Selecionar Cor de Preenchimento"})]}),(0,nm.jsxs)("div",{className:"tool-group",children:[(0,nm.jsx)("label",{htmlFor:"unitSelect",children:"Unidade:"}),(0,nm.jsxs)("select",{id:"unitSelect",value:g,onChange:e=>m(e.target.value),disabled:v,title:"Selecionar Unidade de Medida",children:[(0,nm.jsx)("option",{value:"m",children:"Metros (m)"}),(0,nm.jsx)("option",{value:"cm",children:"Cent\xedmetros (cm)"})]})]}),(0,nm.jsxs)("button",{onClick:()=>R("rectangle",{},null,"Ret\xe2ngulo"),disabled:v,title:"Adicionar Ret\xe2ngulo",children:[(0,nm.jsx)(Yw,{icon:Am})," Ret\xe2ngulo"]}),(0,nm.jsxs)("button",{onClick:()=>R("circle",{},null,"C\xedrculo"),disabled:v,title:"Adicionar C\xedrculo",children:[(0,nm.jsx)(Yw,{icon:Tm})," C\xedrculo"]}),(0,nm.jsxs)("button",{onClick:()=>R("text",{},null,"Texto"),disabled:v,title:"Adicionar Texto",children:[(0,nm.jsx)(Yw,{icon:Nm})," Texto"]}),(0,nm.jsxs)("button",{onClick:()=>{l.current&&(l.current.value=null,l.current.click())},disabled:v,title:"Carregar Imagem",children:[(0,nm.jsx)(Yw,{icon:Cm})," Upload de Imagem"]}),(0,nm.jsx)("input",{type:"file",ref:l,style:{display:"none"},onChange:t=>{if(!e)return void hv.error("Canvas is not ready. Cannot upload image.");const n=t.target.files[0];if(n){const t=new FileReader;t.onload=function(t){Fm.fabric.Image.fromURL(t.target.result,t=>{t?(t.scale(.3).set({left:150,top:150,selectable:!0,evented:!0,objectType:"uploaded_image",label:"Uploaded Image",crossOrigin:"anonymous"}),e.add(t),e.requestRenderAll(),hv.success("Image uploaded!")):(console.warn("Error loading image from file. img object is null."),hv.error("Error loading image from file."))},{crossOrigin:"anonymous"})},t.readAsDataURL(n)}},accept:"image/*"}),(0,nm.jsxs)("button",{onClick:()=>{o(e=>!e),e&&(e.discardActiveObject(),e.defaultCursor=s?"default":"crosshair",e.requestRenderAll())},className:s?"active":"",disabled:v,title:"Desenhar Parede",children:[(0,nm.jsx)(Yw,{icon:Mm})," Desenhar Parede"]}),(0,nm.jsxs)("button",{onClick:async()=>{if(!e||v||!E)return void hv.error("Canvas n\xe3o est\xe1 pronto, carregando ou usu\xe1rio n\xe3o logado.");const t=prompt("Nome do projeto:");if(!t)return void hv.info("Salvamento cancelado.");y(!0);[...c].forEach(t=>e.remove(t)),e.requestRenderAll();const n=e.toJSON();try{await function(e,t,n){e=ia(e,Fp);const r=ia(e.firestore,Wp),i=bg(e.converter,t,n);return Tg(r,[ig(rg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,mu.none())])}(Up(em,"projetos",E.uid,"userProjects",t),{data:n,projectName:t}),hv.success("Projeto salvo com sucesso!")}catch(tx){hv.error(`Erro ao salvar no Firebase: ${tx.message}`),console.error("Erro ao salvar no Firebase:",tx)}finally{const t=e.getWidth(),n=e.getHeight(),r=Zw(e,t,n,20);u(r),e.requestRenderAll(),f(!1),y(!1)}},disabled:v,title:"Salvar Projeto",children:[(0,nm.jsx)(Yw,{icon:Pm})," Salvar"]}),(0,nm.jsxs)("button",{onClick:async()=>{if(!v&&E){if(y(!0),!h)try{const e=await function(e){e=ia(e,Mp);const t=ia(e.firestore,Wp),n=Xp(t),r=new Sg(t);return vg(e._query),Op(n,e._query).then(n=>new _g(t,r,e,n))}(function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$e(e),$o("collection","path",t),e instanceof Lp){const n=Qo.fromString(t,...r);return ta(n),new Bp(e,null,n)}{if(!(e instanceof Fp||e instanceof Bp))throw new Po(ko.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Qo.fromString(t,...r));return ta(n),new Bp(e.firestore,null,n)}}(em,"projetos",E.uid,"userProjects")),t=[];e.forEach(e=>{t.push({id:e.id,name:e.data().projectName||e.id,data:e.data().data})}),p(t),hv.info("Projetos carregados.")}catch(e){hv.error(`Erro ao carregar projetos do Firebase: ${e.message}`),console.error("Erro ao carregar projetos do Firebase:",e)}finally{y(!1)}f(e=>!e)}else E||hv.error("Por favor, fa\xe7a login para ver seus projetos.")},disabled:v,title:"Meus Projetos",children:[(0,nm.jsx)(Yw,{icon:ym})," Meus Projetos"]}),(0,nm.jsxs)("button",{onClick:()=>{if(!e)return void hv.error("Canvas is not ready to export.");c.forEach(t=>e.remove(t)),e.requestRenderAll();const t=e.toDataURL({format:"png",quality:1,multiplier:2}),n=document.createElement("a");n.download="planta.png",n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),hv.success("Floor plan exported as PNG!"),c.forEach(t=>e.add(t)),e.requestRenderAll()},disabled:v,title:"Exportar para PNG",children:[(0,nm.jsx)(Yw,{icon:Lm})," Exportar PNG"]}),(0,nm.jsxs)("button",{onClick:()=>{if(!e)return void hv.error("Canvas is not ready to delete.");const t=e.getActiveObject();t?(e.remove(t),e.discardActiveObject(),e.requestRenderAll(),hv.info("Object deleted.")):hv.warn("No object selected to delete.")},disabled:v,title:"Deletar Objeto Selecionado",children:[(0,nm.jsx)(Yw,{icon:um})," Deletar"]})]}),(0,nm.jsxs)("div",{ref:x,className:"library-section",children:[(0,nm.jsxs)("div",{className:"library-header",children:[(0,nm.jsx)("h2",{children:"Componentes da Biblioteca"}),(0,nm.jsx)("button",{className:"library-toggle-button",onClick:()=>{S(e=>!e)},children:(0,nm.jsx)(Yw,{icon:A?vm:jm})})]}),(0,nm.jsxs)("div",{className:"library-content "+(A?"":"collapsed"),children:[(0,nm.jsxs)("div",{className:"library-group",children:[(0,nm.jsx)("h4",{children:"Elementos de Constru\xe7\xe3o"}),(0,nm.jsxs)("div",{className:"library-group-buttons",children:[(0,nm.jsxs)("button",{onClick:()=>R("door",{},im,"Porta"),disabled:v,children:[(0,nm.jsx)(Yw,{icon:dm})," Porta"]}),(0,nm.jsxs)("button",{onClick:()=>R("window",{},"data:image/png;base64,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","Janela"),disabled:v,children:[(0,nm.jsx)(Yw,{icon:Em})," Janela"]})]})]}),(0,nm.jsxs)("div",{className:"library-group",children:[(0,nm.jsx)("h4",{children:"M\xf3veis"}),(0,nm.jsxs)("div",{className:"library-group-buttons",children:[(0,nm.jsxs)("button",{onClick:()=>R("sofa",{},"data:image/png;base64,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","Sof\xe1"),disabled:v,children:[(0,nm.jsx)(Yw,{icon:Sm})," Sof\xe1"]}),(0,nm.jsxs)("button",{onClick:()=>R("poltrona",{},"data:image/png;base64,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","Poltrona"),disabled:v,children:[(0,nm.jsx)(Yw,{icon:_m})," Poltrona"]}),(0,nm.jsxs)("button",{onClick:()=>R("bed",{},sm,"Cama"),disabled:v,children:[(0,nm.jsx)(Yw,{icon:Rm})," Cama"]}),(0,nm.jsxs)("button",{onClick:()=>R("diningTable",{},om,"Mesa de Jantar"),disabled:v,children:[(0,nm.jsx)(Yw,{icon:_m})," Mesa de Jantar"]})]})]}),(0,nm.jsxs)("div",{className:"library-group",children:[(0,nm.jsx)("h4",{children:"Banheiro"}),(0,nm.jsxs)("div",{className:"library-group-buttons",children:[(0,nm.jsxs)("button",{onClick:()=>R("toilet",{},"data:image/png;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCACbAJ0DASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD93KKKKACiiigAooooAKKKKACkblTS0yckRHaMmgTdgAHrTN4/vH/vmsrxZ4ki8G+F73VpwWgsIZJ3GeSFBNfmn4A/4OHNJ+NOhXNrpOl6P4X8TOhFrY6zds9vI3QZuF2jPttrmxGIUDfD4edbY/UESbDnORSiUS8jtX5w/BT9tb9oW71261PxYng260iZw9rFp0pIiT06kv8AXIr6r+GX7Zuk+Jkjj1mF9HuHwN7Nugc+vQFT7ZNcEc5oKag2d1XJ8RGPNY9zY4HNAcHisvRdet9agE9vOs8LDIcMDuHtitBJ0UqMsN3AGK9eNSMl7p5cqdSEuWRIcZqWoiuTmpQMCny2DToFFZniHxLbeHbVZ7uTyIzMsKknhi3T+VaEL7wcdBwD60APooooAKKKKACiiigAooooAKbLzGc06myjdGR60pK60Gjzf9qm9bSf2cfGt1E5SWHRrkoTyARGTnB4r+cv41/8E9/Fnw90ybU/DrL4q0YfODAypeoOuWXhX/DJr+iP9tW4Nj+yr48duFTRLk5/7ZmvzAbXZNP8OQ3MFupK+TE2Gwf3jKpPTtnPvivjOIcwlhZxR9pwvhI1VJs/PT4M/tpfED4DXkkOn6zqMsFowjutLvy/lx4/hdDyh9sCvqPwj/wU0sPjO2m6ffahL4XmIEdxv3m0Izyysmdo7ZfA4rpfHX7N/g79ojwxG3iHS7c3UO4RX0cYW5U7jyHH9Qa+Y/jP/wAE4vFHhARXnhWWLxVp0TmU284EN1BjuDnEhwP9n6V5H1zB4nyZ7tbA1IPmvddj9IvhF8Q/HGha3aaj4K8WRJoCxgGNryG8tpzkHcu0sAff0Jr63+Ff7btzJIlv4ntlDrgPdWKmf8WRc/8Ajor+dT4c/Hrxr8A9faGxvNU0i4aQme1mBSFcH+KNsE8/3civr74Gf8FYYb1Y9N8Y2MdjKw2JqkA8yJDj7xiJB6+9dVKeJpNewm5R9Tir4XC103USTP3h8EfFjQ/iPZJPpOpWtyP+WiK4Dx/7yn5h+IroE1RQV3uoBXO0j5/yr+e34uf8FFPEnwa8U2OpaH8WdN16Fx5yWemWUtu0q9QjqcgEdM5NfXP/AAS+/wCC5vij9q/9o7wj8LLrwnBc3GrJcPfajcXpR7JIoHkJACHfl1VcEr97PtX1uDxNWol7RWPj8XltOjJum7n6Q/tEsr+AraVQH/4mMDDPIzkivQLb/V4xivPv2iJv+LcwMo27b+DjH+0a9DiGFxnNem9zy1sOooopiCiiigAoopgk5oAeTikLgUbge4prOCeCPzqG2nqA7ePekaQYPWk596Qng5PHvRz+Qcr7njv7ek2f2QfiCrZDf2NcKPxQgV+XV3qJsfCbwngs8Yyen31xX6f/ALfcoX9krxtyNsumSID2JIOBX5g+LY0Xw+sTodySQE8ckB1r4Li+nJzi47H3fB84qMmx/ghftHhCFNxIj3dsZ+Y1s2XmXZRbeRrbGEkJKHK5/hDA4b3rlfBuuRwaG8cjBI8naAfmUbj1rZskNlcRyx3A3sMxq55B7MB329cd6+SjFymowR9lHlUXLueFfHnU/B3j74i6t4T8UeG31K9tEMtvd2u0XqIEJYEqB8ygc5yAR0rw34uf8E/Nc8OaRLqvgvU4NW0xbc3bW2oRkXEKYJwJAQGOAeMdq474w/ErVPgn+1NrzPqTXcxtZbe4k8353aSJ1kQOOV3ZPIPJwO9fVXwJ8T6vdfsk3+o6vcCZUspjDGxCSW8ewhFZf73zHk/NX0UFUoOEU9GeY6dOopuS1R+cWnO4dnezkg8mMnmTO49+Oo/Ov6L/APgkJ/wS7+G37NXwx8GfE6w0y8l8ceIdChnvLq6nLiFp1VpNi445OPpX87GlrMlgoi3Gd32gN8xZmPC+59q/ry+Dvho+GPhN4c0sxmP+ztOggC4xjaq8fpX3+FjFxTR+e46rODa7mV+0Wd/w4ixnm/txz/vGvQ4+CR6Y/lXn37RyFfh5F7X9v/6Ea9BU4dv89q7Hq7njtjqKZja5OaQ5LUBHUkpsufLOOtQzybQMAsScYHesXxd4+0vwJprXusX9tp9on/LW5lEa/QetZ1a0KavJhTTnK0Ubrh/L96jMnlCvmv4n/wDBQ/SfDqPF4d06fV0hJ33bkxW4+hPJFeD+Lv2wPiL8RJJNt3cWtvIMfZ7NFtIh9GcM5/76rwsZxDQo6XPZw+R4mrqlY/QLUfEFppUZku7uC0T1llCA/nWBqXxy8J6S2LnxDpCEjIC3Cvx+FfnjbXWs6uSb/Ubsyvy4nuJ5mU/8Dcp+SilPg+HzWJ1OaQkZyLeFsH0yErxpcXRT9yNz06XC873qz0Pvj/hpnwGJsDxBYFv918fmAav23x48J6jjyvEGmYPrNs/mBX5+p4E+1EBNT1BQF3HASMZ9Pu0ybwVdW5Pk37Tv2SURsG+vy5qXxdN6OBt/qxT6TPUP+C2/7bOm/s9fsjDTrJkv9T+IDyabYSQyK0caBR5kvX+FT+YNfitP4iuL3W/tcuo6tqHiG7VCY7di5jXjOdhYR8dmr9B/2kP2etK+PVrpT+LbG61aDw9cmW3WG6eOKJSiqwCKcAHaSeOcms/wD8DvCGgaDHN4Z0Sz06O6lPmzxJ+8uSmSN+cs2cdzXBmWf0cRGK5NvM9vKMuWFi4t3ufMX7M/xxsxay6ZevNJLBP5TRz5DovbOQD1z2ro/jr8arrT9fj0HSPtltdNZG7Mts+8r8zAfLjngDuMe/StD9u74ceFPBPhC31m4tpdL8V6jMI7WaxPlmdV5LSJyGAzg9+V5r5L1n4j+IvCfi2fXrHxJFayXapbyK8SSoAFA2hmBPT0x75OScsJheb95FbndLFxX7s0E8QaZ8Qvjc+s69/o72UW2S4u9Na4DPtI8xgSmPZuTnHy+nuHhzxX9k/Y48by2lukOmoGj0xVfcZbclf3rZxghy+AM8N7VnfAvWtI+OPh6VNZ0q0vrqLAklSRlMnI+Y84Irp/2l44PDH7K+tadaWsFtbuohgEIxtGQcVVSbliIU2zSEVChOe58cfs/eHx4s+OXgTTzH5i6lr1tC0ePvZmC/0r+uTS12WkI9EUfpX8rf8AwTj8KnxB+3r8E7Er5iy+MLASDGQEWdWJ/Wv6rI1CooAxgV+jYdJRsj8xzBtyTfmcF+0j/wAk8T/r+t//AEKu4mmCSYLBeB1rhf2kJdngGDjP/Extx/49Xm37XP7Rvjr4TePrDTvDHhW21jT5rBbiS5kjd2EpkkUx/KwxhVU/8DroPOPoZs7z6VBezNCBtzg4BIx8g/vVYYYY1T1WVoIJJAFbZGSFzyx9Klu0XccZXaT2PKP2mv2orP4I2SWttGdQ1q6GY7RT9wdAz45AyRXxj8U/iHr/AMXPES3WrzSapq7KHihkk2WNihJxtQcb+DyRnpVifxdL8S/EOpeLtQd5bi8lfbIT9xASoVR7Kay/hvPFe6dqM6Mr3cs+y43/AHlJ6j6YCenevzHNM1qVK0o03off5dlNClSU5/ET+FvBNr/a63V0r3d8Vwbiddph9k9RWy2gW0WnRxKE8pTxGRuCe9TKzT4UMGZBxuPT6U2HVRBNtZGRm5Rh83mf4V4Sjd3qans+2k1yx0sSWmlSpIRFKhC9CAAalvLS7uHQOyybOQSQSKdp08MxaVo5I9/O4nH6UxioLSJOjIDyScfhXRzQa5YxOdxle8paEds91YtIAr7X5O8YUe4NRXs9zEVaTYiP0cYNTi7gvd0ctveyEj5FLqu4/wCFVNZt0sVhVJf3uflgOW8v6kVnJKw1a+hVu7JLjbPDghBhlI+VvqOhrgNSVdA+LDQWlz58V/Zm53lQgtSpGArdiwyRXX+JvFcfhmP98UebGRbxnLv+ArlTBYaVa6v4j8S3EWnxJ+/klZv3cCqp+QA4OAueR1IHHNcqw/tHywOyE1Hc+Av+CpXwLu/hV4s0fx8fFmt67pnirUF0uTTdUnkuHtTgsfKZs8LkHBIxmvi/426pI/j670dln+z6cFg0+PJcOpUMZRjO4ly2ffNfXn7X/wAffCX7W/xttZPEGoanpHgrwrEyaclqoe4uZMgmVQSAC2AO/GK871f9o3wf4dkZvA/gaAXr/e1PVZPMnOOB+724BwAc7upr7vL6U40lG3Q8TF1KfO2mb/7B2vvoGhrYX/n2sjgspvImhMp9t4AxXqf7beqDTvgVDHFLE7XlyFZFcEAEEk8fSvkzxr8T/EnxGYPq+qEvExkjEcYQRDB4ABr6Z/4JdWc37TX7ZPw68A+MbWx8Q+Dr28L3FpcwnLokbcE7uckj8q1WTznXjWaM6maRhQlBM1P+CHfwg1b4hf8ABRT4fX9rpOo3ej6LK19cXyQNJbQmNQUzIoKgkjuR1r+k4dBXH/DT4ReG/hF4eg03w3omn6NZWkYiihtYVjAQcAcDJ4rsK+wirHwlStKo/ePPv2kBnwHbj/qIwfzqb4ofs5eB/jPqlte+KfCPh3xDd2kRhhm1CwjuHjTcTtBYEgZJOPc1F+0gMeAIW/u38B/8erv0GBVmYx+9VtSyYCFAy6kdMngVYYHLVFNGG2E/fTJUetJq7swg9L+Z+Qnwy/aH07w/8R9e+Hevqmlaz4avpIIDMcRXKrJgAk8ZJx+tekav4Tu9F1ptX0xrW6tr5hJLDHIBGxA4598n8hXxx/wWV+G134D/AG7vE8t5DNbNqty2o2koXaJFky3yMepGcHb0rw74Y/t1/EX4Oj7DbalNfaej4EV1uuQB6ZbO38K/O8x4enKrKcWfoeCxylTimfp9F4+W0G2W2/syXu0wzGfoxqS01OyluLIreJ5luuNpfJPFfEfhr/gsbPb2q2uu+DbK8deC9vK+8n/dfCit21/4K6/DiOzZrjwDrsVzj5pAttn8PnrxpZPiqb9zU9T2lFr3z7GuNQSG6CGZQ78/M/y1RuvFmk6ZeGK61fT4JmGPKLglh6gevvXxfqP/AAWd+FWmOrr4K8UXU0fUOtvg/wDj9cx4j/4LheHHjebQPhtPDKpx/p0yIpPriIkn8qSyzGPSxDq4eOsdT7vk8c22lReTpVvrGsszbpAVARR67yDgZx0rE1Txd4gtbW5uNTn0PQNN25SR3PnwjuRIW2k/VTX5sePf+C0HxQ8TAx6RZ6HoUTnAMFskxUfVxu/OvGfHHxW+JH7QV0LvxJrmu6nEpyPtt1J9lT/cRz5a/wDAa76GRYuVnPYiWOpxV7H6JfGf/goV8M/g1HImk3L+MNel+Vp7eXKxt6GXlV/KvjH4+/tZeMf2k9egOp3hGlW7Yi0+FzFaru+8W2kPIByArMcZ4xXkFpbafok6CTGoXUR+7CjFAfdyM/lWoL9Njyy3ENqqjMcakDJr6rBZNSpR55K54uJzBz+EzviFY+VcxIDJJGpyHIAZfYYAGPwrKWNg3mIWYMRyeccdzT9WvnvLpZp5RmQ5xvz+lb/ww+FviH4x6+LDwpo+qa5flhGosLV5XDf3WKjCjnqfWvbhRhFXSPIqYh9TnJECauZZATDFGWZ/4V+pr7e/4N7NCPiD/gpP4WmMi3AstKvLsL08v5olB/U16L+xv/wb6eJfiLexal8YNT/4Q6ykRH/syxuY2u7n51O1pA37vjPcGv1U/Y9/YH+Df7IF+L3wP4TsrTXVg+zyaxcxme/njY8oZyCSMqD1q95aHn1q7ejPpzy8sMDjvUtVLK/E6irddB59tbnAftI/8k8T/r+t/wD0Ku+XpXA/tI/8k8T/AK/rf/0Ku+XpQAtMkA3KT2/Sn0YGc45oA+f/ANuP/gn54J/bg8BLpviW2WDVbRGFhq8QzcWTFSAwHG4c/dJH1r8Zv22/+CPPxg/ZQS/1WOwi8Z+DbSIMNT0oH7SiAn5p4D0H+6zGv6FpoRIB0HOc1U1OwhubGeKWJLiORCrRyDKuMcgjuK569KM1qdmHxsqKsj+Si6Fvb3O5bL5HiMkfksSWcdQ2ehyKxdWvtPlU7rO6/Ov1b/4LZ/sC+APCvimz174cXFho3ia+ja71Tw9ar+6u48nM6KP9UwwflHDEdM5r8s9f8O3tvLcRvBKksXQtkBhXmOpC/L2PpaFSVSCnI4q+k0eOZmOnXrknnFyFz+G04qr/AG/psMwSDRHMhGQ002/H5AVY8RQ/ZGVlO7P3woyc/jWS8qhC0f2kux4B6j8gKXtILU0lKS1jubEXjS7jUxww2cGRhhFHlyPQ5p/2uW5jBupXmB5VFcgr+HSqej+GNQ1JlaK2vpXc4+WHp9TjpXd6R8FLs26zahcrYx4yyryx/OiVeFmZ+zrT0ZzltqS2sYCqmP8Ae+atjw34XvvHniWaO3jhhM3KF2+THtVvxp4K0DT/AAq9nvaCd/8Al6jctJV34M6XcaNepM01xKp4UmMMf++ccfhWDzO1PkgV/ZzPq3/gn3+yR8FvE+uS2fxIvNUu9ckkElrpbOkWnT/7TOcknPbiv1B+Guj+FvhNY2+neEtB0nSLeIBE+yIqEjHdjzn86/ITT9KklgiDrDF5y+apkk2Hd/eDZyp+hr6v/YJ/aOu/HviubwPfX0euSaVaefG4O6S35ICl+rYxnJPeujLsbVnpLY83NMvcEnCR932fxBkuLqXflXjbHLbj+dejfDjxVLdSRs08pIPC54NeKeGvD9z5iRy/MwXJdegz2PvXtPwt8JPD5TljwelezFq2h8+4yWk3dnuXhKZp7NWat+sbwtZtBp67q2aoRwH7SP8AyTxP+v63/wDQq75elcB+0dhfAUIxktqEHf8A2q72A5TkYxQARzeYvA57j0pyOHzg5x19q4PTvi7F/wALFu/DWoW0ml6kW32RlOY9RjxyyNwMg8FevIIzzjsrCQhDuVAxwThs54oAtOMisD4leJx4L8A6xquATp9nLOoPdlUkD88Vvkn6DFcT8dtP/wCEj+E/iXTVDeZd6bOibeTnYcY981hWV4tLcumk5q5+KXxz/aLHhrSvEnxB8U6j5+teIFa6aCR988zciO3z1KYCqvYd8V8R6L4tfVPBAu9QiCvADmadshvzr0P9oXTLbxVrujtqouWm8OxSWGo2QOWUxyPtkQcb2f8AiB24ORnABPkHxmsta8X+EZNN0uyFtYA7twB3MB2xxXyDpzhVfO9z7mhaVFcq2OP8HeIrLWPjjEkkEFzpTgxiMgMhk65x6YPSvYbzT9E0y/d7TS9MtYydz7LZEAbp6e1ePfDH4YXOh2wmitLltTl+YF1wtu/T3zx9K9FHgDUtZiDavJLJkYMUPy5rHEVNbJnfhqateSG678YrfSTJb2dwplAwI4Bjd7HHaub0/UdY8ZzM10HsEY/KAvzOK7PSvhja6eWaG2gQ7cDzMlwfc4p175PhLL6h5cdzGN0aK3P1rnU6k3yLrodbVNK97Gdonw7h0sfapWQqeWkuDwPzqpqfj+6Gqx6b4Wt7rU9RlbYJrOBpXnJ/uqB8491yK9Q/Zq/ZQ8f/ALb3iIWmlwDS/DcUm26vZ1JVR/dQcbpMdsgf7VfqZ+yr/wAE8vBv7M2nxroWnG51CEbZ9TmRTcXHvyCF/Cvocvydx+PU+bx+axg+WDPy6+GH/BM79oH9oQRS6rbJ4c0ych/NvJlKBT/eSMtIh9ior9D/APgn9/wSxsv2SL6TWZNSk1jxHfRiJ5Iwwh8vHRQQCRknkjNfZXh/4VyzoT5Q2qflbGM/hXpPhv4ZQ29tE5BBHDY6/lXvQoQhokfOYnEupuzjvA3wtaMsbiOESykOwXt+FeteGPBsdnaL8igrV/RvDMOlxDCBS+Au4YLfjV7VNVsNE0qSe6uIbS2jHzSyOFRSO2SevtWiSWx56v1LUUqWtttBK7B83Gai1HxFbaVpz3dxPBBbwDdLNJIscSL/AHizEDHvXnNz8aNR8es1r4H0h9VhdjHNqd2zWtlERwQjFS7v7bAP9qlsP2dP7fngu/GWqzeJ722fzIohGbaygfOd6QhmO7/eZh7UxmL4/wDHbfHG4t9L8L2F7qljb3iSXWqoRFZxBeQUdyolHvFuHHWvZtLYtAcnfjHzhgRIcDJHpzmq+laTBotmILeNY41GAoACgfQACrlpEIkYAsQTnB6D6UAch8XPhrY/FDRjZ3wkVrZhPBcRP5U1nL/DJHIOVcc98EHBBBrn/A/xE1Dwh4ktvCnjFozq8oKadqqp5cesIBkHHQTAY3qMDOSoVSqjZ+KXxg0T4XahZJrU11bxajN5KNHYTTRbjjl3VSF529TWR8RPEfgD4h+DtR0/WPEfhaS3WQxTyjVIY2tJ054fcPLlTg9mXrQB6Hp9wcyK8iuFON+f0rlPiXdsttKqu0RdSB2P/wCquL+HHxk/4RfUtP0XVdatNY0+5xbaZr8EizQXbEgLDK6EqJT65wSMAkkV6H4s0xdThlTZtVRxJ95nb0x/d96nlV7jTs7o/Hn/AIKYf8E/9RPxF1H4g+CLZri1mxJqenQr86NgeY0ffLdfqT2wK+GdP+KC2V2dP1CxNw0P+sVItskYHqvWv6HPFPw0kuGbZAQRyxXo4r5/+On/AAS++Gn7Q90954i8MQS6nMMC8tohFcrnuZDg/rXm4zLIVmnroe9l2cOinGdj8d9Q+MvhIaSPKmFuRJjmHkfjXP6j8cfB9o83naswRW+7DEWY8D+IdPpX6S+OP+DcTwR4kj8jTfFfibQ4925cRpfY9vnbFReA/wDg2D+HFpqPma54v8WeIA2CYykdo232ZXwPpmvNnw+m7pu56b4jio8uh+XWo/tFT+JdQtNL8I6Rf3WoTS4tJpI/PkLYP3Y8fMSM4DAj2zX2Z+xD/wAEWPFnx01ey8Y/FaS70rS7gCddNXi7uCO0q9IlPoADX6dfss/8Emvg/wDspNFc+FPBmmrqMC7f7UvYvPvhntvIJ/X3r6O0vwL5ZjdwQUBiU9SF67W9frXqYXLadJJy3PFxWbVKj9xniHwn/Zu034e+HLXTdI0ux0+ztIhDFHDGERVHqO7H+8efevTPD/w7gt3UeWAX5KAcj6131p4cSzHRAT2NU9X8SaZ4O0d7zVLy00y2RdzNPIsaqewVjwxPoDk16nMzx3dz529SLTfDEMCg8hehVRnn0qxr2vaX4Js5Lq9u7SztYoiXmmkCKgBPOTXAp8V9f+IryN4T0WW2gk+Q6xq8bW8W0Z4SIjzGbnPKhCP4qyvCWi+ENYtLzxBrfifT/GsnhyRxeX09xEtnpckZw7CMt5UOzGCVPVSTzmpB6u5tv8X9b+IUaf8ACF6Gbi03bf7X1Lclqo/56ImQZh6bT1IPapdM/Z/TU9RGoeKNRuvFupH5kS8IjsIPpbxhUf2ZwzD1rsdD8V6XrulC70+8trizmXKTROGWXHcHuAM81sW99FLJGI2jkyobKsCcHof0NAFeC12ARxARgALtxgKo7DHfHc1p5Pp+tJtCnOOfpTqAE2g9qUDFFFAHN/Gn9m3SvjnoP9m6pq/iCytCdxWwnijLHcjA5aNuRswPZ29scJ4g/wCCcPgTxNoX9nXd/wCJXtcX4Kia3UsbwESFj5PzMufkJyRgZzXv9FAHmfhr9k/wp4Z8G6v4fRb660nWdQudRmt53QrE87l2WPag2qpPy45GBya6XwZ8Lbbwb4VtNK/tHVdTS0G1bi+kR53XnAZlRQQBwOM4A6109FAGPN4HspySTKMrt4I6flVd/hppr9TOf+BL/hXQUU02hNJmHH8PdPjQKBLge4/wp8fgaxi+6JQfqP8ACtminzMXKjNXwvbqMB5sfUf4U8eHYBGV3SkH3H+FX6Kl67jSS2Mu88KRXVs8aXF1bl+d8RXcPpuUj9K4vSP2X9AtNWl1DUb3WvEOoO2Y7jU545Tbj+6iqioB9VJ969IooGZLeDLN7TyGMrRAYCkgY4xxgV5po37DfgTQvD3iTRre3vhonixp31LTzJH5E7TEmQ42buSSevevYaKAPCbP/gnz4NtLS/gOreLJIrq2mtLZWvYlGlxyxNGRbhYgFIDZG7dyB1rV+Ef7E/hj4LeLv7Z0jVvFUly4kWVLq+SWKZWWJQrL5Y4XysrgjmR85yAPYaKAKf8AYkX96T8x/hR/YkX96T8x/hVyigCn/YkX96T8x/hR/YkX96T8x/hVyigD/9k=","Vaso Sanit\xe1rio"),disabled:v,children:[(0,nm.jsx)(Yw,{icon:Dm})," Vaso Sanit\xe1rio"]}),(0,nm.jsxs)("button",{onClick:()=>R("lavatory",{},"data:image/png;base64,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","Lavat\xf3rio"),disabled:v,children:[(0,nm.jsx)(Yw,{icon:xm})," Lavat\xf3rio"]}),(0,nm.jsxs)("button",{onClick:()=>R("sink",{},am,"Pia"),disabled:v,children:[(0,nm.jsx)(Yw,{icon:mm})," Pia"]}),(0,nm.jsxs)("button",{onClick:()=>R("banheira",{},"data:image/png;base64,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","Banheira"),disabled:v,children:[(0,nm.jsx)(Yw,{icon:bm})," Banheira"]})]})]}),(0,nm.jsxs)("div",{className:"library-group",children:[(0,nm.jsx)("h4",{children:"Outros"}),(0,nm.jsx)("div",{className:"library-group-buttons",children:(0,nm.jsxs)("button",{onClick:()=>R("piscina",{},lm,"Piscina"),disabled:v,children:[(0,nm.jsx)(Yw,{icon:Om})," Piscina"]})})]})]})]}),(0,nm.jsx)("div",{className:"canvas-container",children:(0,nm.jsx)("canvas",{id:"canvas",ref:C})}),h&&(0,nm.jsx)("div",{className:"project-modal-overlay",children:(0,nm.jsxs)("div",{className:"project-modal-content",children:[(0,nm.jsx)("h2",{children:"Meus Projetos"}),d.length>0?(0,nm.jsx)("ul",{children:d.map(t=>(0,nm.jsxs)("li",{className:"project-item",children:[(0,nm.jsx)("span",{children:t.name}),(0,nm.jsxs)("div",{children:[(0,nm.jsx)("button",{onClick:()=>(async t=>{if(console.log("handleLoadProject: Starting project load."),console.log("handleLoadProject: Current canvas:",e),console.log("handleLoadProject: Project to load:",t),!e||v){const e="Canvas is not ready or is loading.";return console.error("handleLoadProject:",e),void hv.error(e)}y(!0);const n=t.id,r=t.data;console.log("handleLoadProject: Project ID:",n),console.log("handleLoadProject: Project JSON (first 200 chars):",JSON.stringify(r).substring(0,200));try{e.clear(),console.log("handleLoadProject: Canvas cleared."),e.loadFromJSON(r,()=>{console.log("handleLoadProject: loadFromJSON callback executed. Project successfully loaded into Fabric.js.");const t=e.getWidth(),r=e.getHeight(),i=Zw(e,t,r,20);u(i),e.renderAll(),hv.success(`Project "${n}" loaded.`),y(!1)},(e,t)=>{t&&"image"===t.type&&t.src&&!t.crossOrigin&&(t.crossOrigin="anonymous",console.log(`handleLoadProject: Setting crossOrigin for image: ${t.src}`))})}catch(i){const e=`Error loading project: ${i.message}`;console.error("handleLoadProject:",e,i),hv.error(e),y(!1)}finally{f(!1)}})(t),disabled:v,children:"Abrir"}),(0,nm.jsx)("button",{onClick:()=>D(t),disabled:v,className:"delete-btn",children:"Excluir"})]})]},t.id))}):(0,nm.jsx)("p",{children:"Voc\xea n\xe3o tem projetos salvos."}),(0,nm.jsx)("button",{onClick:()=>f(!1),className:"project-modal-close-btn",children:"Fechar"})]})})]})}const ex=function(){return(0,nm.jsx)(ye,{basename:"/editor_projeto",children:(0,nm.jsxs)(ge,{children:[(0,nm.jsx)(de,{path:"/",element:(0,nm.jsx)(rm,{})}),(0,nm.jsx)(de,{path:"/editor",element:(0,nm.jsx)($w,{})}),(0,nm.jsx)(de,{path:"/editor_projeto",element:(0,nm.jsx)($w,{})}),(0,nm.jsx)(de,{path:"/novo-projeto",element:(0,nm.jsx)($w,{})})]})})};i.createRoot(document.getElementById("root")).render((0,nm.jsx)(t.StrictMode,{children:(0,nm.jsx)(ex,{})}))})()})();
//# sourceMappingURL=main.7fddebfe.js.map